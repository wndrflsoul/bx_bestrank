
; /* Start:"a:4:{s:4:"full";s:98:"/bitrix/components/bitrix/intranet.settings.widget/templates/.default/script.min.js?17455640305250";s:6:"source";s:79:"/bitrix/components/bitrix/intranet.settings.widget/templates/.default/script.js";s:3:"min";s:83:"/bitrix/components/bitrix/intranet.settings.widget/templates/.default/script.min.js";s:3:"map";s:83:"/bitrix/components/bitrix/intranet.settings.widget/templates/.default/script.map.js";}"*/
this.BX=this.BX||{};(function(e,t,i){"use strict";let s=e=>e,a,l,n,r;var d=babelHelpers.classPrivateFieldLooseKey("instance");var o=babelHelpers.classPrivateFieldLooseKey("popup");var p=babelHelpers.classPrivateFieldLooseKey("isBitrix24");var c=babelHelpers.classPrivateFieldLooseKey("isAdmin");var v=babelHelpers.classPrivateFieldLooseKey("isRequisite");var g=babelHelpers.classPrivateFieldLooseKey("isMainPageAvailable");var h=babelHelpers.classPrivateFieldLooseKey("getWidgetPopup");var b=babelHelpers.classPrivateFieldLooseKey("load");class w{constructor(e){Object.defineProperty(this,b,{value:m});Object.defineProperty(this,h,{value:u});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,p,{writable:true,value:false});Object.defineProperty(this,c,{writable:true,value:false});Object.defineProperty(this,v,{writable:true,value:false});Object.defineProperty(this,g,{writable:true,value:false});babelHelpers.classPrivateFieldLooseBase(this,p)[p]=e["isBitrix24"];babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e["isAdmin"];babelHelpers.classPrivateFieldLooseBase(this,v)[v]=e["isRequisite"];babelHelpers.classPrivateFieldLooseBase(this,g)[g]=e["isMainPageAvailable"]}showOnce(e){const t=babelHelpers.classPrivateFieldLooseBase(this,h)[h]().getPopup();t.setBindElement(e);t.show();const i=t.getPopupContainer();if(i.getBoundingClientRect().left<30){i.style.left="30px"}(typeof BX.Intranet.SettingsWidget!=="undefined"?Promise.resolve():babelHelpers.classPrivateFieldLooseBase(this,b)[b]()).then((()=>{if(typeof BX.Intranet.SettingsWidget!=="undefined"){BX.Intranet.SettingsWidget.bindAndShow(e)}}))}getHeaderSkeleton(){return i.Tag.render(a||(a=s`
			<div class="intranet-widget-skeleton__header">
				<div style="max-width: 95px; height: 8px;" class="intranet-widget-skeleton__line"></div>
			</div>
		`))}getItemSkeleton(){return i.Tag.render(l||(l=s`
			<div class="intranet-widget-skeleton__row">
				<div class="intranet-widget-skeleton__item">
					<div style="width: 26px; height: 26px; margin-right: 8px;" class="intranet-widget-skeleton__circle"></div>
					<div style="max-width: 130px;" class="intranet-widget-skeleton__line"></div>
					<div style="width: 12px; height: 12px; margin-left: auto;" class="intranet-widget-skeleton__circle"></div>
				</div>
			</div>
		`))}getSplitItemSkeleton(){return i.Tag.render(n||(n=s`
			<div class="intranet-widget-skeleton__row">
				<div class="intranet-widget-skeleton__item">
					<div style="width: 26px; height: 26px; margin-right: 8px;" class="intranet-widget-skeleton__circle"></div>
					<div style="max-width: 75px;" class="intranet-widget-skeleton__line"></div>
					<div style="width: 12px; height: 12px; margin-left: auto;" class="intranet-widget-skeleton__circle"></div>
				</div>
				<div class="intranet-widget-skeleton__item">
					<div style="width: 26px; height: 26px; margin-right: 8px;" class="intranet-widget-skeleton__circle"></div>
					<div style="max-width: 75px;" class="intranet-widget-skeleton__line"></div>
					<div style="width: 12px; height: 12px; margin-left: auto;" class="intranet-widget-skeleton__circle"></div>
				</div>
			</div>
		`))}getFooterSkeleton(){return i.Tag.render(r||(r=s`
			<div class="intranet-widget-skeleton__footer">
				<div style="max-width: 40px;" class="intranet-widget-skeleton__line"></div>
				<div style="max-width: 40px;" class="intranet-widget-skeleton__line"></div>
				<div style="max-width: 40px;" class="intranet-widget-skeleton__line"></div>
			</div>
		`))}static init(e){if(!babelHelpers.classPrivateFieldLooseBase(this,d)[d]){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=new this(e)}return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}}function u(){if(babelHelpers.classPrivateFieldLooseBase(this,o)[o]){return babelHelpers.classPrivateFieldLooseBase(this,o)[o]}const e=new t.PopupComponentsMaker({width:374});const s=e.getPopup().getPopupContainer();i.Dom.clean(s);i.Dom.addClass(s,"intranet-widget-skeleton__wrap");i.Dom.append(this.getHeaderSkeleton(),s);if(babelHelpers.classPrivateFieldLooseBase(this,v)[v]){i.Dom.append(this.getItemSkeleton(),s)}if(babelHelpers.classPrivateFieldLooseBase(this,g)[g]){i.Dom.append(this.getItemSkeleton(),s)}if(babelHelpers.classPrivateFieldLooseBase(this,c)[c]){i.Dom.append(this.getSplitItemSkeleton(),s)}if(babelHelpers.classPrivateFieldLooseBase(this,p)[p]){i.Dom.append(this.getItemSkeleton(),s)}i.Dom.append(this.getItemSkeleton(),s);i.Dom.append(this.getFooterSkeleton(),s);babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e;return e}function m(){return new Promise((e=>{i.ajax.runComponentAction("bitrix:intranet.settings.widget","getWidgetComponent",{mode:"class"}).then((e=>new Promise((t=>{const s=e.data.assets?e.data.assets.css:[];const a=e.data.assets?e.data.assets.js:[];BX.load(s,(()=>{BX.loadScript(a,(()=>{i.Runtime.html(null,e.data.html).then(t)}))}))})))).then((()=>{if(typeof BX.Intranet.SettingsWidget!=="undefined"){setTimeout((()=>{BX.Intranet.SettingsWidget.bindWidget(babelHelpers.classPrivateFieldLooseBase(this,h)[h]());e()}),0)}}))}))}Object.defineProperty(w,d,{writable:true,value:void 0});e.SettingsWidgetLoader=w})(this.BX.Intranet=this.BX.Intranet||{},BX.UI,BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:67:"/bitrix/components/bitrix/search.title/script.min.js?17455640626543";s:6:"source";s:48:"/bitrix/components/bitrix/search.title/script.js";s:3:"min";s:52:"/bitrix/components/bitrix/search.title/script.min.js";s:3:"map";s:52:"/bitrix/components/bitrix/search.title/script.map.js";}"*/
function JCTitleSearch(t){var e=this;this.arParams={AJAX_PAGE:t.AJAX_PAGE,CONTAINER_ID:t.CONTAINER_ID,INPUT_ID:t.INPUT_ID,MIN_QUERY_LEN:parseInt(t.MIN_QUERY_LEN,10)};if(t.WAIT_IMAGE){this.arParams.WAIT_IMAGE=t.WAIT_IMAGE}if(this.arParams.MIN_QUERY_LEN<=0){this.arParams.MIN_QUERY_LEN=1}this.cache=[];this.cache_key=null;this.startText="";this.running=false;this.runningCall=false;this.currentRow=-1;this.RESULT=null;this.CONTAINER=null;this.INPUT=null;this.WAIT=null;this.ShowResult=function(t){if(BX.type.isString(t)){e.RESULT.innerHTML=t}e.RESULT.style.display=e.RESULT.innerHTML===""?"none":"block";var s=e.adjustResultNode();var i=null;var n=null;var l=BX.findChild(e.RESULT,{tag:"table",class:"title-search-result"},true);if(l){n=BX.findChild(l,{tag:"th"},true)}if(n){var r=BX.pos(l);r.width=r.right-r.left;var a=BX.pos(n);a.width=a.right-a.left;n.style.width=a.width+"px";e.RESULT.style.width=s.width+a.width+"px";e.RESULT.style.left=s.left-a.width-1+"px";if(r.width-a.width>s.width){e.RESULT.style.width=s.width+a.width-1+"px"}r=BX.pos(l);i=BX.pos(e.RESULT);if(i.right>r.right){e.RESULT.style.width=r.right-r.left+"px"}}var o=false;if(l){o=BX.findChild(e.RESULT,{class:"title-search-fader"},true)}if(o&&n){i=BX.pos(e.RESULT);o.style.left=i.right-i.left-18+"px";o.style.width=18+"px";o.style.top=0+"px";o.style.height=i.bottom-i.top+"px";o.style.display="block"}};this.onKeyPress=function(t){var s=BX.findChild(e.RESULT,{tag:"table",class:"title-search-result"},true);if(!s){return false}var i=0;var n=s.rows.length;switch(t){case 27:e.RESULT.style.display="none";e.currentRow=-1;e.UnSelectAll();return true;case 40:if(e.RESULT.style.display=="none"){e.RESULT.style.display="block"}var l=-1;for(i=0;i<n;i++){if(!BX.findChild(s.rows[i],{class:"title-search-separator"},true)){if(l==-1){l=i}if(e.currentRow<i){e.currentRow=i;break}else if(s.rows[i].className=="title-search-selected"){s.rows[i].className=""}}}if(i==n&&e.currentRow!=i){e.currentRow=l}s.rows[e.currentRow].className="title-search-selected";return true;case 38:if(e.RESULT.style.display=="none"){e.RESULT.style.display="block"}var r=-1;for(i=n-1;i>=0;i--){if(!BX.findChild(s.rows[i],{class:"title-search-separator"},true)){if(r==-1){r=i}if(e.currentRow>i){e.currentRow=i;break}else if(s.rows[i].className=="title-search-selected"){s.rows[i].className=""}}}if(i<0&&e.currentRow!=i){e.currentRow=r}s.rows[e.currentRow].className="title-search-selected";return true;case 13:if(e.RESULT.style.display=="block"){for(i=0;i<n;i++){if(e.currentRow==i&&!BX.findChild(s.rows[i],{class:"title-search-separator"},true)){var a=BX.findChild(s.rows[i],{tag:"a"},true);if(a){window.location=a.href;return true}}}}return false;default:break}return false};this.onTimeout=function(){e.onChange((function(){setTimeout(e.onTimeout,500)}))};this.onChange=function(t){if(e.running){e.runningCall=true;return}e.running=true;if(e.INPUT.value!=e.oldValue&&e.INPUT.value!=e.startText){e.oldValue=e.INPUT.value;if(e.INPUT.value.length>=e.arParams.MIN_QUERY_LEN){e.cache_key=e.arParams.INPUT_ID+"|"+e.INPUT.value;if(e.cache[e.cache_key]==null){if(e.WAIT){var s=BX.pos(e.INPUT);var i=s.bottom-s.top-2;e.WAIT.style.top=s.top+1+"px";e.WAIT.style.height=i+"px";e.WAIT.style.width=i+"px";e.WAIT.style.left=s.right-i+2+"px";e.WAIT.style.display="block"}BX.ajax.post(e.arParams.AJAX_PAGE,{ajax_call:"y",INPUT_ID:e.arParams.INPUT_ID,q:e.INPUT.value,l:e.arParams.MIN_QUERY_LEN},(function(s){e.cache[e.cache_key]=s;e.ShowResult(s);e.currentRow=-1;e.EnableMouseEvents();if(e.WAIT){e.WAIT.style.display="none"}if(!!t){t()}e.running=false;if(e.runningCall){e.runningCall=false;e.onChange()}}));return}e.ShowResult(e.cache[e.cache_key]);e.currentRow=-1;e.EnableMouseEvents()}else{e.RESULT.style.display="none";e.currentRow=-1;e.UnSelectAll()}}if(!!t){t()}e.running=false};this.onScroll=function(){if(BX.type.isElementNode(e.RESULT)&&e.RESULT.style.display!=="none"&&e.RESULT.innerHTML!==""){e.adjustResultNode()}};this.UnSelectAll=function(){var t=BX.findChild(e.RESULT,{tag:"table",class:"title-search-result"},true);if(t){var s=t.rows.length;for(var i=0;i<s;i++){t.rows[i].className=""}}};this.EnableMouseEvents=function(){var t=BX.findChild(e.RESULT,{tag:"table",class:"title-search-result"},true);if(t){var s=t.rows.length;for(var i=0;i<s;i++){if(!BX.findChild(t.rows[i],{class:"title-search-separator"},true)){t.rows[i].id="row_"+i;t.rows[i].onmouseover=function(t){if(e.currentRow!=this.id.substr(4)){e.UnSelectAll();this.className="title-search-selected";e.currentRow=this.id.substr(4)}};t.rows[i].onmouseout=function(t){this.className="";e.currentRow=-1}}}}};this.onFocusLost=function(t){setTimeout((function(){e.RESULT.style.display="none"}),250)};this.onFocusGain=function(){if(e.RESULT.innerHTML.length>0){e.ShowResult()}};this.onKeyDown=function(t){if(!t){t=window.event}if(e.RESULT.style.display=="block"&&e.onKeyPress(t.keyCode)){return BX.PreventDefault(t)}};this.adjustResultNode=function(){if(!(BX.type.isElementNode(e.RESULT)&&BX.type.isElementNode(e.CONTAINER))){return{top:0,right:0,bottom:0,left:0,width:0,height:0}}var t=BX.pos(e.CONTAINER);e.RESULT.style.position="absolute";e.RESULT.style.top=t.bottom+2+"px";e.RESULT.style.left=t.left+"px";e.RESULT.style.width=t.width+"px";return t};this.onContainerLayoutChange=function(){if(BX.type.isElementNode(e.RESULT)&&e.RESULT.style.display!=="none"&&e.RESULT.innerHTML!==""){e.adjustResultNode()}};this.Init=function(){this.CONTAINER=document.getElementById(this.arParams.CONTAINER_ID);BX.addCustomEvent(this.CONTAINER,"OnNodeLayoutChange",this.onContainerLayoutChange);this.RESULT=document.body.appendChild(document.createElement("DIV"));this.RESULT.className="title-search-result";this.INPUT=document.getElementById(this.arParams.INPUT_ID);this.startText=this.INPUT.value;this.oldValue=this.INPUT.value;BX.bind(this.INPUT,"focus",(function(){e.onFocusGain()}));BX.bind(this.INPUT,"blur",(function(){e.onFocusLost()}));this.INPUT.onkeydown=this.onKeyDown;if(this.arParams.WAIT_IMAGE){this.WAIT=document.body.appendChild(document.createElement("DIV"));this.WAIT.style.backgroundImage="url('"+this.arParams.WAIT_IMAGE+"')";if(!BX.browser.IsIE()){this.WAIT.style.backgroundRepeat="none"}this.WAIT.style.display="none";this.WAIT.style.position="absolute";this.WAIT.style.zIndex="1100"}BX.bind(this.INPUT,"bxchange",(function(){e.onChange()}));var t=BX.findParent(this.CONTAINER,BX.is_fixed);if(BX.type.isElementNode(t)){BX.bind(window,"scroll",BX.throttle(this.onScroll,100,this))}};BX.ready((function(){e.Init(t)}))}
/* End */
;
; /* Start:"a:4:{s:4:"full";s:103:"/bitrix/components/bitrix/intranet.user.profile.button/templates/.default/script.min.js?174556403076682";s:6:"source";s:83:"/bitrix/components/bitrix/intranet.user.profile.button/templates/.default/script.js";s:3:"min";s:87:"/bitrix/components/bitrix/intranet.user.profile.button/templates/.default/script.min.js";s:3:"map";s:87:"/bitrix/components/bitrix/intranet.user.profile.button/templates/.default/script.map.js";}"*/
this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(t,e,i,n,a,r,s,l,o,c,u,d){"use strict";var m=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(m,"eventNameSpace","BX.Intranet.Userprofile:");var h,v;var p=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"getOpenSliderFunction",value:function t(e){if(o.Type.isStringFilled(e)){return function(){u.EventEmitter.emit(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+"onNeedToHide");BX.SidePanel.Instance.open(e,{cacheable:false,data:{},width:500})}}return function(){}}},{key:"showData",value:function t(e){e.value=parseInt(e.value||0);var i=o.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --vertical" id="user-indicator-pulse">\n\t\t\t\t<div class="system-auth-form__item-block --margin-bottom">\n\t\t\t\t\t<div class="system-auth-form__stress-widget">\n\t\t\t\t\t\t<div data-role="value-degree" class="system-auth-form__stress-widget--arrow" style="transform: rotate(90deg);"></div>\n\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content">\n\t\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content-title">','</div>\n\t\t\t\t\t\t\t<div data-role="value" class="system-auth-form__stress-widget--content-progress ','">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --stress-widget-sp">\n\t\t\t\t\t\t<div class="system-auth-form__item-block --center --width-100">\n\t\t\t\t\t\t\t<span class="system-auth-form__stress-widget--status  --flex --','">','</span>\n\t\t\t\t\t\t\t<span class="system-auth-form__icon-help" onclick="','"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted" onclick="','">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-block --flex --center">\n\t\t\t\t\t<div class="system-auth-form__stress-widget--message">',"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),o.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT"),e.value>0?"":"--empty",o.Text.encode(e.type),o.Text.encode(e.typeDescription),this.getOpenSliderFunction(e.url.result),this.getOpenSliderFunction(e.url.check),o.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON"),o.Text.encode(e.comment));setTimeout((function(){var t=setInterval((function(e){e.current++;e.node.innerHTML=e.current;if(e.current>=e.end){clearInterval(t)}}),600/e.value,{current:0,end:e.value,node:i.querySelector('[data-role="value"]')});i.querySelector('[data-role="value-degree"]').style.transform="rotate("+1.8*e.value+"deg)"}),1e3);return i}},{key:"showEmpty",value:function t(e){var i=e.url.check;return o.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --vertical --empty-stress --clickable" onclick="','">\n\t\t\t\t<div class="system-auth-form__item-block --margin-bottom">\n\t\t\t\t\t<div class="system-auth-form__stress-widget">\n\t\t\t\t\t\t<div data-role="value-degree" class="system-auth-form__stress-widget--arrow" style="transform: rotate(90deg);"></div>\n\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content">\n\t\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content-title">','</div>\n\t\t\t\t\t\t\t<div data-role="value" class="system-auth-form__stress-widget--content-progress --empty">?</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --stress-widget-sp">\n\t\t\t\t\t\t<div class="system-auth-form__stress-widget--message">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-block --flex --center">\n\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-new">\n\t\t\t\t\t<div class="system-auth-form__item-new--title">',"</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),this.getOpenSliderFunction(i),o.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT"),o.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_TITLE"),o.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON"),o.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_RESULT_COME_ON"))}},{key:"getPromise",value:function t(e){var i=this;var n=e.signedParameters,a=e.componentName,r=e.userId,s=e.data;return new Promise((function(t,e){var l=s?Promise.resolve({data:s}):o.ajax.runAction("socialnetwork.api.user.stresslevel.get",{signedParameters:n,data:{c:a,fields:{userId:r}}});l.then((function(e){var n=e.data;if(n&&n.id!==undefined&&n.value!==undefined){return t(i.showData(n))}var a=o.Loc.getMessage("USER_ID")===r?i.showEmpty(n):document.createElement("DIV");return t(a)}))["catch"]((function(e){t(i.showData({id:undefined,value:undefined,urls:{check:undefined}}))}))}))}}]);return t}();var f;function _(t,e,i){g(t,e);e.set(t,i)}function g(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var b=new WeakMap;var y=new WeakMap;var T=function(t){babelHelpers.inherits(e,t);function e(t){var i;babelHelpers.classCallCheck(this,e);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this));_(babelHelpers.assertThisInitialized(i),b,{writable:true,value:void 0});_(babelHelpers.assertThisInitialized(i),y,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),b,Object.assign({},t));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),b).lightning=String(t.id).indexOf("light:")===0?"light":String(t.id).indexOf("dark:")===0?"dark":null;i.applyTheme=i.applyTheme.bind(babelHelpers.assertThisInitialized(i));i.setEventNamespace(m.eventNameSpace);u.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(function(t){var e=t.data,n=e.id,a=e.theme;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),b).id=n;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),b).lightning=String(n).indexOf("light:")===0?"light":String(n).indexOf("dark:")===0?"dark":null;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),b).title=a.title;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),b).previewImage=a.previewImage;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),b).previewColor=a.previewColor;i.applyTheme()}));return i}babelHelpers.createClass(e,[{key:"applyTheme",value:function t(){var e=this.getContainer();if(o.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,b).previewImage)&&babelHelpers.classPrivateFieldGet(this,b).lightning){e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.backgroundImage='url("'+babelHelpers.classPrivateFieldGet(this,b).previewImage+'")';e.style.backgroundSize="cover"}else{e.style.background="none"}if(o.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,b).previewColor)){this.getContainer().style.backgroundColor=babelHelpers.classPrivateFieldGet(this,b).previewColor}if(!babelHelpers.classPrivateFieldGet(this,b).lightning){e.style.backgroundColor="rgba(255,255,255,1)"}o.Dom.removeClass(e,"--light --dark");o.Dom.addClass(e,"--"+babelHelpers.classPrivateFieldGet(this,b).lightning)}},{key:"getContainer",value:function t(){if(babelHelpers.classPrivateFieldGet(this,y)){return babelHelpers.classPrivateFieldGet(this,y)}var e=function t(){BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);u.EventEmitter.emit(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+":onOpen")};babelHelpers.classPrivateFieldSet(this,y,o.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --border ',' --padding-sm">\n\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t<div data-role="preview-color" class="system-auth-form__item-logo--image --theme"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-container --flex --column">\n\t\t\t\t\t<div class="system-auth-form__item-title --white-space --block">\n\t\t\t\t\t\t<span data-role="title">','</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-content --margin-top-auto --center --center-force">\n\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn" onclick="','">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),babelHelpers.classPrivateFieldGet(this,b).lightning?"--"+babelHelpers.classPrivateFieldGet(this,b).lightning:"",o.Loc.getMessage("AUTH_THEME_DIALOG"),e,o.Loc.getMessage("INTRANET_USER_PROFILE_CHANGE")));setTimeout(this.applyTheme,0);return babelHelpers.classPrivateFieldGet(this,y)}}],[{key:"getPromise",value:function t(){var e=this;return new Promise((function(t,i){o.ajax.runComponentAction("bitrix:intranet.user.profile.button","getThemePickerData",{mode:"class"}).then((function(i){var n=new e(i.data);t(n.getContainer())}))["catch"](i)}))}}]);return e}(u.EventEmitter);var E,L,I,P,S,R,w;function H(t,e){N(t,e);e.add(t)}function N(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function O(t,e,i){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return i}var k=new WeakSet;var A=function(){function t(e){babelHelpers.classCallCheck(this,t);H(this,k);this.data=e;this.onclickHandle=this.onclickHandle.bind(this)}babelHelpers.createClass(t,[{key:"showData",value:function t(){var e=O(this,k,F).call(this),i=e.myPosition,n=e.userList,a=e.range;var r;if(!this.data["ENABLED"]){r=o.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --without-stat">\n\t\t\t\t<div class="system-auth-form__item-container --flex --column">\n\t\t\t\t\t<div class="system-auth-form__item-title">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --lighter" data-role="empty-info">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),o.Loc.getMessage("INTRANET_USER_PROFILE_DISABLED"))}else if(a>0&&i>0){r=o.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --clickable" onclick="','">\n\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t<div class="system-auth-form__item-title --without-margin">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-title --link-light --margin-s">\n\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t<span class="system-auth-form__icon-help" data-hint="','" data-hint-no-icon></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-title --link-light" data-role="empty-info">','</div>\n\n\t\t\t\t\t<div class="system-auth-form__item-title --white-space --margin-xl">\n\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t<span class="system-auth-form__ustat-icon --up"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__userlist">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),this.onclickHandle,o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_RATING"),o.Loc.getMessage("INTRANET_USTAT_COMPANY_HELP_RATING"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_POSITION",{"#POSITION#":i,"#AMONG#":a}),n)}else{var s=a>0?this.onclickHandle:function(){};r=o.Tag.render(I||(I=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --without-stat ','" onclick="','">\n\t\t\t\t<div class="system-auth-form__item-container --flex --column">\n\t\t\t\t\t<div class="system-auth-form__item-title">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --lighter" data-role="empty-info">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),a>0?"--clickable":"",s,o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY_BRIEF"))}BX.UI.Hint.init(r);return r}},{key:"onclickHandle",value:function t(e){u.EventEmitter.emit(m.eventNameSpace+"onNeedToHide");if(window["openIntranetUStat"]){openIntranetUStat(e)}}},{key:"showWideData",value:function t(){var e=O(this,k,F).call(this),i=e.myPosition,n=e.userList,a=e.range;var r=o.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --center --padding-ustat ','">\n\t\t\t\t<div class="system-auth-form__item-image">\n\t\t\t\t\t<div class="system-auth-form__item-image--src --ustat"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-container --overflow">\n\t\t\t\t\t<div class="system-auth-form__item-title --xl --without-margin">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-container --block">\n\t\t\t\t\t<div class="system-auth-form__item-title --link-light" data-role="empty-info">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-container--inline" data-role="my-position">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --link-light --without-margin --margin-right">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-title --white-space --margin-xl">\n\t\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t\t<span class="system-auth-form__ustat-icon --up"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__userlist" data-role="user-list">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__icon-help --absolute-right-bottom" data-hint="','" data-hint-no-icon></div>\n\t\t\t</div>\n\t\t'])),a>0?"--clickable":"--without-stat",o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_RATING"),o.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_POSITION",{"#POSITION#":i,"#AMONG#":a}),n,o.Loc.getMessage("INTRANET_USTAT_COMPANY_HELP_RATING"));if(a>0){r.addEventListener("click",this.onclickHandle)}return r}}],[{key:"getPromise",value:function t(e){var i=this;var n=e.userId,a=e.isNarrow,r=e.data;return new Promise((function(t,e){(r?Promise.resolve({data:r}):o.ajax.runComponentAction("bitrix:intranet.ustat.department","getJson",{mode:"class",data:{}})).then((function(e){var n=e.data;var r=new i(n);t(a?r.showData():r.showWideData())}))["catch"]((function(e){e=o.Type.isArray(e)?e:[e];var i=document.createElement("ul");e.forEach((function(t){var e=t.message;var n=document.createElement("li");n.innerHTML=e;n.className="ui-alert-message";i.appendChild(n)}));t(o.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="ui-alert ui-alert-danger">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>"])),i))}))}))}}]);return t}();function F(){var t=this;var e=document.createDocumentFragment();var i=parseInt(this.data["USERS_RATING"]["position"]);var n=0;var a=o.Type.isPlainObject(this.data["USERS_RATING"]["top"])?Object.values(this.data["USERS_RATING"]["top"]):o.Type.isArray(this.data["USERS_RATING"]["top"])&&this.data["USERS_RATING"]["top"].length>0?babelHelpers.toConsumableArray(this.data["USERS_RATING"]["top"]):[{USER_ID:o.Loc.getMessage("USER_ID"),ACTIVITY:0}];var r=i>5?[].concat(babelHelpers.toConsumableArray(a.slice(0,3)),babelHelpers.toConsumableArray(a.slice(-1)),[null]):a;r.forEach((function(i,a){if(i===null){e.appendChild(o.Tag.render(R||(R=babelHelpers.taggedTemplateLiteral(['<div class="system-auth-form__userlist-item --list"></div>']))));return}var r=i["ACTIVITY"];var s="";if(t.data["USERS_INFO"][i["USER_ID"]]){r=[t.data["USERS_INFO"][i["USER_ID"]]["FULL_NAME"],": ",i["ACTIVITY"]].join("");s=String(t.data["USERS_INFO"][i["USER_ID"]]["AVATAR_SRC"]).length>0?t.data["USERS_INFO"][i["USER_ID"]]["AVATAR_SRC"]:null}var l=String(i["USER_ID"])===String(o.Loc.getMessage("USER_ID"));if(l){n=i["ACTIVITY"]}e.appendChild(o.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div title="','" class="system-auth-form__userlist-item ui-icon ui-icon ui-icon-common-user">\n\t\t\t\t\t\t\t<i ',"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"])),o.Text.encode(r),s?"style=\"background-image: url('".concat(encodeURI(s),"');background-size: cover;\""):""))}));return{userList:e,myPosition:i,range:parseInt(this.data["USERS_RATING"]["range"]),myActivity:n}}var U,G,M,x,C,D;function B(t,e){z(t,e);e.add(t)}function W(t,e,i){z(t,e);e.set(t,i)}function z(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function X(t,e,i){Y(t,e);return i}function Y(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}function j(t,e,i){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return i}var q=new WeakMap;var V=new WeakMap;var K=new WeakSet;var Q=new WeakSet;var J=new WeakSet;var Z=new WeakSet;var $=new WeakSet;var tt=new WeakSet;var et=new WeakSet;var it=function(){function t(e,i){babelHelpers.classCallCheck(this,t);B(this,et);B(this,tt);B(this,$);B(this,Z);B(this,J);B(this,Q);B(this,K);W(this,q,{writable:true,value:void 0});W(this,V,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,q,e);babelHelpers.classPrivateFieldSet(this,V,i)}babelHelpers.createClass(t,[{key:"handlerLogoutButton",value:function t(){if(j(this,K,nt).call(this)){j(this,et,ct).call(this)}}},{key:"getContainer",value:function e(){var i=this;var n=function t(){if(j(i,K,nt).call(i)){babelHelpers.classPrivateFieldGet(i,V).getPopup().close();BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(i,q).url,{allowChangeHistory:false})}else if(!j(i,Q,at).call(i)){babelHelpers.classPrivateFieldGet(i,V).getPopup().close();BX.UI.InfoHelper.show("limit_office_login_history")}};var a=o.Tag.render(U||(U=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --vertical">\n\t\t\t\t\t<div class="system-auth-form__item-container --center ','">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-logo--image ','" onclick="','">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --sm ','" onclick="','">',"</div>\n\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-content">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__visited">\n\t\t\t\t\t</div>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),j(this,K,nt).call(this)?"--border":"",j(this,K,nt).call(this)?"--history":"--history-gray",n,j(this,K,nt).call(this)?"--link":"",n,o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_TITLE"),j(this,tt,ot).call(this),j(this,Z,st).call(this),j(this,$,lt).call(this,n));var r=a.querySelector(".system-auth-form__visited");if(j(this,K,nt).call(this)){var s=X(t,t,dt).call(t);s.show(r);o.ajax.runComponentAction("bitrix:intranet.user.login.history","getListLastLogin",{mode:"class",data:{limit:1}}).then((function(e){s.hide();var i=e.data;var a=Object.keys(i);a.forEach((function(e){var a=X(t,t,ut).call(t,i[e]["DEVICE_PLATFORM"],i[e]["GEOLOCATION"],i[e]["BROWSER"]);var s=X(t,t,mt).call(t,i[e]["LOGIN_DATE"]);var l=o.Tag.render(G||(G=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="system-auth-form__visited-item">\n\t\t\t\t\t\t\t<div data-hint=\'',"' class=\"system-auth-form__visited-icon --",'" onclick="','" data-hint-no-icon></div>\n\t\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\t\tBX.ready(() => {\n\t\t\t\t\t\t\t\t\tBX.UI.Hint.init(document.querySelector(".system-auth-form__visited-icon --','"));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t<\/script>\n\t\t\t\t\t\t\t<div class="system-auth-form__visited-text" onclick="','">','</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__visited-time" onclick="','">',"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"])),o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_THIS_DEVICE_DESCRIPTION"),i[e]["DEVICE_TYPE"],n,i[e]["DEVICE_TYPE"],n,a,n,s);o.Dom.append(l,r)}))}))["catch"]((function(){s.hide()}))}return a}}]);return t}();function nt(){return babelHelpers.classPrivateFieldGet(this,q).isAvailableUserLoginHistory&&babelHelpers.classPrivateFieldGet(this,q).isConfiguredUserLoginHistory}function at(){return babelHelpers.classPrivateFieldGet(this,q).isAvailableUserLoginHistory}function rt(){return babelHelpers.classPrivateFieldGet(this,q).isConfiguredUserLoginHistory}function st(){var t=this;var e=function e(){j(t,et,ct).call(t)};var i=function e(){babelHelpers.classPrivateFieldGet(t,V).getPopup().close();BX.Helper.show("redirect=detail&code=16615982")};if(j(this,K,nt).call(this)){return o.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn" onclick="','">',"</div>\n\t\t\t"],['\n\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn" onclick=\\"','\\">',"</div>\n\t\t\t"])),e,o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE"))}else if(!j(this,J,rt).call(this)){return o.Tag.render(x||(x=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t<div class='system-auth-form__settings' onclick=\"",'">',"</div>\n\t\t\t"])),i,o.Loc.getMessage("INTRANET_USER_PROFILE_CONFIGURE"))}return null}function lt(t){if(j(this,K,nt).call(this)){return o.Tag.render(C||(C=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t<div class="system-auth-form__show-history" onclick="','">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),t,o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_SHOW_FULL_LIST"))}return null}function ot(){var t=this;var e=function e(){babelHelpers.classPrivateFieldGet(t,V).getPopup().close();BX.UI.InfoHelper.show("limit_office_login_history")};if(!j(this,Q,at).call(this)){return o.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item-title-logo --lock" onclick="','">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t'])),e)}return null}function ct(){var t=this;BX.UI.Dialogs.MessageBox.show({message:o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_MESSAGE"),title:o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_TITLE"),buttons:BX.UI.Dialogs.MessageBoxButtons.YES_CANCEL,minWidth:400,popupOptions:{contentBackground:"transparent",autoHide:true,closeByEsc:true,padding:0,background:"",events:{onShow:function e(){babelHelpers.classPrivateFieldGet(t,V).getPopup().getPopup().setAutoHide(false)},onPopupClose:function e(){babelHelpers.classPrivateFieldGet(t,V).getPopup().getPopup().setAutoHide(true)}}},onYes:function t(e){o.ajax.runComponentAction("bitrix:intranet.user.profile.password","logout",{mode:"ajax"}).then((function(){e.close();BX.UI.Notification.Center.notify({content:o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_RESULT"),autoHideDelay:1800})}))["catch"]((function(){e.close();BX.UI.Notification.Center.notify({content:o.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_ERROR"),autoHideDelay:3600})}))}})}function ut(t,e,i){var n=[];if(i){n.push(i)}if(e){n.push(e)}if(t){n.push(t)}return n.join(", ")}function dt(){return new a.Loader({size:20,mode:"inline"})}function mt(t){var e=[["-","d.m.Y H:i:s"],["s","sago"],["i","iago"],["H","Hago"],["d","dago"],["m","mago"]];return" - "+BX.date.format(e,new Date(t),new Date)}var ht,vt;function pt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pt=function e(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,n=Object.defineProperty||function(t,e,i){t[e]=i.value},a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function o(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function t(e,i,n){return e[i]=n}}function c(t,e,i,a){var r=e&&e.prototype instanceof m?e:m,s=Object.create(r.prototype),l=new P(a||[]);return n(s,"_invoke",{value:T(t,i,l)}),s}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function m(){}function h(){}function v(){}var p={};o(p,r,(function(){return this}));var f=Object.getPrototypeOf,_=f&&f(f(S([])));_&&_!==e&&i.call(_,r)&&(p=_);var g=v.prototype=m.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function a(n,r,s,l){var o=u(t[n],t,r);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(o.arg)}var r;n(this,"_invoke",{value:function t(i,n){function s(){return new e((function(t,e){a(i,n,t,e)}))}return r=r?r.then(s,s):s()}})}function T(t,e,i){var n="suspendedStart";return function(a,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw r;return R()}for(i.method=a,i.arg=r;;){var s=i.delegate;if(s){var l=E(s,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var o=u(t,e,i);if("normal"===o.type){if(n=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(n="completed",i.method="throw",i.arg=o.arg)}}}function E(t,e){var i=e.method,n=t.iterator[i];if(undefined===n)return e.delegate=null,"throw"===i&&t.iterator["return"]&&(e.method="return",e.arg=undefined,E(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var a=u(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,d;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:undefined,done:!0}}return h.prototype=v,n(g,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=o(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,o(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(y.prototype),o(y.prototype,s,(function(){return this})),t.AsyncIterator=y,t.async=function(e,i,n,a,r){void 0===r&&(r=Promise);var s=new y(c(e,i,n,a),r);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(g),o(g,l,"Generator"),o(g,r,(function(){return this})),o(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,P.prototype={constructor:P,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function a(t,i){return l.type="throw",l.arg=e,n.next=t,i&&(n.method="next",n.arg=undefined),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],l=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(o&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function t(e,n){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=n,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(l)},complete:function t(e,i){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&i&&(this.next=i),d},finish:function t(e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),d}},catch:function t(e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function t(e,i,n){return this.delegate={iterator:S(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function ft(t,e,i){Tt(t,e);return i}function _t(t,e,i){Tt(t,e);yt(i,"get");return gt(t,i)}function gt(t,e){if(e.get){return e.get.call(t)}return e.value}function bt(t,e,i,n){Tt(t,e);yt(i,"set");Et(t,i,n);return n}function yt(t,e){if(t===undefined){throw new TypeError("attempted to "+e+" private static field before its declaration")}}function Tt(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}function Et(t,e,i){if(e.set){e.set.call(t,i)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=i}}var Lt=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"load",value:function(){var e=babelHelpers.asyncToGenerator(pt().mark((function e(){var i,n;return pt().wrap((function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return o.Runtime.loadExtension("humanresources.hcmlink.salary-vacation-menu");case 3:i=a.sent;n=i.SalaryVacationMenu;bt(this,t,Ht,new n);a.next=8;return _t(this,t,Ht).load();case 8:bt(this,t,St,_t(this,t,Ht).isHidden());bt(this,t,Rt,_t(this,t,Ht).isDisabled());a.next=14;break;case 12:a.prev=12;a.t0=a["catch"](0);case 14:case"end":return a.stop()}}),e,this,[[0,12]])})));function i(){return e.apply(this,arguments)}return i}()},{key:"getLayout",value:function e(){var i=this;if(_t(this,t,St)){return null}var n=_t(this,t,Rt);return _t(this,t,wt).remember("hcmLinkSalaryVacationLayout",(function(){var e=o.Tag.render(ht||(ht=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__scope system-auth-form__hcmlink ','"\n\t\t\t\t\t','\n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\tdata-hint-html\n\t\t\t\t\tdata-hint-interactivity\n\t\t\t\t>\n\t\t\t\t\t<div class="system-auth-form__item-container --flex" style="flex-direction:row;">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --hcmlink">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-title">\n\t\t\t\t\t\t\t<span>',"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),n?"--disabled":"",n?'data-hint="'.concat(ft(i,t,Pt).call(i),'"'):"",o.Loc.getMessage("INTRANET_USER_PROFILE_SIGNDOCUMENT_HCMLINK_SALARY_VACATION"),ft(t,t,It).call(t));if(!n){o.Dom.addClass(e,"--clickable");o.Event.bind(e,"click",(function(){var e;(e=_t(i,t,Ht))===null||e===void 0?void 0:e.show(ft(i,t,It).call(i))}))}return e}))}},{key:"closeWidget",value:function t(){var e;(e=je.getInstance())===null||e===void 0?void 0:e.hide()}}]);return t}();function It(){return _t(this,Lt,wt).remember("hcmLinkSalaryVacationMenuButton",(function(){return o.Tag.render(vt||(vt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__btn--hcmlink ui-icon-set --chevron-right"></div>\n\t\t\t'])))}))}function Pt(){return o.Loc.getMessage("INTRANET_USER_PROFILE_SIGNDOCUMENT_HCMLINK_SALARY_VACATION_DISABLED",{"[LINK]":"\n\t\t\t\t<a target='_self'\n\t\t\t\t\tonclick='(() => {\n\t\t\t\t\t\tBX.Intranet.UserProfile.Widget.getInstance()?.hide();\n\t\t\t\t\t\tBX.Helper.show(`redirect=detail&code=23343028`);\n\t\t\t\t\t})()'\n\t\t\t\t\tstyle='cursor:pointer;'\n\t\t\t\t>\n\t\t\t","[/LINK]":"</a>"})}var St={writable:true,value:true};var Rt={writable:true,value:false};var wt={writable:true,value:new s.MemoryCache};var Ht={writable:true,value:void 0};var Nt,Ot;function kt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */kt=function e(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,n=Object.defineProperty||function(t,e,i){t[e]=i.value},a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function o(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function t(e,i,n){return e[i]=n}}function c(t,e,i,a){var r=e&&e.prototype instanceof m?e:m,s=Object.create(r.prototype),l=new P(a||[]);return n(s,"_invoke",{value:T(t,i,l)}),s}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function m(){}function h(){}function v(){}var p={};o(p,r,(function(){return this}));var f=Object.getPrototypeOf,_=f&&f(f(S([])));_&&_!==e&&i.call(_,r)&&(p=_);var g=v.prototype=m.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function a(n,r,s,l){var o=u(t[n],t,r);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(o.arg)}var r;n(this,"_invoke",{value:function t(i,n){function s(){return new e((function(t,e){a(i,n,t,e)}))}return r=r?r.then(s,s):s()}})}function T(t,e,i){var n="suspendedStart";return function(a,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw r;return R()}for(i.method=a,i.arg=r;;){var s=i.delegate;if(s){var l=E(s,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var o=u(t,e,i);if("normal"===o.type){if(n=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(n="completed",i.method="throw",i.arg=o.arg)}}}function E(t,e){var i=e.method,n=t.iterator[i];if(undefined===n)return e.delegate=null,"throw"===i&&t.iterator["return"]&&(e.method="return",e.arg=undefined,E(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var a=u(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,d;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:undefined,done:!0}}return h.prototype=v,n(g,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=o(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,o(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(y.prototype),o(y.prototype,s,(function(){return this})),t.AsyncIterator=y,t.async=function(e,i,n,a,r){void 0===r&&(r=Promise);var s=new y(c(e,i,n,a),r);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(g),o(g,l,"Generator"),o(g,r,(function(){return this})),o(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,P.prototype={constructor:P,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function a(t,i){return l.type="throw",l.arg=e,n.next=t,i&&(n.method="next",n.arg=undefined),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],l=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(o&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function t(e,n){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=n,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(l)},complete:function t(e,i){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&i&&(this.next=i),d},finish:function t(e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),d}},catch:function t(e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function t(e,i,n){return this.delegate={iterator:S(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function At(t,e,i){xt(t,e);return i}function Ft(t,e,i){xt(t,e);Mt(i,"get");return Ut(t,i)}function Ut(t,e){if(e.get){return e.get.call(t)}return e.value}function Gt(t,e,i,n){xt(t,e);Mt(i,"set");Ct(t,i,n);return n}function Mt(t,e){if(t===undefined){throw new TypeError("attempted to "+e+" private static field before its declaration")}}function xt(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}function Ct(t,e,i){if(e.set){e.set.call(t,i)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=i}}var Dt={category:"documents",c_section:"ava_menu",type:"from_employee"};var Bt=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"getPromise",value:function(){var e=babelHelpers.asyncToGenerator(kt().mark((function e(i){var n,a;return kt().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return o.Runtime.loadExtension("sign.v2.b2e.sign-settings-employee");case 2:n=r.sent;a=n.B2EEmployeeSignSettings;Gt(t,t,Xt,new a(Ft(t,t,Yt).id,Dt));r.prev=5;r.next=8;return Lt.load();case 8:r.next=12;break;case 10:r.prev=10;r.t0=r["catch"](5);case 12:return r.abrupt("return",At(t,t,Wt).call(t,i));case 13:case"end":return r.stop()}}),e,null,[[5,10]])})));function i(t){return e.apply(this,arguments)}return i}()}]);return t}();function Wt(t){var e=t?" --lock":"";return Ft(this,Bt,jt).remember("layout",(function(){var i=o.Tag.render(Ot||(Ot=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div>\n\t\t\t\t\t<div class="system-auth-form__scope system-auth-form__sign">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --flex" style="flex-direction:row;">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --sign">\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title">\n\t\t\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t\t\t<span class="system-auth-form__item-title --link-light --margin-s">\n\t\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__btn--sign ui-popupcomponentmaker__btn --medium --border','" onclick="','">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),o.Loc.getMessage("INTRANET_USER_PROFILE_SIGNDOCUMENT_TITLE"),o.Loc.getMessage("INTRANET_USER_PROFILE_SIGNDOCUMENT_TITLE_HINT"),e,(function(){return At(Bt,Bt,zt).call(Bt,t)}),o.Loc.getMessage("INTRANET_USER_PROFILE_SIGNDOCUMENT_CREATE_DOCUMENT"),Lt.getLayout());if(BX.UI.Hint){BX.UI.Hint.init(i)}return i}))}function zt(t){u.EventEmitter.emit(Bt,Bt.events.onDocumentCreateBtnClick);if(t){top.BX.UI.InfoHelper.show("limit_office_e_signature");return}var e=Ft(Bt,Bt,Yt);BX.SidePanel.Instance.open("sign-b2e-settings-init-by-employee",{width:750,cacheable:false,contentCallback:function t(){e.innerHTML="";return e},events:{onLoad:function t(){Ft(Bt,Bt,Xt).clearCache();Ft(Bt,Bt,Xt).render()}}})}babelHelpers.defineProperty(Bt,"events",{onDocumentCreateBtnClick:"onDocumentCreateBtnClick"});var Xt={writable:true,value:void 0};var Yt={writable:true,value:o.Tag.render(Nt||(Nt=babelHelpers.taggedTemplateLiteral(['<div id="sign-b2e-employee-settings-container"></div>'])))};var jt={writable:true,value:new s.MemoryCache};var qt,Vt,Kt,Qt,Jt,Zt;var $t=function(){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var i=arguments.length>1?arguments[1]:undefined;babelHelpers.classCallCheck(this,t);this.isSingle=e;this.config=i}babelHelpers.createClass(t,[{key:"getContainer",value:function t(){var e=this;var i=this.config.IS_ACTIVE==="Y";var n=function t(){u.EventEmitter.emit(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+":onOpen");if(String(e.config.URL).length>0){o.Uri.addParam(e.config.URL,{page:"otpConnected"});BX.SidePanel.Instance.open(o.Uri.addParam(e.config.URL,{page:"otpConnected"}),{width:1100})}else{console.error("Otp page is not defined. Check the component params")}};var a=i?o.Tag.render(qt||(qt=babelHelpers.taggedTemplateLiteral(['<div class="ui-qr-popupcomponentmaker__btn" style="margin-top: auto" onclick="','">',"</div>"])),n,o.Loc.getMessage("INTRANET_USER_PROFILE_TURNED_ON")):o.Tag.render(Vt||(Vt=babelHelpers.taggedTemplateLiteral(['<div class="ui-qr-popupcomponentmaker__btn" style="margin-top: auto" onclick="','">',"</div>"])),n,o.Loc.getMessage("INTRANET_USER_PROFILE_TURN_ON"));var r=function t(){top.BX.Helper.show("redirect=detail&code=17728602");u.EventEmitter.emit(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+":onOpen")};if(this.isSingle!==true){return o.Tag.render(Kt||(Kt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-bottom-10 ','">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --authentication"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --flex --column --flex-start">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --without-margin --block">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t<span class="system-auth-form__icon-help --inline" onclick="','"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t','\n\t\t\t\t\t\t<div class="system-auth-form__item-content --margin-top-auto --center --center-force">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),i?" --active":"",o.Loc.getMessage("INTRANET_USER_PROFILE_OTP_MESSAGE"),r,i?o.Tag.render(Qt||(Qt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted" onclick="','">',"</div>\n\t\t\t\t\t\t\t"])),n,o.Loc.getMessage("INTRANET_USER_PROFILE_CONFIGURE")):"",a,i?"":'\n\t\t\t\t\t\t<div class="system-auth-form__item-new">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-new--title">'.concat(o.Loc.getMessage("INTRANET_USER_PROFILE_OTP_TITLE"),"</div>\n\t\t\t\t\t\t</div>"))}var s=null;var l=function t(e){e.stopPropagation();var i=[{text:o.Loc.getMessage("INTRANET_USER_PROFILE_CONFIGURE"),onclick:function t(){s.close();n()}}];s=s||new c.Menu("menu-otp-".concat(o.Text.getRandom()),e.target,i,{className:"system-auth-form__popup",angle:true,offsetLeft:10,autoHide:true,events:{onShow:function t(e){u.EventEmitter.emit(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+":showOtpMenu",new u.BaseEvent({data:{popup:e.target}}))}}});s.toggle()};return o.Tag.render(Jt||(Jt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-sm-all ',' --vertical --center">\n\t\t\t\t\t<div class="system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --authentication"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --flex">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light --center --s">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t <span class="system-auth-form__icon-help" onclick="','"></span> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t','\n\t\t\t\t\t<div class="system-auth-form__item-container --flex --column --space-around">\n\t\t\t\t\t\t<div class="system-auth-form__item-content --flex --display-flex">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t"])),i?" --active":"",o.Loc.getMessage("INTRANET_USER_PROFILE_OTP_MESSAGE"),r,i?o.Tag.render(Zt||(Zt=babelHelpers.taggedTemplateLiteral(['<div class="system-auth-form__config --absolute" onclick="','"></div>'])),l):"",a,i?"":'\n\t\t\t\t\t\t<div class="system-auth-form__item-new system-auth-form__item-new-icon --ssl">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-new--title">'.concat(o.Loc.getMessage("INTRANET_USER_PROFILE_OTP_TITLE"),"</div>\n\t\t\t\t\t\t</div>"))}}]);return t}();var te,ee,ie,ne,ae,re,se,le,oe,ce,ue,de,me,he,ve,pe;function fe(t,e){ge(t,e);e.add(t)}function _e(t,e,i){ge(t,e);e.set(t,i)}function ge(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function be(t,e,i){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return i}var ye=Symbol("user.widget");var Te=new WeakMap;var Ee=new WeakMap;var Le=new WeakMap;var Ie=new WeakMap;var Pe=new WeakMap;var Se=new WeakMap;var Re=new WeakMap;var we=new WeakSet;var He=new WeakSet;var Ne=new WeakSet;var Oe=new WeakSet;var ke=new WeakSet;var Ae=new WeakSet;var Fe=new WeakSet;var Ue=new WeakSet;var Ge=new WeakSet;var Me=new WeakSet;var xe=new WeakSet;var Ce=new WeakSet;var De=new WeakSet;var Be=new WeakSet;var We=new WeakSet;var ze=new WeakSet;var Xe=new WeakSet;var Ye=new WeakSet;var je=function(t){babelHelpers.inherits(e,t);function e(t,i){var n;var a=i.profile,r=a.ID,s=a.FULL_NAME,l=a.PHOTO,c=a.MASK,u=a.STATUS,d=a.STATUS_CODE,h=a.URL,v=a.WORK_POSITION,p=i.component,f=p.componentName,_=p.signedParameters,g=i.features,b=i.desktopDownloadLinks,y=i.networkProfileUrl;babelHelpers.classCallCheck(this,e);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this));fe(babelHelpers.assertThisInitialized(n),Ye);fe(babelHelpers.assertThisInitialized(n),Xe);fe(babelHelpers.assertThisInitialized(n),ze);fe(babelHelpers.assertThisInitialized(n),We);fe(babelHelpers.assertThisInitialized(n),Be);fe(babelHelpers.assertThisInitialized(n),De);fe(babelHelpers.assertThisInitialized(n),Ce);fe(babelHelpers.assertThisInitialized(n),xe);fe(babelHelpers.assertThisInitialized(n),Me);fe(babelHelpers.assertThisInitialized(n),Ge);fe(babelHelpers.assertThisInitialized(n),Ue);fe(babelHelpers.assertThisInitialized(n),Fe);fe(babelHelpers.assertThisInitialized(n),Ae);fe(babelHelpers.assertThisInitialized(n),ke);fe(babelHelpers.assertThisInitialized(n),Oe);fe(babelHelpers.assertThisInitialized(n),Ne);fe(babelHelpers.assertThisInitialized(n),He);fe(babelHelpers.assertThisInitialized(n),we);_e(babelHelpers.assertThisInitialized(n),Te,{writable:true,value:void 0});_e(babelHelpers.assertThisInitialized(n),Ee,{writable:true,value:void 0});_e(babelHelpers.assertThisInitialized(n),Le,{writable:true,value:null});_e(babelHelpers.assertThisInitialized(n),Ie,{writable:true,value:{}});_e(babelHelpers.assertThisInitialized(n),Pe,{writable:true,value:new o.Cache.MemoryCache});_e(babelHelpers.assertThisInitialized(n),Se,{writable:true,value:void 0});_e(babelHelpers.assertThisInitialized(n),Re,{writable:true,value:void 0});n.setEventNamespace(m.eventNameSpace);be(babelHelpers.assertThisInitialized(n),Ne,Ke).call(babelHelpers.assertThisInitialized(n));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(n),Te,t);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(n),Le,{ID:r,FULL_NAME:s,PHOTO:l,MASK:c,STATUS:u,STATUS_CODE:d,URL:h,WORK_POSITION:v});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(n),Ie,g);if(!o.Type.isStringFilled(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(n),Ie).browser)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(n),Ie).browser=o.Browser.isLinux()?"Linux":o.Browser.isWin()?"Windows":"MacOs"}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(n),Se,b);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(n),Re,y);babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(n),Pe).set("componentParams",{componentName:f,signedParameters:_});n.hide=n.hide.bind(babelHelpers.assertThisInitialized(n));return n}babelHelpers.createClass(e,[{key:"toggle",value:function t(){if(this.getPopup().isShown()){this.hide()}else{this.show()}}},{key:"hide",value:function t(){this.getPopup().close()}},{key:"show",value:function t(){this.getPopup().show()}},{key:"getPopup",value:function t(){var e,n;if(babelHelpers.classPrivateFieldGet(this,Ee)){return babelHelpers.classPrivateFieldGet(this,Ee)}this.emit("init");var a=o.Type.isNull(be(this,Me,ei).call(this))?null:{html:be(this,Me,ei).call(this)};var r=[be(this,we,qe).call(this),be(this,ke,Je).call(this)?{html:be(this,ke,Je).call(this),backgroundColor:"#fafafa"}:null,a,[{html:be(this,Ae,Ze).call(this),marginBottom:24,overflow:true,minHeight:"63px"},{html:be(this,Fe,$e).call(this),backgroundColor:"#fafafa"}],be(this,Ue,ti).call(this,!!be(this,xe,ii).call(this))?[{html:be(this,Ue,ti).call(this,!!be(this,xe,ii).call(this)),overflow:true,marginBottom:24,flex:be(this,xe,ii).call(this)?.5:1,minHeight:be(this,xe,ii).call(this)?"115px":"56px"},be(this,xe,ii).call(this)]:null,be(this,Be,ri).call(this,be(this,De,ai).call(this)===null)&&be(this,De,ai).call(this)?[{flex:.5,html:be(this,Ce,ni).call(this,.7),minHeight:"190px"},[{html:be(this,De,ai).call(this),displayBlock:true},be(this,Be,ri).call(this,false)]]:be(this,De,ai).call(this)||be(this,Be,ri).call(this,true)?[{html:be(this,Ce,ni).call(this,2),flex:2},(e=be(this,De,ai).call(this))!==null&&e!==void 0?e:be(this,Be,ri).call(this,true)]:be(this,Ce,ni).call(this,0),be(this,We,si).call(this),{html:be(this,ze,li).call(this),backgroundColor:"#fafafa"},be(this,Oe,Qe).call(this)?{html:be(this,Oe,Qe).call(this),marginBottom:24,backgroundColor:"#fafafa"}:null,[{html:(n=be(this,Xe,oi).call(this))!==null&&n!==void 0?n:null,backgroundColor:"#fafafa"},{html:be(this,Ye,ci).call(this),backgroundColor:"#fafafa"}]];var s=function t(e){var i=[];if(o.Type.isArray(e)){for(var n=0;n<e.length;n++){if(o.Type.isArray(e[n])){var a=t(e[n]);if(a!==null){if(o.Type.isArray(a)&&a.length===1){i.push(a[0])}else{i.push(a)}}}else if(e[n]!==null){i.push(e[n])}}}return i.length<=0?null:i.length===1?i[0]:i};r=s(r);var l=function t(e,i,n){if(o.Type.isArray(e)){return{html:e.map(t)}}return{flex:e["flex"]||0,html:e["html"]||e,backgroundColor:e["backgroundColor"]||null,disabled:e["disabled"]||null,overflow:e["overflow"]||null,marginBottom:e["marginBottom"]||null,displayBlock:e["displayBlock"]||null,minHeight:e["minHeight"]||null,secondary:e["secondary"]||false}};babelHelpers.classPrivateFieldSet(this,Ee,new i.PopupComponentsMaker({target:babelHelpers.classPrivateFieldGet(this,Te),content:r.map(l),width:400,offsetTop:-14}));u.EventEmitter.subscribe("BX.Main.InterfaceButtons:onMenuShow",this.hide);u.EventEmitter.subscribe(m.eventNameSpace+"onNeedToHide",this.hide);return babelHelpers.classPrivateFieldGet(this,Ee)}}],[{key:"init",value:function t(e,i){var n=this;if(e[ye]){return}var a=function t(){if(!e["popupSymbol"]){e["popupSymbol"]=new n(e,i)}e["popupSymbol"].toggle();n.instance=e["popupSymbol"]};e[ye]=true;e.addEventListener("click",a)}},{key:"getInstance",value:function t(){return this.instance}}]);return e}(u.EventEmitter);function qe(){var t=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("profile",(function(){var i=function e(i){t.hide();return BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(t,Le).URL)};var n;var a;if(babelHelpers.classPrivateFieldGet(t,Le).STATUS_CODE==="collaber"){n=new e.AvatarRoundGuest({size:36,userpicPath:encodeURI(babelHelpers.classPrivateFieldGet(t,Le).PHOTO),baseColor:"#19cc45"});a=n.getContainer()}else{a=o.Tag.render(te||(te=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<span class="system-auth-form__profile-avatar--image"\n\t\t\t\t\t\t',">\n\t\t\t\t\t</span>\n\t\t\t\t"])),babelHelpers.classPrivateFieldGet(t,Le).PHOTO?"\n\t\t\t\t\t\t\tstyle=\"background-size: cover; background-image: url('".concat(encodeURI(babelHelpers.classPrivateFieldGet(t,Le).PHOTO),"')\""):"")}var r=o.Tag.render(ee||(ee=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__profile-name">',"</div>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(t,Le).FULL_NAME);u.EventEmitter.subscribe(u.EventEmitter.GLOBAL_TARGET,"BX.Intranet.UserProfile:Avatar:changed",(function(e){var i=babelHelpers.slicedToArray(e.data,1),a=i[0],r=a.url,s=a.userId;if(babelHelpers.classPrivateFieldGet(t,Le).ID>0&&s&&babelHelpers.classPrivateFieldGet(t,Le).ID.toString()===s.toString()){babelHelpers.classPrivateFieldGet(t,Le).PHOTO=r;n.setUserPic(r)}}));u.EventEmitter.subscribe(u.EventEmitter.GLOBAL_TARGET,"BX.Intranet.UserProfile:Name:changed",(function(e){var i=babelHelpers.slicedToArray(e.data,1),n=i[0].fullName;babelHelpers.classPrivateFieldGet(t,Le).FULL_NAME=n;r.innerHTML=n;babelHelpers.classPrivateFieldGet(t,Te).querySelector("#user-name").innerHTML=n}));var s=o.Type.isStringFilled(babelHelpers.classPrivateFieldGet(t,Le).WORK_POSITION)?o.Text.encode(babelHelpers.classPrivateFieldGet(t,Le).WORK_POSITION):"";if(babelHelpers.classPrivateFieldGet(t,Le).STATUS&&(babelHelpers.classPrivateFieldGet(t,Le).STATUS!=="collaber"||s==="")&&o.Loc.hasMessage("INTRANET_USER_PROFILE_"+babelHelpers.classPrivateFieldGet(t,Le).STATUS)){s=o.Loc.getMessage("INTRANET_USER_PROFILE_"+babelHelpers.classPrivateFieldGet(t,Le).STATUS)}return o.Tag.render(ie||(ie=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --clickable" onclick="','">\n\t\t\t\t\t<div class="system-auth-form__profile">\n\t\t\t\t\t\t<div class="system-auth-form__profile-avatar">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__profile-content --margin--right">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t<div class="system-auth-form__profile-position">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__profile-controls">\n\t\t\t\t\t\t\t<span class="ui-qr-popupcomponentmaker__btn --large --border" >\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t \t\t\x3c!-- <span class="ui-qr-popupcomponentmaker__btn --large --success">any text</span> --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'])),i,a,r,s,o.Loc.getMessage("INTRANET_USER_PROFILE_PROFILE"))}))}function Ve(){var t=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("popup-container",(function(){return t.getPopup().getPopup().getPopupContainer()}))}function Ke(){var t=this;var e=function e(i){console.log(i);if(i.data.popup){setTimeout((function(){o.Event.bind(be(t,He,Ve).call(t),"click",(function(){i.data.popup.close()}))}),100)}};this.subscribe("init",(function(){u.EventEmitter.subscribe(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+":onOpen",t.hide);t.subscribe("bindings:open",e);u.EventEmitter.subscribe(u.EventEmitter.GLOBAL_TARGET,m.eventNameSpace+":showOtpMenu",e)}))}function Qe(){var t=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("b24netPanel",(function(){if(babelHelpers.classPrivateFieldGet(t,Ie)["b24netPanel"]!=="Y"){return null}return o.Tag.render(ne||(ne=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="system-auth-form__item system-auth-form__scope --center --padding-sm --clickable" href="','">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --network"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --block">\n\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(t,Re),o.Loc.getMessage("AUTH_PROFILE_B24NET_MSGVER_1"),o.Loc.getMessage("INTRANET_USER_PROFILE_GOTO"))}))}function Je(){var t=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("adminPanel",(function(){if(babelHelpers.classPrivateFieldGet(t,Ie)["adminPanel"]!=="Y"){return null}return o.Tag.render(ae||(ae=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="system-auth-form__item system-auth-form__scope --center --padding-sm --clickable" href="/bitrix/admin/">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --admin-panel"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --block">\n\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t"])),o.Loc.getMessage("INTRANET_USER_PROFILE_ADMIN_PANEL"),o.Loc.getMessage("INTRANET_USER_PROFILE_GOTO"))}))}function Ze(){return babelHelpers.classPrivateFieldGet(this,Pe).remember("themePicker",(function(){return T.getPromise()}))}function $e(){return babelHelpers.classPrivateFieldGet(this,Pe).remember("Mask",(function(){return o.Tag.render(re||(re=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --mask"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t\t<div class="system-auth-form__item-title">\n\t\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t\t<span style="cursor: default" class="system-auth-form__icon-help"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-content --center --center-force">\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --disabled">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-new --soon">\n\t\t\t\t\t\t<div class="system-auth-form__item-new--title">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),o.Loc.getMessage("INTRANET_USER_PROFILE_MASKS"),o.Loc.getMessage("INTRANET_USER_PROFILE_INSTALL"),o.Loc.getMessage("INTRANET_USER_PROFILE_SOON"))}))}function ti(t){var e=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("getCompanyPulse",(function(){if(babelHelpers.classPrivateFieldGet(e,Ie).pulse==="Y"&&babelHelpers.classPrivateFieldGet(e,Le).ID>0&&babelHelpers.classPrivateFieldGet(e,Le).ID===o.Loc.getMessage("USER_ID")){return new Promise((function(i){o.ajax.runComponentAction("bitrix:intranet.user.profile.button","getUserStatComponent",{mode:"class"}).then((function(n){BX.Runtime.html(null,n.data.html).then((function(){var n;i(A.getPromise({userId:babelHelpers.classPrivateFieldGet(e,Le).ID,isNarrow:t,data:(n=babelHelpers.classPrivateFieldGet(e,Ie)["pulseData"])!==null&&n!==void 0?n:null}))}))}))}))}return null}))}function ei(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ie)["signDocument"]["available"]!=="Y"){return null}var e=babelHelpers.classPrivateFieldGet(this,Ie)["signDocument"]["locked"]==="Y";return babelHelpers.classPrivateFieldGet(this,Pe).remember("getSignDocument",(function(){u.EventEmitter.subscribe(Bt,Bt.events.onDocumentCreateBtnClick,(function(){return t.hide()}));return Bt.getPromise(e)}))}function ii(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ie)["stressLevel"]!=="Y"){return null}return babelHelpers.classPrivateFieldGet(this,Pe).remember("getStressLevel",(function(){var e;return p.getPromise({signedParameters:babelHelpers.classPrivateFieldGet(t,Pe).get("componentParams").signedParameters,componentName:babelHelpers.classPrivateFieldGet(t,Pe).get("componentParams").componentName,userId:babelHelpers.classPrivateFieldGet(t,Le).ID,data:(e=babelHelpers.classPrivateFieldGet(t,Ie)["stressLevelData"])!==null&&e!==void 0?e:null})}))}function ni(t){var e=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("getQrContainer",(function(){return new Promise((function(i,n){BX.loadExt(["ui.qrauthorization","qrcode"]).then((function(){var n=function t(){e.hide();new l.QrAuthorization({title:o.Loc.getMessage("INTRANET_USER_PROFILE_QRCODE_TITLE2"),content:o.Loc.getMessage("INTRANET_USER_PROFILE_QRCODE_BODY2"),intent:"profile"}).show()};var a=function t(i){top.BX.Helper.show("redirect=detail&code=14999860");e.hide();i.preventDefault();i.stopPropagation();return false};var r;if(t!==2&&t!==0){r=o.Tag.render(se||(se=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="system-auth-form__item system-auth-form__scope" style="padding: 10px 14px">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --center --column --center">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --center --margin-xl">','</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__qr" style="margin-bottom: 12px">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --border" style="margin-top: auto" onclick="','">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__icon-help --absolute" onclick="','" title="','"></div>\n\t\t\t\t\t</div>\n\t\t\t\t'])),o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL"),n,o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_SHOW_QR_SMALL"),a,o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK"))}else if(t===0){r=o.Tag.render(le||(le=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-qr-xl">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --column --flex --flex-start">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --l">','</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted" onclick="','">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --large --border" style="margin-top: auto" onclick="','">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-container --qr">\n\t\t\t\t\t\t\t<div class="system-auth-form__qr --full-size"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'])),o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_TITLE2"),a,o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK"),n,o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_SHOW_QR"))}else{r=o.Tag.render(oe||(oe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-mid-qr">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --column --flex --flex-start">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --block">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t<span class="system-auth-form__icon-help --inline" onclick="','" title="','"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --border" style="margin-top: auto" onclick="','">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-container --qr">\n\t\t\t\t\t\t\t<div class="system-auth-form__qr --size-2"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'])),o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL"),a,o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK"),n,o.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_SHOW_QR"))}return i(r)}))["catch"](n)}))}))}function ai(){var t=this;return babelHelpers.classPrivateFieldGet(this,Pe).remember("getDeskTopContainer",(function(){var e=babelHelpers.classPrivateFieldGet(t,Ie)["appInstalled"]["APP_MAC_INSTALLED"]==="Y";var i="--apple";var n=o.Loc.getMessage("INTRANET_USER_PROFILE_DESKTOP_APPLE");var a=babelHelpers.classPrivateFieldGet(t,Se).macos;var r={DEB:{text:o.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD_LINUX_DEB"),href:babelHelpers.classPrivateFieldGet(t,Se).linuxDeb},RPM:{text:o.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD_LINUX_RPM"),href:babelHelpers.classPrivateFieldGet(t,Se).linuxRpm}};if(babelHelpers.classPrivateFieldGet(t,Ie).browser==="Windows"){e=babelHelpers.classPrivateFieldGet(t,Ie)["appInstalled"]["APP_WINDOWS_INSTALLED"]==="Y";i="--windows";n=o.Loc.getMessage("INTRANET_USER_PROFILE_DESKTOP_WINDOWS");a=babelHelpers.classPrivateFieldGet(t,Se).windows}var s=e?function(t){t.preventDefault();t.stopPropagation();return false}:function(){t.hide();return true};var l=null;var u=function e(i){i.preventDefault();l=l||new c.Menu({className:"system-auth-form__popup",bindElement:i.target,items:[{text:r.DEB.text,href:r.DEB.href,onclick:function t(){l.close()}},{text:r.RPM.text,href:r.RPM.href,onclick:function t(){l.close()}}],angle:true,offsetLeft:10,events:{onShow:function e(){t.getPopup().getPopup().setAutoHide(false)},onClose:function e(){t.getPopup().getPopup().setAutoHide(true)}}});l.toggle()};if(babelHelpers.classPrivateFieldGet(t,Ie).browser==="Linux"){e=babelHelpers.classPrivateFieldGet(t,Ie)["appInstalled"]["APP_LINUX_INSTALLED"]==="Y";i="--linux";n=o.Loc.getMessage("INTRANET_USER_PROFILE_DESKTOP_LINUX");a="";s=e?function(t){t.preventDefault();t.stopPropagation();return false}:u}if(babelHelpers.classPrivateFieldGet(t,Ie)["otp"].IS_ENABLED!=="Y"){var d=null;var m=[{text:o.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD"),href:a,onclick:function e(){d.close();t.hide()}}];if(babelHelpers.classPrivateFieldGet(t,Ie).browser==="Linux"){m=[{text:r.DEB.text,href:r.DEB.href,onclick:function t(){d.close()}},{text:r.RPM.text,href:r.RPM.href,onclick:function t(){d.close()}}]}var h=function e(i){d=d||new c.Menu({className:"system-auth-form__popup",bindElement:i.target,items:m,angle:true,offsetLeft:10,events:{onShow:function e(){t.getPopup().getPopup().setAutoHide(false)},onClose:function e(){t.getPopup().getPopup().setAutoHide(true)}}});d.toggle()};return o.Tag.render(ce||(ce=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div data-role="desktop-item" class="system-auth-form__item system-auth-form__scope --padding-sm-all ',' --vertical --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-logo--image ','"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t','\n\t\t\t\t\t\t<div class="system-auth-form__item-container --flex --center --display-flex">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --light --center --s">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-content --flex --center --display-flex">\n\t\t\t\t\t\t\t<a class="ui-qr-popupcomponentmaker__btn" style="margin-top: auto" href="','" target="_blank" onclick="','">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),e?" --active":"",i,e?o.Tag.render(ue||(ue=babelHelpers.taggedTemplateLiteral(['<div class="system-auth-form__config --absolute" onclick="','"></div>'])),h):"",n,a,s,e?o.Loc.getMessage("INTRANET_USER_PROFILE_INSTALLED"):o.Loc.getMessage("INTRANET_USER_PROFILE_INSTALL"))}var v=function e(){var i=o.Tag.render(de||(de=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<a href="','" class="system-auth-form__item-title --link-dotted">',"</a>\n\t\t\t\t"])),a,o.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD"));if(babelHelpers.classPrivateFieldGet(t,Ie).browser==="Linux"){i.addEventListener("click",u)}return i};return o.Tag.render(me||(me=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-bottom-10 ','">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image ','"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t\t<div class="system-auth-form__item-title ','">',"</div>\n\t\t\t\t\t\t",'\n\t\t\t\t\t\t<div class="system-auth-form__item-content --center --center-force">\n\t\t\t\t\t\t\t<a class="ui-qr-popupcomponentmaker__btn" href="','" target="_blank" onclick="','">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),e?" --active":"",i,e?" --without-margin":"--min-height",n,e?v():"",a,s,e?o.Loc.getMessage("INTRANET_USER_PROFILE_INSTALLED"):o.Loc.getMessage("INTRANET_USER_PROFILE_INSTALL"))}))}function ri(t){var e=this;if(babelHelpers.classPrivateFieldGet(this,Ie).otp.IS_ENABLED!=="Y"){return null}return babelHelpers.classPrivateFieldGet(this,Pe).remember("getOTPContainer",(function(){return new $t(t,babelHelpers.classPrivateFieldGet(e,Ie).otp).getContainer()}))}function si(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ie).loginHistory.isHide){return null}return babelHelpers.classPrivateFieldGet(this,Pe).remember("getLoginHistoryContainer",(function(){var e=new it(babelHelpers.classPrivateFieldGet(t,Ie).loginHistory,t);return{html:e.getContainer(),backgroundColor:"#fafafa"}}))}function li(){var t=this;if(!(o.Type.isPlainObject(babelHelpers.classPrivateFieldGet(this,Ie)["bindings"])&&o.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,Ie)["bindings"]["text"])&&o.Type.isArray(babelHelpers.classPrivateFieldGet(this,Ie)["bindings"]["items"])&&babelHelpers.classPrivateFieldGet(this,Ie)["bindings"]["items"].length>0)){return null}return babelHelpers.classPrivateFieldGet(this,Pe).remember("getBindingsContainer",(function(){var e=o.Tag.render(he||(he=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item --hover system-auth-form__scope --center --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --binding"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-role="arrow" class="system-auth-form__item-icon --arrow-right"></div>\n\t\t\t\t</div>\n\t\t\t'])),o.Text.encode(babelHelpers.classPrivateFieldGet(t,Ie)["bindings"]["text"]));e.addEventListener("click",(function(){t.__bindingsMenu=t.__bindingsMenu||new c.Menu({className:"system-auth-form__popup",bindElement:e.querySelector('[data-role="arrow"]'),items:babelHelpers.classPrivateFieldGet(t,Ie)["bindings"]["items"],angle:true,cachable:false,offsetLeft:10,events:{onShow:function e(){t.emit("bindings:open")}}});t.__bindingsMenu.toggle()}));return e}))}function oi(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ie)["im"]!=="Y"){return null}return babelHelpers.classPrivateFieldGet(this,Pe).remember("getNotificationContainer",(function(){var e=o.Tag.render(ve||(ve=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item --hover system-auth-form__scope --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --notification"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),o.Loc.getMessage("AUTH_NOTIFICATION"));e.addEventListener("click",(function(){t.hide();BXIM.openSettings({onlyPanel:"notify"})}));return e}))}function ci(){return babelHelpers.classPrivateFieldGet(this,Pe).remember("getLogoutContainer",(function(){var t=function t(){if(d.DesktopApi.isDesktop()){d.DesktopApi.logout()}else{var e=new o.Uri(window.location.pathname);e.removeQueryParam(["logout","login","back_url_pub","user_lang"]);var i=new o.Uri("/auth/?logout=yes");i.setQueryParam("sessid",BX.bitrix_sessid());i.setQueryParam("backurl",encodeURIComponent(e.toString()));document.location.href=i}};return o.Tag.render(pe||(pe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --logout"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a onclick="','" class="system-auth-form__item-link-all"></a>\n\t\t\t\t</div>\n\t\t\t'])),o.Loc.getMessage("AUTH_LOGOUT"),t)}))}babelHelpers.defineProperty(je,"instance",null);t.Widget=je})(this.BX.Intranet.UserProfile=this.BX.Intranet.UserProfile||{},BX.UI,BX.UI,BX,BX,BX,BX.Cache,BX.UI,BX,BX.Main,BX.Event,BX.Messenger.v2.Lib);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:94:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/script.min.js?1745564124101045";s:6:"source";s:73:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/script.js";s:3:"min";s:77:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/script.min.js";s:3:"map";s:77:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/script.map.js";}"*/
this.BX=this.BX||{};(function(e,t,n,i,a,r,s,o,l,u){"use strict";var c=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"eventName",value:function e(t){return["BX.Intranet.LeftMenu:"].concat(babelHelpers.toConsumableArray(a.Type.isStringFilled(t)?[t]:t)).join(":")}}]);return e}();babelHelpers.defineProperty(c,"version","2021.10");babelHelpers.defineProperty(c,"eventNameSpace","BX.Intranet.LeftMenu:");babelHelpers.defineProperty(c,"isExtranet",false);babelHelpers.defineProperty(c,"isAdmin",false);babelHelpers.defineProperty(c,"isCustomPresetRestricted",false);babelHelpers.defineProperty(c,"settingsPath",null);babelHelpers.defineProperty(c,"isMainPageEnabled",false);babelHelpers.defineProperty(c,"availablePresetTools",null);function d(e,t,n){m(e,t);t.set(e,n)}function m(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var h=new WeakMap;var f=function(){function e(t,n){var i=this;var a=n.events;babelHelpers.classCallCheck(this,e);d(this,h,{writable:true,value:null});this.container=t;if(a){Array.from(Object.keys(a)).forEach((function(e){s.EventEmitter.subscribe(i,c.eventName(e),a[e])}))}}babelHelpers.createClass(e,[{key:"getContainer",value:function e(){return this.container}},{key:"createPopup",value:function e(){}},{key:"getPopup",value:function e(){return babelHelpers.classPrivateFieldGet(this,h)}},{key:"show",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,h)===null){babelHelpers.classPrivateFieldSet(this,h,this.createPopup.apply(this,arguments));s.EventEmitter.subscribe(babelHelpers.classPrivateFieldGet(this,h),"onClose",(function(){s.EventEmitter.emit(t,c.eventName("onClose"))}));s.EventEmitter.subscribe(babelHelpers.classPrivateFieldGet(this,h),"onShow",(function(){s.EventEmitter.emit(t,c.eventName("onShow"))}));s.EventEmitter.subscribe(babelHelpers.classPrivateFieldGet(this,h),"onDestroy",(function(){babelHelpers.classPrivateFieldSet(t,h,null)}))}babelHelpers.classPrivateFieldGet(this,h).show()}},{key:"hide",value:function e(){if(babelHelpers.classPrivateFieldGet(this,h)){babelHelpers.classPrivateFieldGet(this,h).close()}}}]);return e}();var p;var v=function(e){babelHelpers.inherits(n,e);function n(){var e;var t;babelHelpers.classCallCheck(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++){a[r]=arguments[r]}t=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(n)).call.apply(e,[this].concat(a)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(t),"isReady",true);return t}babelHelpers.createClass(n,[{key:"createPopup",value:function e(){var n=this;var i=a.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<form id="customPresetForm" style="min-width: 350px;">\n\t\t\t\t<div style="margin: 15px 0 15px 9px;">\n\t\t\t\t\t<input type="radio" name="userScope" id="customPresetCurrentUser" value="currentUser">\n\t\t\t\t\t<label for="customPresetCurrentUser">','</label>\n\t\t\t\t</div>\n\t\t\t\t<div style="margin: 0 0 38px 9px;">\n\t\t\t\t\t<input type="radio" name="userScope" id="customPresetNewUser" value="newUser" checked>\n\t\t\t\t\t<label for="customPresetNewUser">','</label>\n\t\t\t\t</div>\n\t\t\t\t<hr style="background-color: #edeef0; border: none; color:  #edeef0; height: 1px;">\n\t\t\t</form>'])),a.Loc.getMessage("MENU_CUSTOM_PRESET_CURRENT_USER"),a.Loc.getMessage("MENU_CUSTOM_PRESET_NEW_USER"));var o;return r.PopupManager.create(this.constructor.toString(),null,{overlay:true,contentColor:"white",contentNoPaddings:true,lightShadow:true,draggable:{restrict:true},closeByEsc:true,titleBar:a.Loc.getMessage("MENU_CUSTOM_PRESET_POPUP_TITLE"),offsetTop:1,offsetLeft:20,cacheable:false,closeIcon:true,content:i,buttons:[o=new t.SaveButton({onclick:function e(){if(n.isReady===false){return}o.setWaiting(true);n.isReady=false;s.EventEmitter.emit(n,c.eventName("onPresetIsSet"),i.elements["userScope"].value==="newUser").forEach((function(e){e.then((function(){o.setWaiting(false);n.hide();r.PopupManager.create("menu-custom-preset-success-popup",null,{closeIcon:true,contentColor:"white",titleBar:a.Loc.getMessage("MENU_CUSTOM_PRESET_POPUP_TITLE"),content:a.Loc.getMessage("MENU_CUSTOM_PRESET_SUCCESS")}).show()}))["catch"]((function(){console.log("Error!!")}))}));n.isReady=true}}),new t.CancelButton({onclick:function e(){n.hide()}})]})}}]);return n}(f);function g(e,t,n,i){k(e,t);E(n,"set");b(e,n,i);return i}function b(e,t,n){if(t.set){t.set.call(e,n)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=n}}function y(e,t,n){k(e,t);E(n,"get");return C(e,n)}function E(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function k(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function C(e,t){if(t.get){return t.get.call(e)}return t.value}var M=function(){function e(){babelHelpers.classCallCheck(this,e);this.container=BX("bx-panel");if(this.container){this.bindEvents()}}babelHelpers.createClass(e,[{key:"bindEvents",value:function e(){BX.addCustomEvent("onTopPanelCollapse",function(e){s.EventEmitter.emit(this,c.eventName("onPanelHasChanged"),this.top)}.bind(this));BX.addCustomEvent("onTopPanelFix",function(){s.EventEmitter.emit(this,c.eventName("onPanelHasChanged"),this.top)}.bind(this))}},{key:"height",get:function e(){return this.container?this.container.offsetHeight:0}},{key:"fixedHeight",get:function e(){var t=BX.getClass("BX.admin.panel.state");if(t&&t.fixed){return this.height}return 0}},{key:"top",get:function e(){if(this.container){var t=this.container.getBoundingClientRect();if(t.bottom>0){return Math.max(t.bottom,this.fixedHeight)}return Math.max(0,this.fixedHeight)}return 0}}],[{key:"getInstance",value:function t(){if(!y(this,e,I)){g(this,e,I,new e)}return y(this,e,I)}}]);return e}();var I={writable:true,value:null};function S(e,t,n,i){L(e,t);A(n,"set");T(e,n,i);return i}function T(e,t,n){if(t.set){t.set.call(e,n)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=n}}function w(e,t,n){L(e,t);A(n,"get");return P(e,n)}function A(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function L(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function P(e,t){if(t.get){return t.get.call(e)}return t.value}var H=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getCurPage",value:function t(){if(w(this,e,B)===null){S(this,e,B,document.location.pathname+document.location.search)}return w(this,e,B)===""?null:w(this,e,B)}},{key:"getCurUri",value:function t(){if(w(this,e,x)===null){S(this,e,x,new a.Uri(document.location.href))}return w(this,e,x)}},{key:"catchError",value:function e(t){BX.UI.Notification.Center.notify({content:[a.Loc.getMessage("MENU_ERROR_OCCURRED"),t.errors?": "+t.errors[0].message:""].join(" "),position:"bottom-left",category:"menu-self-item-popup",autoHideDelay:3e3})}},{key:"refineUrl",value:function e(t){t=String(t).trim();if(t!==""){if(!t.match(/^https?:\/\//i)&&!t.match(/^\//i)){t="http://"+t}else{var n=document.createElement("a");n.href=t;if(document.location.host===n.host){t=n.pathname+n.search+n.hash}}}return t}},{key:"adminPanel",get:function e(){return M.getInstance()}}]);return e}();var B={writable:true,value:null};var x={writable:true,value:null};function D(e,t,n){N(e,t);t.set(e,n)}function N(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var _=new WeakMap;var U=new WeakMap;var O=function(e){babelHelpers.inherits(n,e);function n(){var e;var t;babelHelpers.classCallCheck(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++){a[r]=arguments[r]}t=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(n)).call.apply(e,[this].concat(a)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(t),"isReady",true);D(babelHelpers.assertThisInitialized(t),_,{writable:true,value:void 0});D(babelHelpers.assertThisInitialized(t),U,{writable:true,value:void 0});return t}babelHelpers.createClass(n,[{key:"createPopup",value:function e(n){var i=this;var o;babelHelpers.classPrivateFieldSet(this,U,n);var l=document.querySelector("#left-menu-preset-popup").cloneNode(true);return r.PopupManager.create(this.constructor.name.toString(),null,{overlay:true,contentColor:"white",contentNoPaddings:true,lightShadow:true,draggable:{restrict:true},closeByEsc:true,offsetTop:1,offsetLeft:20,cacheable:false,closeIcon:true,content:l,events:{onFirstShow:function e(){babelHelpers.toConsumableArray(l.querySelectorAll(".js-left-menu-preset-item")).forEach((function(e){e.addEventListener("click",(function(){babelHelpers.toConsumableArray(l.querySelectorAll(".js-left-menu-preset-item")).forEach((function(t){t.classList[t===e?"add":"remove"]("left-menu-popup-selected")}))}))}))}},buttons:[o=new t.CreateButton({text:a.Loc.getMessage("MENU_CONFIRM_BUTTON"),onclick:function e(){if(o.isWaiting()){return}o.setWaiting(true);var t=i.getSelectedPreset();if(!c.isAdmin&&c.availablePresetTools&&c.availablePresetTools[t]===false){o.setWaiting(false);i.showUnavailableToolPopup();return}s.EventEmitter.emit(i,c.eventName("onPresetIsSet"),{presetId:t,mode:n}).forEach((function(e){e.then((function(e){o.setWaiting(false);i.hide();if(e.data.hasOwnProperty("url")){document.location.href=e.data.url}else{document.location.reload()}}))["catch"](H.catchError)}))}}),new t.CancelButton({text:a.Loc.getMessage("MENU_DELAY_BUTTON"),onclick:function e(){s.EventEmitter.emit(i,c.eventName("onPresetIsPostponed"),{mode:n});i.hide()}})]})}},{key:"getMode",value:function e(){return babelHelpers.classPrivateFieldGet(this,U)}},{key:"getSelectedPreset",value:function e(){var t="";if(document.forms["left-menu-preset-form"]){babelHelpers.toConsumableArray(document.forms["left-menu-preset-form"].elements["presetType"]).forEach((function(e){if(e.checked){t=e.value}}))}return t}},{key:"showUnavailableToolPopup",value:function e(){if(!(babelHelpers.classPrivateFieldGet(this,_)instanceof o.MessageBox)){babelHelpers.classPrivateFieldSet(this,_,o.MessageBox.create({message:a.Loc.getMessage("MENU_UNAVAILABLE_TOOL_POPUP_DESCRIPTION"),buttons:o.MessageBoxButtons.OK}))}babelHelpers.classPrivateFieldGet(this,_).show()}}]);return n}(f);var X=function(e){babelHelpers.inherits(t,e);function t(){var e;var n;babelHelpers.classCallCheck(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++){a[r]=arguments[r]}n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"menuId","leftMenuSettingsPopup");return n}babelHelpers.createClass(t,[{key:"createPopup",value:function e(){var t=new r.Menu({bindElement:this.container,items:this.getItems(),angle:true,offsetTop:0,offsetLeft:50});return t.getPopupWindow()}},{key:"getItems",value:function e(){var t=[];Array.from.apply(Array,babelHelpers.toConsumableArray(s.EventEmitter.emit(this,c.eventName("onGettingSettingMenuItems")))).forEach((function(e){var n=e.text,i=e.html,a=e.onclick,r=e.className;if(!n&&!i){return}t.push(Object.assign(i?{html:i}:{text:n},{className:["menu-popup-no-icon",r!==null&&r!==void 0?r:""].join(" "),onclick:function e(t,n){n.getMenuWindow().close();a(t,n)}}))}));return t}}]);return t}(f);var F=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"toggleMenu",value:function e(t){if(a.Loc.getMessage("USER_ID")<=0){return}return a.ajax.runAction("intranet.leftmenu.".concat(t?"collapseMenu":"expandMenu"),{data:{},analyticsLabel:{leftmenu:{action:t?"collapseMenu":"expandMenu"}}})}},{key:"saveSelfItemMenu",value:function e(t){var n=t.id>0?"update":"add";return a.ajax.runAction("intranet.leftmenu.".concat(n,"SelfItem"),{data:{itemData:t},analyticsLabel:{leftmenu:{action:"selfItemAddOrUpdate"}}})}},{key:"deleteSelfITem",value:function e(t){return a.ajax.runAction("intranet.leftmenu.deleteSelfItem",{data:{menuItemId:t},analyticsLabel:{leftmenu:{action:"selfItemDelete"}}})}},{key:"addFavoritesItemMenu",value:function e(t){return a.ajax.runAction("intranet.leftmenu.addStandartItem",{data:{itemData:t},analyticsLabel:{leftmenu:{action:"standardItemAdd"}}})}},{key:"deleteFavoritesItemMenu",value:function e(t){return a.ajax.runAction("intranet.leftmenu.deleteStandartItem",{data:{itemData:t},analyticsLabel:{leftmenu:{action:"standardItemDelete"}}})}},{key:"updateFavoritesItemMenu",value:function e(t){return a.ajax.runAction("intranet.leftmenu.updateStandartItem",{data:{itemText:t.text,itemId:t.id},analyticsLabel:{leftmenu:{action:"standardItemUpdate"}}})}},{key:"addAdminSharedItemMenu",value:function e(t){return a.ajax.runAction("intranet.leftmenu.addItemToAll",{data:{itemInfo:t},analyticsLabel:{leftmenu:{action:"adminItemAdd"}}})}},{key:"deleteAdminSharedItemMenu",value:function e(t){return a.ajax.runAction("intranet.leftmenu.deleteItemFromAll",{data:{menu_item_id:t},analyticsLabel:{leftmenu:{action:"adminItemDelete"}}})}},{key:"saveItemsSort",value:function e(t,n,i){return a.ajax.runAction("intranet.leftmenu.saveItemsSort",{data:{items:t,firstItemLink:n,version:c.version},analyticsLabel:{leftmenu:i}})}},{key:"setFirstPage",value:function e(t){return a.ajax.runAction("intranet.leftmenu.setFirstPage",{data:{firstPageUrl:t},analyticsLabel:{leftmenu:{action:"mainPageIsSet"}}})}},{key:"setDefaultPreset",value:function e(){return a.ajax.runAction("intranet.leftmenu.setDefaultMenu",{data:{},analyticsLabel:{leftmenu:{action:"defaultMenuIsSet"}}})}},{key:"setCustomPreset",value:function e(t,n,i,r){return a.ajax.runAction("intranet.leftmenu.saveCustomPreset",{data:{userApply:t===true?"newUser":"currentUser",itemsSort:n,customItems:i,firstItemLink:r,version:c.version},analyticsLabel:{leftmenu:{action:"customPresetIsSet"}}})}},{key:"deleteCustomItem",value:function e(t){return a.ajax.runAction("intranet.leftmenu.deleteCustomItemFromAll",{data:{menu_item_id:t},analyticsLabel:{leftmenu:{action:"customItemDelete"}}})}},{key:"setSystemPreset",value:function e(t,n){return a.ajax.runAction("intranet.leftmenu.setPreset",{data:{preset:n,mode:t==="global"?"global":"personal"},analyticsLabel:{leftmenu:{action:"systemPresetIsSet",presetId:n,mode:t,analyticsFirst:t==="global"?"y":"n"}}})}},{key:"postponeSystemPreset",value:function e(t){return a.ajax.runAction("intranet.leftmenu.delaySetPreset",{data:{},analyticsLabel:{leftmenu:{action:"systemPresetIsPostponed",mode:t,analyticsFirst:t==="global"?"y":"n"}}})}},{key:"clearCache",value:function e(){return a.ajax.runAction("intranet.leftmenu.clearCache",{data:{},analyticsLabel:{leftmenu:{action:"clearCache"}}})}},{key:"expandGroup",value:function e(t){if(a.Loc.getMessage("USER_ID")<=0){return}return a.ajax.runAction("intranet.leftmenu.expandMenuGroup",{data:{id:t},analyticsLabel:{leftmenu:{action:"expandMenuGroup"}}})}},{key:"collapseGroup",value:function e(t){if(a.Loc.getMessage("USER_ID")<=0){return}return a.ajax.runAction("intranet.leftmenu.collapseMenuGroup",{data:{id:t},analyticsLabel:{leftmenu:{action:"collapseMenuGroup"}}})}}]);return e}();var R,q,G,W;var j=function(){function e(t,n){var i=this;babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"links",[]);babelHelpers.defineProperty(this,"isDraggable",true);babelHelpers.defineProperty(this,"storage",[]);this.parentContainer=t;this.container=n;this.init();this.onDeleteAsFavorites=this.onDeleteAsFavorites.bind(this);setTimeout((function(){s.EventEmitter.subscribe(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"),i.onDeleteAsFavorites);s.EventEmitter.incrementMaxListeners(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"));s.EventEmitter.subscribe(i,c.eventName("onItemDelete"),i.destroy.bind(i))}),0);this.showError=this.showError.bind(this);this.showMessage=this.showMessage.bind(this)}babelHelpers.createClass(e,[{key:"getId",value:function e(){return this.container.dataset.id}},{key:"getCode",value:function e(){return this.constructor.code}},{key:"getName",value:function e(){return this.container.querySelector("[data-role='item-text']").textContent}},{key:"canDelete",value:function e(){return false}},{key:"delete",value:function e(){}},{key:"init",value:function e(){var t=this;this.links=[];if(this.container.hasAttribute("data-link")&&a.Type.isStringFilled(this.container.getAttribute("data-link"))){this.links.push(this.container.getAttribute("data-link"))}if(this.container.hasAttribute("data-all-links")){this.container.getAttribute("data-all-links").split(",").forEach((function(e){e=String(e).trim();if(a.Type.isStringFilled(e)){t.links.push(e)}}))}this.makeTextIcons();this.storage=this.container.dataset.storage.split(",")}},{key:"update",value:function e(t){var n=t.link,i=t.openInNewPage,r=t.text;i=i==="Y"?"Y":"N";if(this.container.hasAttribute("data-link")){this.container.setAttribute("data-link",a.Text.encode(n));this.container.setAttribute("data-new-page",i)}var s=this.container.querySelector("a");if(s){if(a.Type.isString(n)){s.setAttribute("href",a.Text.encode(n))}s.setAttribute("target",i==="Y"?"_blank":"_self")}this.container.querySelector("[data-role='item-text']").innerHTML=a.Text.encode(r);this.init()}},{key:"destroy",value:function e(){s.EventEmitter.unsubscribe(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"),this.onDeleteAsFavorites);s.EventEmitter.decrementMaxListeners(s.EventEmitter.GLOBAL_TARGET,"onItemDeleteAsFavorites")}},{key:"getSimilarToUrl",value:function e(t){var n=[];this.links.forEach((function(e,i){if(V(e,t)){n.push({priority:i>0?0:1,url:e})}}));return n}},{key:"makeTextIcons",value:function e(){if(!this.container.classList.contains("menu-item-no-icon-state")){return}var t=this.container.querySelector(".menu-item-icon");var n=this.container.querySelector(".menu-item-link-text");if(t&&n){t.textContent=z(n.textContent)}}},{key:"getCounterValue",value:function e(){var t=this.container.querySelector('[data-role="counter"]');if(!t){return null}return parseInt(t.dataset.counterValue)}},{key:"updateCounter",value:function e(t){var n=this.container.querySelector('[data-role="counter"]');if(!n){return}var i=parseInt(n.dataset.counterValue)||0;n.dataset.counterValue=t;if(t>0){n.innerHTML=t>99?"99+":t;this.container.classList.add("menu-item-with-index")}else{n.innerHTML="";this.container.classList.remove("menu-item-with-index");if(t<0){var a=BX("menu-counter-warning-"+this.getId());if(a){a.style.display="inline-block"}}}return{oldValue:i,newValue:t}}},{key:"markAsActive",value:function e(){console.error("This action is only for the group")}},{key:"showWarning",value:function e(t,n){this.removeWarning();var i=this.container.querySelector("a.menu-item-link");if(!i){return}t=t?a.Text.encode(t):"";var r=a.Tag.render(R||(R=babelHelpers.taggedTemplateLiteral(['<a class="menu-post-warn-icon" title="','"></a>'])),t);if(n){Object.keys(n).forEach((function(e){a.Event.bind(r,e,n[e])}))}this.container.classList.add("menu-item-warning-state");i.appendChild(r)}},{key:"removeWarning",value:function e(){if(!this.container.classList.contains("menu-item-warning-state")){return}this.container.classList.remove("menu-item-warning-state");var t;while(t=this.container.querySelector("a.menu-post-warn-icon")){t.parentNode.removeChild(t)}}},{key:"showMessage",value:function e(t){var n=this;if(this.showMessagePopup){this.showMessagePopup.close()}this.showMessagePopup=r.PopupManager.create("left-menu-message",this.container,{content:'<div class="left-menu-message-popup">'+t+"</div>",darkMode:true,offsetTop:2,offsetLeft:0,angle:true,events:{onClose:function e(){n.showMessagePopup=null}},autoHide:true});this.showMessagePopup.show();setTimeout((function(){if(n.showMessagePopup){n.showMessagePopup.close()}}),3e3)}},{key:"showError",value:function e(t){var n=[];if(t.errors){n.push(t.errors[0].message)}else if(t instanceof TypeError){n.push(t.message)}var i=[a.Loc.getMessage("MENU_ERROR_OCCURRED")].concat(n).join(" ");this.showMessage(i)}},{key:"getDropDownActions",value:function e(){return[]}},{key:"getEditFields",value:function e(){return{id:this.getId(),text:this.getName()}}},{key:"onDeleteAsFavorites",value:function e(t){var n=t.data;if(String(n.id)===String(this.getId())){if(this.getCode()==="standard"){s.EventEmitter.emit(this,c.eventName("onItemDelete"),{item:this,animate:true})}else{this.storage=babelHelpers.toConsumableArray(this.storage).filter((function(e){return e!=="standard"}));this.container.dataset.storage=this.storage.join(",")}s.EventEmitter.unsubscribe(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"),this.onDeleteAsFavorites);s.EventEmitter.decrementMaxListeners(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"))}}}],[{key:"detect",value:function e(t){return t.getAttribute("data-role")!=="group"&&t.getAttribute("data-type")===this.code}},{key:"createNode",value:function e(t){var n=t.id,i=t.text,r=t.link,s=t.openInNewPage,o=t.counterId,l=t.counterValue,u=t.topMenuId;n=a.Text.encode(n);i=a.Text.encode(i);r=a.Text.encode(r);o=o?a.Text.encode(o):"";l=l?parseInt(l):0;s=s==="Y"?"Y":"N";return a.Tag.render(q||(q=babelHelpers.taggedTemplateLiteral(['<li \n\t\t\tid="bx_left_menu_','" \n\t\t\tdata-status="show" \n\t\t\tdata-id="','" \n\t\t\tdata-role="item"\n\t\t\tdata-storage="" \n\t\t\tdata-counter-id="','" \n\t\t\tdata-link="','" \n\t\t\tdata-all-links="" \n\t\t\tdata-type="','" \n\t\t\tdata-delete-perm="Y" \n\t\t\t','\n\t\t\tdata-new-page="','" \n\t\t\tclass="menu-item-block menu-item-no-icon-state">\n\t\t\t\t<span class="menu-favorites-btn menu-favorites-draggable">\n\t\t\t\t\t<span class="menu-fav-draggable-icon"></span>\n\t\t\t\t</span>\n\t\t\t\t<a class="menu-item-link" data-slider-ignore-autobinding="true" href="','" target="','">\n\t\t\t\t\t<span class="menu-item-icon-box">\n\t\t\t\t\t\t<span class="menu-item-icon">W</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="menu-item-link-text " data-role="item-text">',"</span>\n\t\t\t\t\t",'\n\t\t\t\t</a>\n\t\t\t\t<span data-role="item-edit-control" class="menu-fav-editable-btn menu-favorites-btn">\n\t\t\t\t\t<span class="menu-favorites-btn-icon"></span>\n\t\t\t\t</span>\n\t\t\t</li>'])),n,n,o,r,this.code,u?'data-top-menu-id="'.concat(a.Text.encode(u),'"'):"",s,r,s==="Y"?"_blank":"_self",i,o?'<span class="menu-item-index-wrap">\n\t\t\t\t\t\t<span data-role="counter"\n\t\t\t\t\t\t\tdata-counter-value="'.concat(l,'" class="menu-item-index" id="menu-counter-').concat(o,'">').concat(l,"</span>\n\t\t\t\t\t</span>"):"")}},{key:"backendSaveItem",value:function e(t){throw"Function backendSaveItem must be replaced"}},{key:"showUpdate",value:function e(t){var n=this;return new Promise((function(e,i){n.showForm(t.container,t.getEditFields(),e,i)}))}},{key:"checkForm",value:function e(t){if(String(t.elements["text"].value).trim().length<=0){t.elements["text"].classList.add("menu-form-input-error");t.elements["text"].focus();return false}if(t.elements["link"]){if(String(t.elements["link"].value).trim().length<=0||H.refineUrl(t.elements["link"].value).length<=0){t.elements["link"].classList.add("menu-form-input-error");t.elements["link"].focus();return false}else{t.elements["link"].value=H.refineUrl(t.elements["link"].value)}}return true}},{key:"showForm",value:function e(n,i,s,o){var l=this;if(this.popup){this.popup.close()}var u=i.id!=="";var c=a.Tag.render(G||(G=babelHelpers.taggedTemplateLiteral(['\n<form name="menuAddToFavoriteForm">\n\t<input type="hidden" name="id" value="','">\n\t<label for="menuPageToFavoriteName" class="menu-form-label">','</label>\n\t<input name="text" type="text" id="menuPageToFavoriteName" class="menu-form-input" value="','" >\n\t',"\n\t","\n</form>"])),a.Text.encode(i.id||""),a.Loc.getMessage("MENU_ITEM_NAME"),a.Text.encode(i.text||""),i["link"]!==undefined?'<br><br>\n\t<label for="menuPageToFavoriteLink" class="menu-form-label">'.concat(a.Loc.getMessage("MENU_ITEM_LINK"),'</label>\n\t<input name="link" id="menuPageToFavoriteLink" type="text" class="menu-form-input" value="').concat(a.Text.encode(i.link),'" >'):"",i["openInNewPage"]!==undefined?'<br><br>\n\t<input name="openInNewPage" id="menuOpenInNewPage" type="checkbox" value="Y" '.concat(i.openInNewPage==="Y"?"checked":"",' >\n\t<label for="menuOpenInNewPage" class="menu-form-label">').concat(a.Loc.getMessage("MENU_OPEN_IN_NEW_PAGE"),"</label>"):"");Object.keys(i).forEach((function(e){if(["id","text","link","openInNewPage"].indexOf(e)<0){var t=a.Text.encode(e);var n=a.Text.encode(i[e]);c.appendChild(a.Tag.render(W||(W=babelHelpers.taggedTemplateLiteral(['<input type="hidden" name="','" value="','">'])),t,n))}}));this.popup=r.PopupManager.create("menu-self-item-popup",n,{className:"menu-self-item-popup",titleBar:i["link"]===undefined?a.Loc.getMessage("MENU_RENAME_ITEM"):u?a.Loc.getMessage("MENU_EDIT_SELF_PAGE"):a.Loc.getMessage("MENU_ADD_SELF_PAGE"),offsetTop:1,offsetLeft:20,cacheable:false,closeIcon:true,lightShadow:true,draggable:{restrict:true},closeByEsc:true,content:c,buttons:[new t.SaveButton({onclick:function e(){if(l.checkForm(c)){var t={};babelHelpers.toConsumableArray(c.elements).forEach((function(e){t[e.name]=e.value}));if(c.elements["openInNewPage"]){t["openInNewPage"]=c.elements["openInNewPage"].checked?"Y":"N"}l.backendSaveItem(t).then((function(){s(t);l.popup.close()}))["catch"](H.catchError)}}}),new t.CancelButton({onclick:function e(){l.popup.close()}})]});this.popup.show()}}]);return e}();babelHelpers.defineProperty(j,"code","abstract");function V(e,t){var n=new a.Uri(e);var i=n.getPath().replace("/index.php","").replace("/index.html","");var r=t.getPath().replace("/index.php","").replace("/index.html","");if(n.getHost()!==""&&n.getHost()!==t.getHost()){return false}if(r.indexOf(i)!==0){return false}return true}function z(e){if(!a.Type.isStringFilled(e)){return"..."}e=e.replace(/['`".,:;~|{}*^$#@&+\-=?!()[\]<>\n\r]+/g,"").trim();if(e.length<=0){return"..."}var t;var n=e.split(/[\s,]+/);if(n.length<=1){t=e.substring(0,1)}else if(n.length===2){t=n[0].substring(0,1)+n[1].substring(0,1)}else{var i=n[0];var r=n[1];for(var s=1;s<n.length;s++){if(n[s].length>3){r=n[s];break}}t=i.substring(0,1)+r.substring(0,1)}return t.toUpperCase()}function Y(e,t,n,i){$(e,t);Q(n,"set");J(e,n,i);return i}function J(e,t,n){if(t.set){t.set.call(e,n)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=n}}function K(e,t,n){$(e,t);Q(n,"get");return Z(e,n)}function Q(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function $(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function Z(e,t){if(t.get){return t.get.call(e)}return t.value}var ee=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"canDelete",value:function e(){return true}},{key:"delete",value:function e(){var t=this;F.deleteFavoritesItemMenu({id:this.getId(),storage:this.storage}).then((function(){t.destroy();s.EventEmitter.emit(t,c.eventName("onItemDelete"),{animate:true});var e=t.getSimilarToUrl(H.getCurUri()).length>0?window:{doesnotmatter:""};BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuItemDeleted",[{id:t.getId()},t]);BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess",[{isActive:false,context:e}])}))}},{key:"getDropDownActions",value:function e(){var n=this;var i=[];i.push({text:a.Loc.getMessage("MENU_RENAME_ITEM"),onclick:function e(){n.constructor.showUpdate(n).then(n.update.bind(n))["catch"](n.showError)}});i.push({text:a.Loc.getMessage("MENU_REMOVE_STANDARD_ITEM"),onclick:function e(){n["delete"]()}});if(c.isAdmin){i.push({text:a.Loc.getMessage("MENU_ADD_ITEM_TO_ALL"),onclick:function e(){var i=n.container.querySelector("a");F.addAdminSharedItemMenu({id:n.getId(),link:n.links[0],text:n.getName(),counterId:n.container.dataset.counterId,openInNewPage:i&&i.getAttribute("target")==="_blank"?"Y":"N"}).then((function(){n.showMessage(a.Loc.getMessage("MENU_ITEM_WAS_ADDED_TO_ALL"));n.container.dataset.type=ie.code;n.storage.push(t.code);n.container.dataset.storage=n.storage.join(",");s.EventEmitter.emit(n,c.eventName("onItemConvert"),n)}))["catch"](n.showError)}})}return i}}],[{key:"backendSaveItem",value:function e(t){return F.updateFavoritesItemMenu(t)}},{key:"getActiveTopMenuItem",value:function e(){if(K(this,t,te)){return K(this,t,te)}if(!BX.Main||!BX.Main.interfaceButtonsManager){return null}var n=Array.from(Object.values(BX.Main.interfaceButtonsManager.getObjects())).shift();if(n){var i=n.getActive();if(i&&babelHelpers["typeof"](i)==="object"){var a=document.createElement("a");a.href=i["URL"];var r=a.pathname[0]!=="/"?"/"+a.pathname:a.pathname;Y(this,t,te,{ID:i["ID"]||null,NODE:i["NODE"]||null,URL:r+a.search,TEXT:i["TEXT"],DATA_ID:i["DATA_ID"],COUNTER_ID:i["COUNTER_ID"],COUNTER:i["COUNTER"],SUB_LINK:i["SUB_LINK"]})}}return K(this,t,te)}},{key:"isCurrentPageStandard",value:function e(t){if(t&&t["URL"]){var n=document.location.pathname+document.location.search;return t.URL===n&&t.URL.indexOf("workgroups")<0}return false}},{key:"saveCurrentPage",value:function e(t){var n=this;var i=t.pageTitle,a=t.pageLink;var r=this.getActiveTopMenuItem();var s,o,l;if(r&&r.NODE&&this.isCurrentPageStandard(r)&&(a===H.getCurPage()||a===r.URL||!a)){var u=r.NODE.getBoundingClientRect();o=u.left;l=u.top;s={id:r.DATA_ID,text:i||r.TEXT,link:H.getCurPage()||r.URL,counterId:r.COUNTER_ID,counterValue:r.COUNTER,isStandardItem:true,subLink:r.SUB_LINK}}else{s={text:i||document.getElementById("pagetitle").innerText,link:a||H.getCurPage(),isStandardItem:a===H.getCurPage()};var c=BX("pagetitle").getBoundingClientRect();o=c.left;l=c.top}return F.addFavoritesItemMenu(s).then((function(e){var t=e.data.itemId;s.id=t;s.topMenuId=s.id;return{node:n.createNode(s),animateFromPoint:{startX:o,startY:l},itemInfo:s}}))}},{key:"deleteCurrentPage",value:function e(t){var n=t.pageLink;var i=this.getActiveTopMenuItem();var a={},r,o;if(i&&this.isCurrentPageStandard(i)){a["id"]=i.DATA_ID;var l=i.NODE.getBoundingClientRect();r=l.left;o=l.top}else{a["link"]=n||H.getCurPage();var u=BX("pagetitle").getBoundingClientRect();r=u.left;o=u.top}return F.deleteFavoritesItemMenu(a).then((function(e){var t=e.data;if(!a.id&&t&&t["itemId"]){a.id=t["itemId"]}s.EventEmitter.emit(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"),{id:a.id});return{itemInfo:a,animateToPoint:{startX:r,startY:o}}}))}},{key:"saveStandardPage",value:function e(t){var n=this;var i=t.DATA_ID,a=t.TEXT,r=t.SUB_LINK,s=t.COUNTER_ID,o=t.COUNTER,l=t.NODE,u=t.URL;var c={id:i,text:a,link:u,subLink:r,counterId:s,counterValue:o};var d=l.getBoundingClientRect();var m=d.left;var h=d.top;return F.addFavoritesItemMenu(c).then((function(e){var t=e.data.itemId;c.id=t;c.topMenuId=c.id;var a=n.getActiveTopMenuItem();BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuItemAdded",[c,n]);BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess",[{isActive:true,context:a&&a.DATA_ID===i?window:null}]);return{node:n.createNode(c),animateFromPoint:{startX:m,startY:h}}}))}},{key:"deleteStandardPage",value:function e(t){var n=this;var i=t.DATA_ID;var a={id:i};return F.deleteFavoritesItemMenu(a).then((function(){s.EventEmitter.emit(s.EventEmitter.GLOBAL_TARGET,c.eventName("onItemDeleteAsFavorites"),{id:a.id});BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuItemDeleted",[a,n]);BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess",[{isActive:false}]);return{itemInfo:a}}))}}]);return t}(j);babelHelpers.defineProperty(ee,"code","standard");var te={writable:true,value:null};var ne=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"canDelete",value:function e(){return true}},{key:"delete",value:function e(){var t=this;return F.deleteSelfITem(this.getId()).then((function(){if(t.storage.indexOf(ee.code)>=0){F.deleteFavoritesItemMenu({id:t.getId()})}s.EventEmitter.emit(t,c.eventName("onItemDelete"),{animate:true})}))["catch"](this.showError)}},{key:"getDropDownActions",value:function e(){var n=this;var i=[];i.push({text:a.Loc.getMessage("MENU_EDIT_ITEM"),onclick:function e(){n.constructor.showUpdate(n).then(n.update.bind(n))["catch"](n.showError)}});i.push({text:a.Loc.getMessage("MENU_DELETE_SELF_ITEM"),onclick:function e(){o.MessageBox.confirm(a.Loc.getMessage("MENU_DELETE_SELF_ITEM_CONFIRM"),a.Loc.getMessage("MENU_DELETE_SELF_ITEM"),(function(e){n["delete"]();e.close()}),a.Loc.getMessage("MENU_DELETE"))}});if(c.isAdmin){i.push({text:a.Loc.getMessage("MENU_ADD_ITEM_TO_ALL"),onclick:function e(){var i=n.container.querySelector("a");F.addAdminSharedItemMenu({id:n.getId(),link:n.links[0],text:n.getName(),counterId:n.container.dataset.counterId,openInNewPage:i&&i.getAttribute("target")==="_blank"?"Y":"N"}).then((function(){n.showMessage(a.Loc.getMessage("MENU_ITEM_WAS_ADDED_TO_ALL"));n.container.dataset.type=ie.code;n.storage.push(t.code);n.container.dataset.storage=n.storage.join(",");s.EventEmitter.emit(n,c.eventName("onItemConvert"),n)}))["catch"](n.showError)}})}return i}},{key:"getEditFields",value:function e(){return{id:this.getId(),text:this.getName(),link:this.links[0],openInNewPage:this.container.getAttribute("data-new-page")}}}],[{key:"backendSaveItem",value:function e(t){return F.saveSelfItemMenu(t).then((function(e){var n=e.data;if(n&&n["itemId"]){t.id=n["itemId"]}return t}))}},{key:"showAdd",value:function e(t){var n=this;return new Promise((function(e,i){n.showForm(t,{id:0,name:"",link:"",openInNewPage:"Y"},e,i)})).then((function(e){return{node:n.createNode(e)}}))}}]);return t}(j);babelHelpers.defineProperty(ne,"code","self");var ie=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"canDelete",value:function e(){return this.container.dataset.deletePerm==="Y"}},{key:"delete",value:function e(){var t=this;F.deleteAdminSharedItemMenu(this.getId()).then((function(){if(t.storage.indexOf(ee.code)>=0){F.deleteFavoritesItemMenu({id:t.getId()})}if(t.storage.indexOf(ne.code)>=0){F.deleteSelfITem(t.getId())}s.EventEmitter.emit(t,c.eventName("onItemDelete"),{animate:true})}))["catch"](this.showError)}},{key:"getDropDownActions",value:function e(){var t=this;if(!this.canDelete()){return[]}var n=[];if(this.storage.filter((function(e){return e===ee.code||e===ne.code})).length>0){n.push({text:a.Loc.getMessage("MENU_REMOVE_STANDARD_ITEM"),onclick:this["delete"].bind(this)});n.push({text:a.Loc.getMessage("MENU_DELETE_CUSTOM_ITEM_FROM_ALL"),onclick:function e(){F.deleteAdminSharedItemMenu(t.getId()).then((function(){t.showMessage(a.Loc.getMessage("MENU_ITEM_WAS_DELETED_FROM_ALL"));var e=t.storage.indexOf(ne.code)>=0?ne.code:ee.code;t.container.dataset.type=e;t.container.dataset.storage=t.storage.filter((function(t){return t!==e})).join(",");s.EventEmitter.emit(t,c.eventName("onItemConvert"),t)}))["catch"](t.showError)}})}else{n.push({text:a.Loc.getMessage("MENU_DELETE_CUSTOM_ITEM_FROM_ALL"),onclick:this["delete"].bind(this)})}return n}}]);return t}(j);babelHelpers.defineProperty(ie,"code","admin");var ae=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"canDelete",value:function e(){return this.container.dataset.deletePerm==="Y"}},{key:"delete",value:function e(){var t=this;if(this.canDelete()){F.deleteCustomItem(this.getId()).then((function(){if(t.storage.indexOf(ee.code)>=0){F.deleteFavoritesItemMenu({id:t.getId()})}s.EventEmitter.emit(t,c.eventName("onItemDelete"),{animate:true})}))["catch"](this.showError)}}},{key:"getDropDownActions",value:function e(){var t=[];if(this.canDelete()){t.push({text:a.Loc.getMessage("MENU_DELETE_ITEM_FROM_ALL"),onclick:this["delete"].bind(this)})}return t}}]);return t}(j);babelHelpers.defineProperty(ae,"code","custom");var re=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"canDelete",value:function e(){return false}},{key:"openSettings",value:function e(){BX.SidePanel.Instance.open("/settings/configs/?analyticContext=left_menu&page=mainpage")}}]);return t}(j);babelHelpers.defineProperty(re,"code","main");var se=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"canDelete",value:function e(){return false}}]);return t}(j);babelHelpers.defineProperty(se,"code","default");function oe(e,t,n){le(e,t);t.set(e,n)}function le(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ue=new WeakMap;var ce=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments));oe(babelHelpers.assertThisInitialized(e),ue,{writable:true,value:void 0});e.container.addEventListener("click",e.toggleAndSave.bind(babelHelpers.assertThisInitialized(e)),true);e.container.addEventListener("mouseleave",(function(){a.Dom.removeClass(e.container,"menu-item-group-actioned")}));e.groupContainer=e.container.parentNode.querySelector('[data-group-id="'.concat(e.getId(),'"]'));if(e.container.getAttribute("data-collapse-mode")==="collapsed"){e.groupContainer.style.display="none"}setTimeout((function(){e.updateCounter()}),0);return e}babelHelpers.createClass(t,[{key:"toggleAndSave",value:function e(t){var n=this;t.preventDefault();t.stopPropagation();if(this.container.getAttribute("data-collapse-mode")==="collapsed"){F.expandGroup(this.getId());this.expand().then((function(){n.container.setAttribute("data-collapse-mode","expanded")}))}else{F.collapseGroup(this.getId());this.collapse().then((function(){n.container.setAttribute("data-collapse-mode","collapsed")}))}return false}},{key:"checkAndCorrect",value:function e(){var t=this;var n=this.groupContainer;if(n.parentNode===this.container){a.Dom.insertAfter(n,this.container)}babelHelpers.toConsumableArray(n.querySelectorAll(".menu-item-block")).forEach((function(e){e.setAttribute("data-status",t.container.getAttribute("data-status"))}));return this}},{key:"collapse",value:function e(t){var n=this;return new Promise((function(e){var i=n.groupContainer;if(babelHelpers.classPrivateFieldGet(n,ue)){babelHelpers.classPrivateFieldGet(n,ue).stop()}i.style.overflow="hidden";a.Dom.addClass(n.container,"menu-item-group-collapsing");a.Dom.addClass(n.container,"menu-item-group-actioned");a.Dom.addClass(i,"menu-item-group-collapsing");var r={height:i.offsetHeight,display:i.style.display};babelHelpers.classPrivateFieldSet(n,ue,new BX.easing({duration:500,start:{height:r.height,opacity:100},finish:{height:0,opacity:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(t){i.style.height=t.height+"px";i.style.opacity=t.opacity/100},complete:function r(){i.style.display="none";i.style.opacity="auto";i.style.height="auto";if(n.container.getAttribute("data-contains-active-item")==="Y"){a.Dom.addClass(n.container,"menu-item-active")}a.Dom.removeClass(n.container,"menu-item-group-collapsing");a.Dom.removeClass(i,"menu-item-group-collapsing");babelHelpers.classPrivateFieldSet(n,ue,null);if(t===true){n.container.appendChild(i)}e()}}));babelHelpers.classPrivateFieldGet(n,ue).animate()}))}},{key:"expand",value:function e(t){var n=this;return new Promise((function(e){var i=n.container;var r=n.groupContainer;if(t===true&&i.getAttribute("data-collapse-mode")==="collapsed"){return e()}var s=r.querySelectorAll("li").length*i.offsetHeight;a.Dom.addClass(i,"menu-item-group-expanding");a.Dom.addClass(i,"menu-item-group-actioned");a.Dom.addClass(r,"menu-item-group-expanding");if(r.parentNode===n.container){a.Dom.insertAfter(r,n.container)}r.style.display="block";babelHelpers.classPrivateFieldSet(n,ue,new BX.easing({duration:500,start:{height:0,opacity:0},finish:{height:s,opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(t){r.style.height=t.height+"px";r.style.opacity=t.opacity/100},complete:function t(){a.Dom.removeClass(i,"menu-item-group-expanding menu-item-active");a.Dom.removeClass(r,"menu-item-group-expanding");r.style.height="auto";r.style.opacity="auto";e()}}));babelHelpers.classPrivateFieldGet(n,ue).animate()}))}},{key:"canDelete",value:function e(){return false}},{key:"updateCounter",value:function e(){var t=0;babelHelpers.toConsumableArray(this.container.parentNode.querySelector('[data-group-id="'.concat(this.getId(),'"]')).querySelectorAll('[data-role="counter"]')).forEach((function(e){t+=a.Text.toNumber(e.dataset.counterValue)}));var n=this.container.querySelector('[data-role="counter"]');if(t>0){n.innerHTML=t>99?"99+":t;this.container.classList.add("menu-item-with-index")}else{n.innerHTML="";this.container.classList.remove("menu-item-with-index")}}},{key:"markAsActive",value:function e(){this.container.setAttribute("data-contains-active-item","Y");if(this.container.getAttribute("data-collapse-mode")==="collapsed")a.Dom.addClass(this.container,"menu-item-active")}},{key:"markAsInactive",value:function e(){this.container.removeAttribute("data-contains-active-item");a.Dom.removeClass(this.container,"menu-item-active")}},{key:"isActive",value:function e(){return this.container.getAttribute("data-contains-active-item")==="Y"}}],[{key:"detect",value:function e(t){return t.getAttribute("data-role")==="group"&&t.getAttribute("data-type")===this.code}}]);return t}(j);babelHelpers.defineProperty(ce,"code","group");var de=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments));e.container.querySelector('[data-role="item-edit-control"]').style.display="none";return e}return t}(ce);babelHelpers.defineProperty(de,"code","system_group");var me=[j,ie,ee,ae,ne,se,ce,de,re];function he(e){var t=j;me.forEach((function(n){if(n.detect(e)){t=n}}));return t}function fe(e,t,n){pe(e,t);t.set(e,n)}function pe(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ve=new WeakMap;var ge=new WeakMap;var be=function(){function e(){babelHelpers.classCallCheck(this,e);fe(this,ve,{writable:true,value:void 0});fe(this,ge,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ge,new a.Uri(window.location.href))}babelHelpers.createClass(e,[{key:"checkAndSet",value:function e(t,n){var i=this;if(t===this.item){return false}var r=babelHelpers.classPrivateFieldGet(this,ve);n.forEach((function(e){var n=new a.Uri(e.url);var s=false;if(!r||r.uri.getPath().length<n.getPath().length){s=true}else if(r.uri.getPath().length===n.getPath().length){var o=babelHelpers.classPrivateFieldGet(i,ge).getQueryParams();var l=Object.keys(o).length;var u={params:r.uri.getQueryParams(),mismatches:l};var c={params:n.getQueryParams(),mismatches:l};Array.from(Object.keys(o)).forEach((function(e){if(String(o[e])===String(u.params[e])){u.mismatches--}if(String(o[e])===String(c.params[e])){c.mismatches--}}));if(e.priority>0&&t instanceof se){e.priority+=1}if(u.mismatches>c.mismatches||r.priority<e.priority){s=true}}if(s){r={priority:e.priority,url:e.url,uri:n}}}));if(r!==babelHelpers.classPrivateFieldGet(this,ve)){if(this.item){this.unhighlight(this.item)}babelHelpers.classPrivateFieldSet(this,ve,r);this.item=t;this.highlight();return true}return false}},{key:"checkAndUnset",value:function e(t){if(t instanceof j&&t===this.item){this.unhighlight(this.item);this.item=null;babelHelpers.classPrivateFieldSet(this,ve,null)}}},{key:"highlight",value:function e(){if(this.item){this.item.container.classList.add("menu-item-active");var t=this.item.container.closest('[data-role="group-content"]');var n;while(t){n=t.parentNode.querySelector('[data-id="'.concat(t.getAttribute("data-group-id"),'"]'));if(n){n.setAttribute("data-contains-active-item","Y");if(n.getAttribute("data-collapse-mode")==="collapsed"){n.classList.add("menu-item-active")}}t=t.closest('[data-relo="group-content"]')}}}},{key:"unhighlight",value:function e(t){if(!(t instanceof j)){t=this.item}if(t instanceof j){t.container.classList.remove("menu-item-active");var n=t.container.closest('[data-role="group-content"]');var i;while(n){i=n.parentNode.querySelector('[data-id="'.concat(n.getAttribute("data-group-id"),'"]'));if(i){i.removeAttribute("data-contains-active-item");i.classList.remove("menu-item-active")}n=n.closest('[data-relo="group-content"]')}return t}return null}}]);return e}();function ye(e,t){ke(e,t);t.add(e)}function Ee(e,t,n){ke(e,t);t.set(e,n)}function ke(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ce(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var Me=new WeakMap;var Ie=new WeakMap;var Se=new WeakSet;var Te=new WeakSet;var we=new WeakSet;var Ae=new WeakSet;var Le=new WeakSet;var Pe=new WeakMap;var He=new WeakSet;var Be=new WeakSet;var xe=new WeakSet;var De=new WeakSet;var Ne=new WeakSet;var _e=new WeakMap;var Ue=new WeakSet;var Oe=new WeakSet;var Xe=new WeakSet;var Fe=new WeakSet;var Re=new WeakSet;var qe=new WeakSet;var Ge=new WeakSet;var We=function(e){babelHelpers.inherits(t,e);function t(e,n){var i;var a=n.events;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,{events:a}));ye(babelHelpers.assertThisInitialized(i),Ge);ye(babelHelpers.assertThisInitialized(i),qe);ye(babelHelpers.assertThisInitialized(i),Re);ye(babelHelpers.assertThisInitialized(i),Fe);ye(babelHelpers.assertThisInitialized(i),Xe);ye(babelHelpers.assertThisInitialized(i),Oe);ye(babelHelpers.assertThisInitialized(i),Ue);ye(babelHelpers.assertThisInitialized(i),Ne);ye(babelHelpers.assertThisInitialized(i),De);ye(babelHelpers.assertThisInitialized(i),xe);ye(babelHelpers.assertThisInitialized(i),Be);ye(babelHelpers.assertThisInitialized(i),He);ye(babelHelpers.assertThisInitialized(i),Le);ye(babelHelpers.assertThisInitialized(i),Ae);ye(babelHelpers.assertThisInitialized(i),we);ye(babelHelpers.assertThisInitialized(i),Te);ye(babelHelpers.assertThisInitialized(i),Se);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"items",new Map);Ee(babelHelpers.assertThisInitialized(i),Me,{writable:true,value:new be});Ee(babelHelpers.assertThisInitialized(i),Ie,{writable:true,value:false});Ee(babelHelpers.assertThisInitialized(i),Pe,{writable:true,value:null});Ee(babelHelpers.assertThisInitialized(i),_e,{writable:true,value:void 0});i.parentContainer=e;i.container=e.querySelector(".menu-items");i.hiddenContainer=e.querySelector("#left-menu-hidden-items-block");e.querySelectorAll("li.menu-item-block").forEach(i.registerItem.bind(babelHelpers.assertThisInitialized(i)));e.querySelector("#left-menu-hidden-separator").addEventListener("click",i.toggleHiddenContainer.bind(babelHelpers.assertThisInitialized(i)));if(i.getActiveItem()&&i.getActiveItem().container.getAttribute("data-status")==="hide"){Ce(babelHelpers.assertThisInitialized(i),Se,je).call(babelHelpers.assertThisInitialized(i),false)}return i}babelHelpers.createClass(t,[{key:"registerItem",value:function e(t){var n=this,i;var a=he(t);var r=new a(this.container,t);this.items.set(r.getId(),r);if(!(r instanceof re)){Ce(this,Xe,it).call(this,r)}if(babelHelpers.classPrivateFieldGet(this,Me).checkAndSet(r,r.getSimilarToUrl(H.getCurUri()))===true){var o=Ce(this,De,Ze).call(this,r);while(o){o.markAsActive();o=Ce(this,De,Ze).call(this,o)}}s.EventEmitter.subscribe(r,c.eventName("onItemDelete"),(function(e){var t=e.data;n.deleteItem(r,t)}));s.EventEmitter.subscribe(r,c.eventName("onItemConvert"),(function(e){var t=e.data;n.convertItem(r,t)}));babelHelpers.toConsumableArray(r.container.querySelectorAll("a")).forEach((function(e){e.addEventListener("click",(function(e){if(babelHelpers.classPrivateFieldGet(n,Ie)===true){e.preventDefault();e.stopPropagation();return false}}),true)}));(i=r.container.querySelector('[data-role="item-edit-control"]'))===null||i===void 0?void 0:i.addEventListener("click",(function(e){n.openItemMenu(r,e.target)}));return r}},{key:"unregisterItem",value:function e(t){if(!this.items.has(t.getId())){return}this.items["delete"](t.getId());babelHelpers.classPrivateFieldGet(this,Me).checkAndUnset(t,t.getSimilarToUrl(H.getCurUri()));s.EventEmitter.unsubscribeAll(t,c.eventName("onItemDelete"));s.EventEmitter.unsubscribeAll(t,c.eventName("onItemConvert"));t.container.parentNode.replaceChild(t.container.cloneNode(true),t.container)}},{key:"switchToEditMode",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Ie)){return}babelHelpers.classPrivateFieldSet(this,Ie,true);s.EventEmitter.emit(this,c.eventName("EditMode"))}},{key:"switchToViewMode",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Ie)){return}babelHelpers.classPrivateFieldSet(this,Ie,false);s.EventEmitter.emit(this,c.eventName("ViewMode"))}},{key:"isHiddenContainerVisible",value:function e(){return this.hiddenContainer.classList.contains("menu-item-favorites-more-open")}},{key:"toggleHiddenContainer",value:function e(t){if(this.hiddenContainer.classList.contains("menu-item-favorites-more-open")){Ce(this,Te,Ve).call(this,t)}else{Ce(this,Se,je).call(this,t)}}},{key:"setItemAsAMainPage",value:function e(t){var n=this;var i=t.container;i.setAttribute("data-status","show");var r=i.offsetTop;var s=a.Dom.create("div",{attrs:{className:"menu-draggable-wrap"},style:{top:r}});var o=i.nextElementSibling;if(o){i.parentNode.insertBefore(s,o)}else{i.parentNode.appendChild(s)}s.appendChild(i);a.Dom.addClass(i,"menu-item-draggable");new BX.easing({duration:500,start:{top:r},finish:{top:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(t){s.style.top=t.top+"px"},complete:function e(){n.container.insertBefore(i,BX("left-menu-empty-item").nextSibling);a.Dom.removeClass(i,"menu-item-draggable");a.Dom.remove(s);Ce(n,xe,$e).call(n,{action:"mainPageIsSet",itemId:t.getId()})}}).animate()}},{key:"showItem",value:function e(t){var n=Ce(this,De,Ze).call(this,t);var i=this.container;t.container.setAttribute("data-status","show");if(Ce(this,Ne,et).call(this,t)){i.appendChild(t.container);Ce(this,Le,Je).call(this,t,n)}else if(n){i.appendChild(n.container);n.container.setAttribute("data-status","show");i.appendChild(n.groupContainer)}if(this.hiddenContainer.querySelector(".menu-item-block")===null){s.EventEmitter.emit(this,c.eventName("onHiddenBlockIsEmpty"));Ce(this,Te,Ve).call(this,false)}Ce(this,Ae,Ye).call(this,t);Ce(this,xe,$e).call(this,{action:"showItem",itemId:t.getId()})}},{key:"hideItem",value:function e(t){var n=Ce(this,De,Ze).call(this,t);var i=this.hiddenContainer.querySelector("#left-menu-hidden-items-list");var a=i.querySelector(".menu-item-block")===null;t.container.setAttribute("data-status","hide");if(Ce(this,Ne,et).call(this,t)){i.appendChild(t.container);Ce(this,Le,Je).call(this,t,n)}else if(n){i.appendChild(n.container);n.container.setAttribute("data-status","hide");i.appendChild(n.groupContainer)}if(a){s.EventEmitter.emit(this,c.eventName("onHiddenBlockIsNotEmpty"))}Ce(this,Ae,Ye).call(this,t);Ce(this,xe,$e).call(this,{action:"hideItem",itemId:t.getId()})}},{key:"updateCounters",value:function e(t,n){var a=this;var r={};n=n!==false;babelHelpers.toConsumableArray(Object.entries(t)).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),i=t[0],s=t[1];babelHelpers.toConsumableArray(Ce(a,He,Ke).call(a,i)).forEach((function(e){var t=e.updateCounter(s),n=t.oldValue,o=t.newValue;var l=e.container.getAttribute("data-status");if((i.indexOf("crm_")<0||i.indexOf("crm_all")>=0)&&(i.indexOf("tasks_")<0||i.indexOf("tasks_total")>=0)){r[l]=r[l]||0;r[l]+=o-n}var u=Ce(a,De,Ze).call(a,e);while(u){u.updateCounter();u=Ce(a,De,Ze).call(a,u)}}));if(n){BX.localStorage.set("lmc-"+i,s,5)}}));if(r["hide"]!==undefined&&r["hide"]!==0){var s=this.parentContainer.querySelector("#menu-hidden-counter");s.dataset.counterValue=Math.max(0,Number(s.dataset.counterValue)+Number(r["hide"]));if(s.dataset.counterValue>0){s.classList.remove("menu-hidden-counter");s.innerHTML=s.dataset.counterValue>99?"99+":s.dataset.counterValue}else{s.classList.add("menu-hidden-counter");s.innerHTML=""}}if(typeof BXIM!=="undefined"){if(babelHelpers.classPrivateFieldGet(this,Pe)===null){babelHelpers.classPrivateFieldSet(this,Pe,0);babelHelpers.toConsumableArray(this.items.entries()).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],i=t[1];if(i instanceof ce){return}var r=i.getCounterValue();if(r>0){var s="doesNotMatter";if(n.indexOf("menu_crm")>=0||n.indexOf("menu_tasks")>=0){var o=i.container.querySelector('[data-role="counter"]');if(o){s=o.id}}if(s==="doesNotMatter"||s.indexOf("crm_all")>=0||s.indexOf("tasks_total")>=0){babelHelpers.classPrivateFieldSet(a,Pe,babelHelpers.classPrivateFieldGet(a,Pe)+r)}}}))}else{babelHelpers.classPrivateFieldSet(this,Pe,babelHelpers.classPrivateFieldGet(this,Pe)+(r["show"]!==undefined?r["show"]:0));babelHelpers.classPrivateFieldSet(this,Pe,babelHelpers.classPrivateFieldGet(this,Pe)+(r["hide"]!==undefined?r["hide"]:0))}var o=babelHelpers.classPrivateFieldGet(this,Pe)>99?"99+":babelHelpers.classPrivateFieldGet(this,Pe)<0?"0":babelHelpers.classPrivateFieldGet(this,Pe);if(i.DesktopApi.isDesktop()){i.DesktopApi.setBrowserIconBadge(o)}}babelHelpers.toConsumableArray(this.items.entries()).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],i=t[1];if(i instanceof ce){i.updateCounter()}}))}},{key:"decrementCounter",value:function e(t){var n=this;babelHelpers.toConsumableArray(Object.entries(t)).forEach((function(e){var i=babelHelpers.slicedToArray(e,2),a=i[0],r=i[1];var s=Ce(n,He,Ke).call(n,a).shift();if(s){var o=s.getCounterValue();t[a]=o>r?o-r:0}else{delete t[a]}}));this.updateCounters(t,false)}},{key:"addItem",value:function e(t){var n=t.node,i=t.animateFromPoint;if(!(n instanceof Element)){return}var a=n.style.display;if(i){n.dataset.styleDisplay=n.style.display;n.style.display="none"}if(this.items.has(n.dataset.id)&&n.dataset.type===ee.code){var r=this.items.get(n.dataset.id);r.storage.push(ee.code);r.container.dataset.storage=r.storage.join(",");n=r.container}else{this.container.appendChild(n);this.registerItem(n);Ce(this,xe,$e).call(this)}if(i){Ce(this,Ue,tt).call(this,n,i).then((function(){n.style.display=n.dataset.styleDisplay}))}}},{key:"updateItem",value:function e(t){var n=t.id;if(this.items.has(n)){this.items.get(n).update(t)}}},{key:"deleteItem",value:function e(t,n){var i=this;var a=n.animate;this.items["delete"](t.getId());babelHelpers.classPrivateFieldGet(this,Me).checkAndUnset(t);if(t instanceof ee||a){Ce(this,Oe,nt).call(this,t.container).then((function(){t.container.parentNode.removeChild(t.container);Ce(i,xe,$e).call(i)}))}else if(t.container){t.container.parentNode.removeChild(t.container);Ce(this,xe,$e).call(this)}}},{key:"convertItem",value:function e(t){this.unregisterItem(t);this.registerItem(this.parentContainer.querySelector('li.menu-item-block[data-id="'.concat(t.getId(),'"]')))}},{key:"getActiveItem",value:function e(){return babelHelpers.classPrivateFieldGet(this,Me).item}},{key:"export",value:function e(){return Ce(this,Be,Qe).call(this)}},{key:"openItemMenu",value:function e(t,n){var i=this;if(babelHelpers.classPrivateFieldGet(this,_e)){babelHelpers.classPrivateFieldGet(this,_e).close()}var o=[];if(t instanceof re){o.push({text:a.Loc.getMessage("MENU_OPEN_SETTINGS_MAIN_PAGE"),onclick:function e(){t.openSettings()}})}else if(t.container.getAttribute("data-status")==="show"){o.push({text:a.Loc.getMessage("hide_item"),onclick:function e(){i.hideItem(t)}})}else{o.push({text:a.Loc.getMessage("show_item"),onclick:function e(n,a){i.showItem(t)}})}if(!c.isExtranet&&!c.isMainPageEnabled&&!(t instanceof ne)&&!(t instanceof ce)&&this.container.querySelector('li.menu-item-block[data-role="item"]')!==t.container){o.push({text:a.Loc.getMessage("MENU_SET_MAIN_PAGE"),onclick:function e(){i.setItemAsAMainPage(t)}})}t.getDropDownActions().forEach((function(e){o.push(e)}));if(!(t instanceof re)){o.push({text:babelHelpers.classPrivateFieldGet(this,Ie)?a.Loc.getMessage("MENU_EDIT_READY_FULL"):a.Loc.getMessage("MENU_SETTINGS_MODE"),onclick:function e(){babelHelpers.classPrivateFieldGet(i,Ie)?i.switchToViewMode():i.switchToEditMode()}})}o.forEach((function(e){var t;e["className"]=["menu-popup-no-icon",(t=e["className"])!==null&&t!==void 0?t:""].join(" ");var n=e.onclick;e["onclick"]=function(e,t){t.getMenuWindow().close();n.call(e,t)}}));babelHelpers.classPrivateFieldSet(this,_e,new r.Menu({bindElement:n,items:o,offsetTop:0,offsetLeft:12,angle:true,events:{onClose:function e(){s.EventEmitter.emit(i,c.eventName("onClose"));t.container.classList.remove("menu-item-block-hover");babelHelpers.classPrivateFieldSet(i,_e,null)},onShow:function e(){t.container.classList.add("menu-item-block-hover");s.EventEmitter.emit(i,c.eventName("onShow"))}}}));babelHelpers.classPrivateFieldGet(this,_e).show()}},{key:"isEditMode",get:function e(){return babelHelpers.classPrivateFieldGet(this,Ie)}}]);return t}(f);function je(e){s.EventEmitter.emit(this,c.eventName("onHiddenBlockIsVisible"));if(e===false){return this.hiddenContainer.classList.add("menu-item-favorites-more-open")}this.hiddenContainer.style.height="0px";this.hiddenContainer.style.opacity=0;Ce(this,we,ze).call(this,true,this.hiddenContainer,this.hiddenContainer.scrollHeight)}function Ve(e){s.EventEmitter.emit(this,c.eventName("onHiddenBlockIsHidden"));if(e===false){return this.hiddenContainer.classList.remove("menu-item-favorites-more-open")}Ce(this,we,ze).call(this,false,this.hiddenContainer,this.hiddenContainer.offsetHeight)}function ze(e,t,n){t.style.overflow="hidden";new BX.easing({duration:200,start:{opacity:e?0:100,height:e?0:n},finish:{opacity:e?100:0,height:e?n:0},transition:BX.easing.transitions.linear,step:function e(n){t.style.opacity=n.opacity/100;t.style.height=n.height+"px"},complete:function n(){if(e){t.classList.add("menu-item-favorites-more-open")}else{t.classList.remove("menu-item-favorites-more-open")}t.style.opacity="";t.style.overflow="";t.style.height=""}}).animate()}function Ye(e){var t=0;if(e.container.querySelector('[data-role="counter"]')){t=e.container.querySelector('[data-role="counter"]').dataset.counterValue}if(t<=0){return}babelHelpers.toConsumableArray(this.items.entries()).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],i=t[1];if(i instanceof ce){i.updateCounter()}}));var n=0;babelHelpers.toConsumableArray(this.parentContainer.querySelectorAll(".menu-item-block[data-status=\"hide\"][data-role='item']")).forEach((function(e){var t=e.querySelector('[data-role="counter"]');if(t){n+=parseInt(t.dataset.counterValue)}}));var i=this.parentContainer.querySelector("#menu-hidden-counter");i.dataset.counterValue=Math.max(0,n);if(i.dataset.counterValue>0){i.classList.remove("menu-hidden-counter");i.innerHTML=i.dataset.counterValue>99?"99+":i.dataset.counterValue}else{i.classList.add("menu-hidden-counter");i.innerHTML=""}}function Je(e,t){if(this.getActiveItem()!==e){return}var n=Ce(this,De,Ze).call(this,e);if(t!==n){if(t instanceof ce){t.markAsInactive()}if(n instanceof ce){n.markAsActive()}}}function Ke(e){var t=[];babelHelpers.toConsumableArray(this.items.values()).forEach((function(n){var i=n.container.querySelector('[data-role="counter"]');if(i&&i.id.indexOf(e)>=0){t.push(n)}}));return t}function Qe(){var e=this;var t={show:[],hide:[]};var n=[];var i=null;["show","hide"].forEach((function(r){var s=t[r];var o=null;var l=[];Array.from(e.parentContainer.querySelectorAll('.menu-item-block[data-status="'.concat(r,'"]'))).forEach((function(e){if(e.dataset.role==="group"){var u=e.parentNode.hasAttribute("data-group-id")?e.parentNode.getAttribute("data-group-id"):null;s=t[r];var c;while(c=l.pop()){if(c["group_id"]===u){l.push(c);s=c.items;break}}var d={group_id:e.dataset.id,items:[]};s.push(d);l.push(d);s=d.items;o=e.dataset.id}else{if([ae.code,ne.code,ee.code].indexOf(e.getAttribute("data-type"))>=0){var m={ID:e.getAttribute("data-id"),LINK:e.getAttribute("data-link"),TEXT:a.Text.decode(e.querySelector("[data-role='item-text']").innerHTML)};if(e.getAttribute("data-new-page")==="Y"){m.NEW_PAGE="Y"}n.push(m)}if(i===null&&a.Type.isStringFilled(e.getAttribute("data-link"))){i=e.getAttribute("data-link")}if(e.closest('[data-group-id="'.concat(o,'"][data-role="group-content"]'))){s.push(e.dataset.id)}else{var h=e.parentNode.hasAttribute("data-group-id")?e.parentNode.getAttribute("data-group-id"):null;s=t[r];var f;while(f=l.pop()){if(f["group_id"]===h){l.push(f);s=f.items;break}}s.push(e.dataset.id)}}}))}));return{saveSortItems:t,firstItemLink:i,customItems:n}}function $e(e){var t=Ce(this,Be,Qe).call(this),n=t.saveSortItems,i=t.firstItemLink;F.saveItemsSort(n,i,e||{action:"sortItem"})}function Ze(e){if(!(e instanceof j)){return null}var t=e.container.closest('[data-role="group-content"]');if(t&&this.items.has(t.getAttribute("data-group-id"))){return this.items.get(t.getAttribute("data-group-id"))}return null}function et(e){if(e instanceof ce){return false}var t=Ce(this,De,Ze).call(this,e);if(t instanceof ce&&e.container.parentNode.querySelectorAll("li.menu-item-block").length<=1){return false}return true}function tt(e,t){var n=this;return new Promise((function(i){var r=t.startX,s=t.startY;var o=document.createElement("DIV");o.style="position: absolute; z-index: 1000; top: ".concat(s+25,"px;");var l=e.cloneNode(true);l.style.display=e.dataset.styleDisplay;document.body.appendChild(o);o.appendChild(l);var u=n.hiddenContainer.getBoundingClientRect().top;new BX.easing({duration:500,start:{left:r},finish:{left:30},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(t){o.style.left=t.left+"px"},complete:function e(){new BX.easing({duration:500,start:{top:s+25},finish:{top:u},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function e(t){o.style.top=t.top+"px"},complete:function e(){a.Dom.remove(o);i()}}).animate()}}).animate()}))}function nt(e){return new Promise((function(t){new BX.easing({duration:700,start:{left:e.offsetLeft,opacity:1},finish:{left:400,opacity:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function t(n){e.style.paddingLeft=n.left+"px";e.style.opacity=n.opacity},complete:function e(){t()}}).animate()}))}function it(e){var t=this;jsDD.Enable();e.container.onbxdragstart=Ce(this,Fe,at).bind(this,e);e.container.onbxdrag=function(e,n){Ce(t,Re,rt).call(t,e,n)};e.container.onbxdraghover=function(e,n,i){Ce(t,qe,st).call(t,e,n,i)};e.container.onbxdragstop=Ce(this,Ge,ot).bind(this,e);jsDD.registerObject(e.container)}function at(e){var t=this;s.EventEmitter.emit(s.EventEmitter.GLOBAL_TARGET,"BX.Bitrix24.LeftMenuClass:onDragStart");if(!(e instanceof ce)&&e.container.parentNode.querySelectorAll("li.menu-item-block").length<=1&&Ce(this,De,Ze).call(this,e)!==null){e=Ce(this,De,Ze).call(this,e)}s.EventEmitter.emit(this,c.eventName("onDragModeOn"));this.dnd={container:this.container.parentNode,itemDomBlank:a.Dom.create("div",{style:{display:"none"}}),itemMoveBlank:a.Dom.create("div",{style:{height:e.container.offsetHeight+"px"}}),draggableBlock:a.Dom.create("div",{attrs:{className:"menu-draggable-wrap"},style:{top:[e.container.offsetTop-e.container.offsetHeight,"px"].join("")}}),item:e,oldParent:Ce(this,De,Ze).call(this,e),isHiddenContainerVisible:this.isHiddenContainerVisible()};Ce(this,Se,je).call(this,false);var n=function n(){babelHelpers.toConsumableArray(t.parentContainer.querySelectorAll("li.menu-item-block")).forEach((function(n){if(e instanceof ce&&Ce(t,De,Ze).call(t,t.items.get(n.getAttribute("data-id")))!==null){return}jsDD.registerDest(n,100)}));var i=t.parentContainer.querySelector("#left-menu-empty-item");if(e instanceof ne){jsDD.unregisterDest(i)}else{jsDD.registerDest(i,100)}jsDD.registerDest(t.parentContainer.querySelector("#left-menu-hidden-empty-item"),100);jsDD.registerDest(t.parentContainer.querySelector("#left-menu-hidden-separator"),100)};if(e instanceof ce){e.collapse(true).then((function(){if(t.dnd){t.dnd.pos=BX.pos(t.container.parentNode);n()}}))}else{n()}var i=e.container;a.Dom.addClass(this.dnd.container,"menu-drag-mode");a.Dom.addClass(i,"menu-item-draggable");i.parentNode.insertBefore(this.dnd.itemDomBlank,i);i.parentNode.insertBefore(this.dnd.itemMoveBlank,i);this.dnd.draggableBlock.appendChild(e.container);this.dnd.container.style.position="relative";this.dnd.container.appendChild(this.dnd.draggableBlock);this.dnd.pos=BX.pos(this.container.parentNode)}function rt(e,t){var n=this.dnd.item;var i=this.dnd.pos.height;t=Math.max(0,t-this.dnd.pos.top);this.dnd.draggableBlock.style.top=[Math.min(i-n.container.offsetHeight,t)-5,"px"].join("")}function st(e,t,n){var i=this.dnd.item;var r=i.container;if(e===r){this.dnd.itemDomBlank.parentNode.insertBefore(this.dnd.itemMoveBlank,this.dnd.itemDomBlank);return}if(e.id==="left-menu-empty-item"&&(r.getAttribute("data-type")==="self"||r.getAttribute("data-disable-first-item")==="Y")){return}if(e.getAttribute("data-role")==="group"){var s=e.parentNode.querySelector('[data-group-id="'.concat(e.getAttribute("data-id"),'"]'));if(e.getAttribute("data-collapse-mode")==="collapsed"){a.Dom.insertAfter(this.dnd.itemMoveBlank,s)}else if(i instanceof ce){a.Dom.insertBefore(this.dnd.itemMoveBlank,e)}else{a.Dom.prepend(this.dnd.itemMoveBlank,s.querySelector("ul"))}}else if(this.dnd.container.contains(e)){var o=e;if(i instanceof ce&&e.closest('[data-role="group-content"]')){o=e.closest('[data-role="group-content"]')}a.Dom.insertAfter(this.dnd.itemMoveBlank,o)}}function ot(){var e=this.dnd.item;console.log(e);var t=this.dnd.oldParent;var n=e.container;a.Dom.removeClass(this.dnd.container,"menu-drag-mode");a.Dom.removeClass(n,"menu-item-draggable");this.dnd.container.style.position="";var i=null;var r=false;if(this.parentContainer.querySelector(".menu-item-block")===e.container){if(e instanceof ne){i=a.Loc.getMessage("MENU_SELF_ITEM_FIRST_ERROR")}else if(e.container.getAttribute("data-disable-first-item")==="Y"){i=a.Loc.getMessage("MENU_FIRST_ITEM_ERROR")}}if(i!==null){this.dnd.itemDomBlank.parentNode.replaceChild(n,this.dnd.itemDomBlank);e.showMessage(i)}else if(!this.dnd.container.contains(this.dnd.itemMoveBlank)){this.dnd.itemDomBlank.parentNode.replaceChild(n,this.dnd.itemDomBlank)}else{try{this.dnd.itemMoveBlank.parentNode.replaceChild(n,this.dnd.itemMoveBlank);if(this.hiddenContainer.contains(n)){e.container.setAttribute("data-status","hide");if(this.dnd.itemDomBlank.closest("#left-menu-hidden-items-block")===null&&this.hiddenContainer.querySelectorAll(".menu-item-block").length===1){s.EventEmitter.emit(this,c.eventName("onHiddenBlockIsNotEmpty"))}}else{e.container.setAttribute("data-status","show");if(this.hiddenContainer.querySelectorAll(".menu-item-block").length<=0){r=true;s.EventEmitter.emit(this,c.eventName("onHiddenBlockIsEmpty"))}}if(e instanceof ce){e.checkAndCorrect().expand(true)}Ce(this,Le,Je).call(this,e,t);Ce(this,Ae,Ye).call(this,e);var o={action:"sortItem"};if(this.parentContainer.querySelector(".menu-item-block")===e.container&&!this.isExtranet){e.showMessage(a.Loc.getMessage("MENU_ITEM_MAIN_PAGE"));o.action="mainPage";o.itemId=e.getId()}Ce(this,xe,$e).call(this,o)}catch(e){this.dnd.itemDomBlank.parentNode.replaceChild(n,this.dnd.itemDomBlank)}}a.Dom.remove(this.dnd.draggableBlock);a.Dom.remove(this.dnd.itemDomBlank);a.Dom.remove(this.dnd.itemMoveBlank);jsDD.enableDest(n);this.container.style.position="static";if(!this.dnd.isHiddenContainerVisible||r===true){Ce(this,Te,Ve).call(this,false)}delete this.dnd;babelHelpers.toConsumableArray(this.parentContainer.querySelectorAll("li.menu-item-block")).forEach((function(e){jsDD.registerDest(e)}));var l=this.parentContainer.querySelector("#left-menu-empty-item");jsDD.unregisterDest(l);jsDD.unregisterDest(this.parentContainer.querySelector("#left-menu-hidden-empty-item"));jsDD.unregisterDest(this.parentContainer.querySelector("#left-menu-hidden-separator"));jsDD.refreshDestArea();s.EventEmitter.emit(this,c.eventName("onDragModeOff"))}var lt=function(e){babelHelpers.inherits(t,e);function t(e,n){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,n))}babelHelpers.createClass(t,[{key:"saveCurrentPage",value:function e(t){var n=this;return ee.saveCurrentPage(t).then((function(e){s.EventEmitter.emit(n,c.eventName("onItemHasBeenAdded"),e);return e}))["catch"](H.catchError)}},{key:"saveStandardPage",value:function e(t){var n=this;return ee.saveStandardPage(t).then((function(e){s.EventEmitter.emit(n,c.eventName("onItemHasBeenAdded"),e);return e}))["catch"](H.catchError)}},{key:"deleteCurrentPage",value:function e(t){var n=this;var i=t.pageLink;return ee.deleteCurrentPage({pageLink:i}).then((function(e){s.EventEmitter.emit(n,c.eventName("onItemHasBeenDeleted"),e);return e}))["catch"](H.catchError)}},{key:"deleteStandardPage",value:function e(t){var n=this;return ee.deleteStandardPage(t).then((function(e){s.EventEmitter.emit(n,c.eventName("onItemHasBeenDeleted"),e);return e}))["catch"](H.catchError)}},{key:"showAddToSelf",value:function e(t){var n=this;ne.showAdd(t).then((function(e){s.EventEmitter.emit(n,c.eventName("onItemHasBeenAdded"),e)}))["catch"](H.catchError)}}]);return t}(f);function ut(e,t,n){ct(e,t);t.set(e,n)}function ct(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var dt=new WeakMap;var mt=function(){function e(t){babelHelpers.classCallCheck(this,e);ut(this,dt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,dt,t?pt.ADMIN:pt.NOT_ADMIN)}babelHelpers.createClass(e,[{key:"sendSetCustomPreset",value:function e(){u.sendData({tool:bt,category:ht.MENU,event:ft.SET,type:"custom",c_section:vt.MENU,p1:babelHelpers.classPrivateFieldGet(this,dt)})}},{key:"sendSetPreset",value:function e(t,n,i){u.sendData({type:t,event:n?ft.CHANGE:ft.SELECT,tool:bt,category:n?ht.MENU:ht.TOOL,c_section:n?vt.MENU:vt.POPUP,c_element:i,p1:babelHelpers.classPrivateFieldGet(this,dt)})}},{key:"sendClose",value:function e(){u.sendData({event:ft.SHOW,tool:bt,category:ht.TOOL,c_section:vt.POPUP})}}]);return e}();var ht={TOOL:"main_tool",MENU:"main_menu"};var ft={SHOW:"window_show",SELECT:"select",CHANGE:"change",SET:"menu_set"};var pt={ADMIN:"isAdmin_Y",NOT_ADMIN:"isAdmin_N"};var vt={POPUP:"menu_popup",PRESET:"preset",QUALIFICATION:"qualification",SETTINGS:"settings",MENU:"main_menu"};var gt={CONFIRM:"confirm",LATER:"later",CLOSE:"close",SAVE:"save",SKIP:"skip"};var bt="intranet";function yt(e,t,n){kt(e,t);t.set(e,n)}function Et(e,t){kt(e,t);t.add(e)}function kt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ct(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var Mt=new WeakSet;var It=new WeakSet;var St=new WeakMap;var Tt=new WeakSet;var wt=function(){function e(t){babelHelpers.classCallCheck(this,e);Et(this,Tt);Et(this,It);Et(this,Mt);babelHelpers.defineProperty(this,"cache",new a.Cache.MemoryCache);babelHelpers.defineProperty(this,"scrollModeThreshold",20);babelHelpers.defineProperty(this,"lastScrollOffset",0);babelHelpers.defineProperty(this,"slidingModeTimeoutId",0);babelHelpers.defineProperty(this,"topMenuSelectedNode",null);babelHelpers.defineProperty(this,"topItemSelectedObj",null);babelHelpers.defineProperty(this,"isMenuMouseEnterBlocked",false);babelHelpers.defineProperty(this,"isMenuMouseLeaveBlocked",[]);babelHelpers.defineProperty(this,"isCollapsedMode",false);babelHelpers.defineProperty(this,"workgroupsCounterData",{});yt(this,St,{writable:true,value:0});this.menuContainer=document.getElementById("menu-items-block");if(!this.menuContainer){return false}t=babelHelpers["typeof"](t)==="object"?t:{};c.isExtranet=t.isExtranet==="Y";c.isMainPageEnabled=t.isMainPageEnabled==="Y";c.isAdmin=t.isAdmin;c.isCustomPresetRestricted=t.isCustomPresetAvailable!=="Y";c.availablePresetTools=t.availablePresetTools;c.settingsPath=t.settingsPath;this.isCollapsedMode=t.isCollapsedMode;this.workgroupsCounterData=t.workgroupsCounterData;this.analytics=new mt(t.isAdmin);this.initAndBindNodes();this.bindEvents();this.getItemsController();this.handleDocumentScroll()}babelHelpers.createClass(e,[{key:"initAndBindNodes",value:function e(){var t,n=this;this.menuContainer.addEventListener("dblclick",this.handleMenuDoubleClick.bind(this));this.menuContainer.addEventListener("mouseenter",this.handleMenuMouseEnter.bind(this));this.menuContainer.addEventListener("mouseleave",this.handleMenuMouseLeave.bind(this));this.menuContainer.addEventListener("transitionend",this.handleSlidingTransitionEnd.bind(this));this.menuHeader=this.menuContainer.querySelector(".menu-items-header");this.menuBody=this.menuContainer.querySelector(".menu-items-body");this.menuItemsBlock=this.menuContainer.querySelector(".menu-items");this.header=document.querySelector("#header");this.headerBurger=this.header.querySelector(".menu-switcher");var i=this.header.querySelector(".header-logo-block");this.headerSettings=this.header.querySelector(".header-logo-block-settings");if(this.headerSettings){i.addEventListener("mouseenter",this.handleHeaderLogoMouserEnter.bind(this));i.addEventListener("mouseleave",this.handleHeaderLogoMouserLeave.bind(this));this.menuHeader.addEventListener("mouseenter",this.handleHeaderLogoMouserEnter.bind(this));this.menuHeader.addEventListener("mouseleave",this.handleHeaderLogoMouserLeave.bind(this))}document.addEventListener("scroll",this.handleDocumentScroll.bind(this));this.mainTable=document.querySelector(".bx-layout-table");this.menuHeaderBurger=this.menuHeader.querySelector(".menu-switcher");this.menuHeaderBurger.addEventListener("click",this.handleBurgerClick.bind(this));this.menuHeader.querySelector(".menu-items-header-title").addEventListener("click",this.handleBurgerClick.bind(this,true));this.upButton=this.menuContainer.querySelector(".menu-btn-arrow-up");this.upButton.addEventListener("click",this.handleUpButtonClick.bind(this));this.menuMoreButton=this.menuContainer.querySelector(".menu-favorites-more-btn");this.menuMoreButton.addEventListener("click",this.handleShowHiddenClick.bind(this));var a=this.menuContainer.querySelector(".menu-help-btn");if(a){a.addEventListener("click",this.handleHelperClick.bind(this))}var r=this.menuContainer.querySelector(".menu-sitemap-btn");if(r){r.addEventListener("click",this.handleSiteMapClick.bind(this))}var s=this.menuContainer.querySelector(".menu-settings-save-btn");if(s){s.addEventListener("click",this.handleViewMode.bind(this))}(t=this.menuContainer.querySelector(".menu-settings-btn"))===null||t===void 0?void 0:t.addEventListener("click",(function(){n.getSettingsController().show()}))}},{key:"getItemsController",value:function e(){var t=this;return this.cache.remember("itemsController",(function(){return new We(t.menuContainer,{events:{EditMode:function e(){t.toggle(true);t.menuContainer.classList.add("menu-items-edit-mode");t.menuContainer.classList.remove("menu-items-view-mode")},ViewMode:function e(){t.toggle(true);t.menuContainer.classList.add("menu-items-view-mode");t.menuContainer.classList.remove("menu-items-edit-mode")},onDragModeOn:function e(n){var i=n.target;t.switchToSlidingMode(true);t.isMenuMouseLeaveBlocked.push("drag")},onDragModeOff:function e(n){var i=n.target;t.isMenuMouseLeaveBlocked.pop()},onHiddenBlockIsVisible:t.onHiddenBlockIsVisible.bind(t),onHiddenBlockIsHidden:t.onHiddenBlockIsHidden.bind(t),onHiddenBlockIsEmpty:t.onHiddenBlockIsEmpty.bind(t),onHiddenBlockIsNotEmpty:t.onHiddenBlockIsNotEmpty.bind(t),onShow:function e(){t.isMenuMouseLeaveBlocked.push("items")},onClose:function e(){t.isMenuMouseLeaveBlocked.pop()}}})}))}},{key:"getItemDirector",value:function e(){var t=this;return this.cache.remember("itemsCreator",(function(){return new lt(t.menuContainer,{events:{onItemHasBeenAdded:function e(n){var i=n.data;t.getItemsController().addItem(i)}}})}))}},{key:"getSettingsController",value:function e(){var t=this;return this.cache.remember("presetController",(function(){var e=t.menuContainer.querySelector(".menu-settings-btn");if(!e){return null}return new X(e,{events:{onGettingSettingMenuItems:t.onGettingSettingMenuItems.bind(t),onShow:function e(){t.isMenuMouseLeaveBlocked.push("settings")},onClose:function e(){t.isMenuMouseLeaveBlocked.pop()}}})}))}},{key:"getCustomPresetController",value:function e(){var t=this;return this.cache.remember("customPresetController",(function(){return new v(t.menuContainer,{events:{onPresetIsSet:function e(n){var i=n.data;var a=t.getItemsController()["export"](),r=a.saveSortItems,s=a.firstItemLink,o=a.customItems;if(!i){t.analytics.sendSetCustomPreset()}return F.setCustomPreset(i,r,o,s)},onShow:function e(){t.isMenuMouseLeaveBlocked.push("presets")},onClose:function e(){t.isMenuMouseLeaveBlocked.pop()}}})}))}},{key:"getDefaultPresetController",value:function e(){var t=this;var n=false;var i=function e(n){var i=F.postponeSystemPreset(n);s.EventEmitter.emit(t,c.eventName("onPresetIsPostponed"));return i};return this.cache.remember("defaultPresetController",(function(){var e=new O(t.menuContainer,{events:{onPresetIsSet:function e(i){var a=i.data,r=a.mode,s=a.presetId;t.analytics.sendSetPreset(s,r==="personal",gt.CONFIRM);n=true;return F.setSystemPreset(r,s)},onPresetIsPostponed:function a(r){var s=r.data.mode;t.analytics.sendSetPreset(e.getSelectedPreset(),s==="personal",gt.LATER);n=true;return i(s)},onShow:function e(){t.analytics.sendClose()},onClose:function a(){if(n!==true){t.analytics.sendSetPreset(e.getSelectedPreset(),e.getMode()==="personal",gt.CLOSE);i(e.getMode())}n=false}}});return e}))}},{key:"bindEvents",value:function e(){var t=this;BX.addCustomEvent("BX.Bitrix24.GroupPanel:onOpen",this.handleGroupPanelOpen.bind(this));BX.addCustomEvent("BX.Bitrix24.GroupPanel:onClose",this.handleGroupPanelClose.bind(this));BX.addCustomEvent("BX.Main.InterfaceButtons:onFirstItemChange",(function(e,n){if(!e||!a.Type.isDomNode(n)){return}var i=n.getAttribute("data-top-menu-id");var r=t.menuBody.querySelector('[data-top-menu-id="'.concat(i,'"]'));if(r){r.setAttribute("data-link",e);var s=r.querySelector("a.menu-item-link");if(s){s.setAttribute("href",e)}if(r.previousElementSibling===t.menuContainer.querySelector("#left-menu-empty-item")){F.setFirstPage(e)}else{F.clearCache()}}t.showMessage(n,a.Loc.getMessage("MENU_ITEM_MAIN_SECTION_PAGE"))}));BX.addCustomEvent("BX.Main.InterfaceButtons:onHideLastVisibleItem",(function(e){t.showMessage(e,a.Loc.getMessage("MENU_TOP_ITEM_LAST_HIDDEN"))}));BX.addCustomEvent("BX.Main.InterfaceButtons:onBeforeCreateEditMenu",(function(e,n,i){var r=Ct(t,Mt,At).call(t,n);if(!r&&n&&a.Type.isStringFilled(n.URL)&&!n.URL.match(/javascript:/)){e.addMenuItem({text:a.Loc.getMessage("MENU_ADD_TO_LEFT_MENU"),onclick:function e(i,a){t.getItemDirector().saveStandardPage(n);a.getMenuWindow().close()}})}else if(r instanceof ee){e.addMenuItem({text:a.Loc.getMessage("MENU_DELETE_FROM_LEFT_MENU"),onclick:function e(i,a){t.getItemDirector().deleteStandardPage(n);a.getMenuWindow().close()}})}}));top.BX.addCustomEvent("UI.Toolbar:onRequestMenuItemData",(function(e){var n=e.currentFullPath,i=e.context;if(a.Type.isStringFilled(n)){BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onSendMenuItemData",[{currentPageInMenu:t.menuContainer.querySelector('.menu-item-block[data-link="'.concat(n,'"]')),context:i}])}}));s.EventEmitter.subscribe("UI.Toolbar:onStarClick",(function(e){var n=babelHelpers.slicedToArray(e.compatData,1),i=n[0];if(i.isActive){t.getItemDirector().deleteCurrentPage({context:i.context,pageLink:i.pageLink}).then((function(e){var n=e.itemInfo;BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuItemDeleted",[n,t]);BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess",[{isActive:false,context:i.context}])}))}else{t.getItemDirector().saveCurrentPage({pageTitle:i.pageTitle,pageLink:i.pageLink}).then((function(e){var n=e.itemInfo;BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuItemAdded",[n,t]);BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess",[{isActive:true,context:i.context}])}))}}));s.EventEmitter.subscribe("BX.Main.InterfaceButtons:onBeforeResetMenu",(function(e){var t=babelHelpers.slicedToArray(e.compatData,1),n=t[0];n.push((function(){var e=new BX.Promise;F.clearCache().then((function(){e.fulfill()}),(function(t){e.reject("Error: "+t.errors[0].message)}));return e}))}))}},{key:"isEditMode",value:function e(){return this.getItemsController().isEditMode}},{key:"isCollapsed",value:function e(){return this.isCollapsedMode}},{key:"showMessage",value:function e(t,n,i){var a=r.PopupManager.create("left-menu-message",t,{content:'<div class="left-menu-message-popup">'+n+"</div>",darkMode:true,offsetTop:i==="right"?-45:2,offsetLeft:i==="right"?215:0,angle:i==="right"?{position:"left"}:true,cacheable:false,autoHide:true,events:{onDestroy:function e(){a=null}}});a.show();setTimeout((function(){if(a){a.close();a=null}}),3e3)}},{key:"showError",value:function e(t){this.showMessage(t,a.Loc.getMessage("edit_error"))}},{key:"showGlobalPreset",value:function e(){var t=this;l.BannerDispatcher.high.toQueue((function(e){var n=t.getDefaultPresetController();n.show("global");n.getPopup().subscribe("onAfterClose",(function(t){e()}))}))}},{key:"handleShowHiddenClick",value:function e(){this.getItemsController().toggleHiddenContainer(true)}},{key:"onHiddenBlockIsVisible",value:function e(){a.Dom.addClass(this.menuMoreButton,"menu-favorites-more-btn-open");this.menuMoreButton.querySelector("#menu-more-btn-text").innerHTML=a.Loc.getMessage("more_items_hide")}},{key:"onHiddenBlockIsHidden",value:function e(){a.Dom.removeClass(this.menuMoreButton,"menu-favorites-more-btn-open");this.menuMoreButton.querySelector("#menu-more-btn-text").innerHTML=a.Loc.getMessage("more_items_show")}},{key:"onHiddenBlockIsEmpty",value:function e(){a.Dom.addClass(this.menuMoreButton,"menu-favorites-more-btn-hidden")}},{key:"onHiddenBlockIsNotEmpty",value:function e(){a.Dom.removeClass(this.menuMoreButton,"menu-favorites-more-btn-hidden")}},{key:"setDefaultMenu",value:function e(){o.MessageBox.show({message:a.Loc.getMessage("MENU_SET_DEFAULT_CONFIRM"),onYes:function e(t,n){n.setWaiting();F.setDefaultPreset().then((function(){n.setWaiting(false);t.close();document.location.reload()}))},buttons:o.MessageBoxButtons.YES_CANCEL})}},{key:"clearCompositeCache",value:function e(){a.ajax.runAction("intranet.leftmenu.clearCache",{data:{}})}},{key:"onGettingSettingMenuItems",value:function e(){var t=this;var n=ee.getActiveTopMenuItem();var i=null;if(n){var r=this.menuContainer.querySelector('.menu-item-block[data-link="'.concat(n["URL"],'"]'));if(!r){i={text:a.Loc.getMessage("MENU_ADD_TO_LEFT_MENU"),onclick:function e(i,a){t.getItemDirector().saveStandardPage(n);a.getMenuWindow().destroy()}}}else if(r.getAttribute("data-type")===ee.code){i={text:a.Loc.getMessage("MENU_DELETE_FROM_LEFT_MENU"),onclick:function e(i,a){t.getItemDirector().deleteStandardPage(n);a.getMenuWindow().destroy()}}}else{i={text:a.Loc.getMessage("MENU_DELETE_PAGE_FROM_LEFT_MENU"),className:"menu-popup-disable-text",onclick:function e(){}}}}var s=[{text:a.Loc.getMessage("SORT_ITEMS"),onclick:function e(){t.getItemsController().switchToEditMode()}},{text:this.isCollapsed()?a.Loc.getMessage("MENU_EXPAND"):a.Loc.getMessage("MENU_COLLAPSE"),onclick:function e(n,i){t.toggle();i.getMenuWindow().destroy()}},i,{text:a.Loc.getMessage("MENU_ADD_SELF_PAGE"),onclick:function e(n,i){t.getItemDirector().showAddToSelf(t.getSettingsController().getContainer())}},c.isExtranet?null:{text:a.Loc.getMessage("MENU_SET_DEFAULT2"),onclick:function e(){t.getDefaultPresetController().show("personal")}},c.isExtranet?null:{text:a.Loc.getMessage("MENU_SET_DEFAULT"),onclick:this.setDefaultMenu.bind(this)}];if(c.isAdmin){var o=a.Loc.getMessage("MENU_SAVE_CUSTOM_PRESET");if(c.isCustomPresetRestricted){o+="<span class='menu-lock-icon'></span>"}s.push({html:o,className:c.isCustomPresetRestricted?" menu-popup-disable-text":"",onclick:function e(n,i){if(c.isCustomPresetRestricted){BX.UI.InfoHelper.show("limit_office_menu_to_all")}else{t.getCustomPresetController().show()}}});if(c.settingsPath){s.push({html:a.Loc.getMessage("MENU_EDIT_TOOLS"),onclick:function e(){BX.SidePanel.Instance.open("".concat(c.settingsPath,"?analyticContext=left_menu&page=tools"),{allowChangeHistory:false,width:1034})}})}}return s.filter((function(e){return e!==null}))}},{key:"handleSiteMapClick",value:function e(){this.switchToSlidingMode(false);BX.SidePanel.Instance.open((a.Loc.getMessage("SITE_DIR")||"/")+"sitemap/",{allowChangeHistory:false,customLeftBoundary:0})}},{key:"handleHelperClick",value:function e(){this.switchToSlidingMode(false);BX.Helper.show()}},{key:"blockSliding",value:function e(){this.stopSliding();this.isMenuMouseEnterBlocked=true}},{key:"releaseSliding",value:function e(){this.isMenuMouseEnterBlocked=false}},{key:"stopSliding",value:function e(){clearTimeout(this.slidingModeTimeoutId);this.slidingModeTimeoutId=0}},{key:"startSliding",value:function e(){this.stopSliding();if(this.isMenuMouseEnterBlocked===true){return}this.slidingModeTimeoutId=setTimeout(function(){this.slidingModeTimeoutId=0;this.switchToSlidingMode(true)}.bind(this),400)}},{key:"handleBurgerClick",value:function e(t){this.getItemsController().switchToViewMode();this.menuHeaderBurger.classList.add("menu-switcher-hover");this.toggle(t,function(){this.blockSliding();setTimeout(function(){this.menuHeaderBurger.classList.remove("menu-switcher-hover");this.releaseSliding()}.bind(this),100)}.bind(this))}},{key:"handleMenuMouseEnter",value:function e(t){if(!this.isCollapsed()){return}this.startSliding()}},{key:"handleMenuMouseLeave",value:function e(t){this.stopSliding();if(this.isMenuMouseLeaveBlocked.length<=0){this.switchToSlidingMode(false)}}},{key:"handleMenuDoubleClick",value:function e(t){if(t.target===this.menuBody){this.toggle()}}},{key:"handleHeaderLogoMouserEnter",value:function e(t){BX.addClass(this.headerSettings,"header-logo-block-settings-show")}},{key:"handleHeaderLogoMouserLeave",value:function e(t){if(!this.headerSettings.hasAttribute("data-rename-portal")){BX.removeClass(this.headerSettings,"header-logo-block-settings-show")}}},{key:"handleUpButtonClick",value:function e(){this.blockSliding();if(this.isUpButtonReversed()){window.scrollTo(0,this.lastScrollOffset);this.lastScrollOffset=0;this.unreverseUpButton()}else{this.lastScrollOffset=window.pageYOffset;window.scrollTo(0,0);this.reverseUpButton()}setTimeout(this.releaseSliding.bind(this),100)}},{key:"handleUpButtonMouseLeave",value:function e(){this.releaseSliding()}},{key:"handleDocumentScroll",value:function e(){Ct(this,Tt,Pt).call(this);this.applyScrollMode();if(window.pageYOffset>document.documentElement.clientHeight){this.showUpButton();if(this.isUpButtonReversed()){this.unreverseUpButton();this.lastScrollOffset=0}}else if(!this.isUpButtonReversed()){this.hideUpButton()}if(window.pageXOffset>0){this.menuContainer.style.left=-window.pageXOffset+"px";this.upButton.style.left=-window.pageXOffset+(this.isCollapsed()?0:172)+"px"}else{this.menuContainer.style.removeProperty("left");this.upButton.style.removeProperty("left")}}},{key:"switchToSlidingMode",value:function e(t,n){if(t===false){this.stopSliding();if(BX.hasClass(this.mainTable,"menu-sliding-mode")){if(n!==true){BX.addClass(this.mainTable,"menu-sliding-closing-mode")}BX.removeClass(this.mainTable,"menu-sliding-mode menu-sliding-opening-mode")}}else if(this.isCollapsedMode&&!BX.hasClass(this.mainTable,"menu-sliding-mode")){BX.removeClass(this.mainTable,"menu-sliding-closing-mode");if(n!==true){BX.addClass(this.mainTable,"menu-sliding-opening-mode")}BX.addClass(this.mainTable,"menu-sliding-mode")}}},{key:"handleSlidingTransitionEnd",value:function e(t){if(t.target===this.menuContainer){BX.removeClass(this.mainTable,"menu-sliding-opening-mode menu-sliding-closing-mode")}}},{key:"switchToScrollMode",value:function e(t){if(t===false){this.mainTable.classList.remove("menu-scroll-mode")}else if(!this.mainTable.classList.contains("menu-scroll-mode")){this.mainTable.classList.add("menu-scroll-mode")}}},{key:"switchToLogoMaskMode",value:function e(t){if(!Ct(this,It,Lt).call(this)){return}if(t===false){this.mainTable.classList.remove("menu-logo-mask-mode")}else if(!this.mainTable.classList.contains("menu-logo-mask-mode")){this.mainTable.classList.add("menu-logo-mask-mode")}}},{key:"toggle",value:function e(t,n){var i=BX("layout-left-column");if(!i){return}var a=!this.mainTable.classList.contains("menu-collapsed-mode");if(t===a||this.mainTable.classList.contains("menu-animation-mode")){return}BX.onCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuToggle",[t,this]);var r=this.menuHeader.querySelector(".logo-image-container");if(r){var s=this.header.querySelector(".logo-image-container").offsetWidth;if(s>0){r.style.width=s+"px"}}this.blockSliding();this.switchToSlidingMode(false,true);this.applyScrollMode();i.style.overflow="hidden";this.mainTable.classList.add("menu-animation-mode",a?"menu-animation-closing-mode":"menu-animation-opening-mode");var o=[].slice.call(i.querySelectorAll(".menu-item-link"));var l=i.querySelector(".menu-collapsed-more-btn");var u=i.querySelector(".menu-default-more-btn");var c=i.querySelector(".menu-sitemap-icon-box");var d=i.querySelector(".menu-sitemap-btn-text");var m=i.querySelector(".menu-invite-employees-text");var h=i.querySelector(".menu-invite-icon-box");var f=i.querySelector(".menu-license-all-container");var p=i.querySelector(".menu-license-all-default");var v=p?p.offsetHeight:0;var g=i.querySelector(".menu-license-all-collapsed");var b=this.menuContainer.querySelector(".menu-settings-icon-box");var y=this.menuContainer.querySelector(".menu-settings-btn-text");var E=this.menuContainer.querySelector(".menu-help-icon-box");var k=this.menuContainer.querySelector(".menu-help-btn-text");var C=i.querySelector(".menu-item-separator");var M=i.querySelector(".menu-item-index-more");var I=this.mainTable.querySelector(".page-header");var S=document.getElementById("bx-im-bar");var T=S?S.offsetWidth:0;new BX.easing({duration:300,start:{translateIcon:a?-100:0,translateText:a?0:-100,translateMoreBtn:a?0:-84,translateLicenseBtn:a?0:-100,heightLicenseBtn:a?v:40,burgerMenuWidth:a?33:66,sidebarWidth:a?240:66,opacity:a?100:0,opacityRevert:a?0:100},finish:{translateIcon:a?0:-100,translateText:a?-100:-18,translateMoreBtn:a?-84:0,translateLicenseBtn:a?-100:0,heightLicenseBtn:a?40:v,burgerMenuWidth:a?66:33,sidebarWidth:a?66:240,opacity:a?0:100,opacityRevert:a?100:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(e){i.style.width=e.sidebarWidth+"px";this.menuContainer.style.width=e.sidebarWidth+"px";this.menuHeaderBurger.style.width=e.burgerMenuWidth+"px";this.headerBurger.style.width=e.burgerMenuWidth+"px";if(I){I.style.maxWidth="calc(100vw - "+e.sidebarWidth+"px - "+T+"px)"}if(a){if(c){c.style.transform="translateX("+e.translateIcon+"px)";c.style.opacity=e.opacityRevert/100}if(d){d.style.transform="translateX("+e.translateText+"px)";d.style.opacity=e.opacity/100}if(h){h.style.transform="translateX("+e.translateIcon+"px)";h.style.opacity=e.opacityRevert/100}if(m){m.style.transform="translateX("+e.translateText+"px)";m.style.opacity=e.opacity/100}if(b){b.style.transform="translateX("+e.translateIcon+"px)";b.style.opacity=e.opacityRevert/100}if(y){y.style.transform="translateX("+e.translateText+"px)";y.style.opacity=e.opacity/100}E.style.transform="translateX("+e.translateIcon+"px)";E.style.opacity=e.opacityRevert/100;k.style.transform="translateX("+e.translateText+"px)";k.style.opacity=e.opacity/100;l.style.transform="translateX("+e.translateIcon+"px)";l.style.opacity=e.opacityRevert/100;u.style.transform="translateX("+e.translateMoreBtn+"px)";u.style.opacity=e.opacity/100;if(M){M.style.transform="translateX("+e.translateIcon+"px)";M.style.opacity=e.opacityRevert/100}if(f){p.style.transform="translateX("+e.translateLicenseBtn+"px)";p.style.opacity=e.opacity/100;p.style.height=e.heightLicenseBtn+"px";g.style.transform="translateX("+e.translateIcon+"px)";g.style.opacity=e.opacityRevert/100}o.forEach((function(t){var n=t.querySelector(".menu-item-icon-box");var i=t.querySelector(".menu-item-link-text");var a=t.querySelector(".menu-item-index");var r=t.querySelector(".menu-item-link-arrow");i.style.transform="translateX("+e.translateText+"px)";i.style.opacity=e.opacity/100;n.style.transform="translateX("+e.translateIcon+"px)";n.style.opacity=e.opacityRevert/100;if(r){r.style.transform="translateX("+e.translateText+"px)";r.style.opacity=e.opacity/100}if(a){a.style.transform="translateX("+e.translateIcon+"px)";a.style.opacity=e.opacityRevert/100}}))}else{C.style.opacity=0;if(c){c.style.transform="translateX("+e.translateIcon+"px)";c.style.opacity=e.opacityRevert/100}if(d){d.style.transform="translateX("+e.translateText+"px)";d.style.opacity=e.opacity/100}if(h){h.style.transform="translateX("+e.translateIcon+"px)";h.style.opacity=e.opacityRevert/100}if(m){m.style.transform="translateX("+e.translateText+"px)";m.style.opacity=e.opacity/100}if(b){b.style.transform="translateX("+e.translateIcon+"px)";b.style.opacity=e.opacityRevert/100}if(y){y.style.transform="translateX("+e.translateText+"px)";y.style.opacity=e.opacity/100}E.style.transform="translateX("+e.translateIcon+"px)";E.style.opacity=e.opacityRevert/100;k.style.transform="translateX("+e.translateText+"px)";k.style.opacity=e.opacity/100;l.style.transform="translateX("+e.translateIcon+"px)";l.style.opacity=e.opacityRevert/100;u.style.transform="translateX("+e.translateMoreBtn+"px)";u.style.opacity=e.opacity/100;if(M){M.style.transform="translateX("+e.translateText+"px)"}if(f){p.style.transform="translateX("+e.translateLicenseBtn+"px)";p.style.opacity=e.opacity/100;p.style.height=e.heightLicenseBtn+"px";g.style.transform="translateX("+e.translateIcon+"px)";g.style.opacity=e.opacityRevert/100}o.forEach((function(t){var n=t.querySelector(".menu-item-icon-box");var i=t.querySelector(".menu-item-link-text");var a=t.querySelector(".menu-item-index");var r=t.querySelector(".menu-item-link-arrow");i.style.transform="translateX("+e.translateText+"px)";i.style.opacity=e.opacity/100;i.style.display="inline-block";n.style.transform="translateX("+e.translateIcon+"px)";n.style.opacity=e.opacityRevert/100;if(r){r.style.transform="translateX("+e.translateText+"px)"}if(a){a.style.transform="translateX("+e.translateText+"px)"}}))}var t=document.createEvent("Event");t.initEvent("resize",true,true);window.dispatchEvent(t)}.bind(this),complete:function(){if(a){this.isCollapsedMode=true;BX.addClass(this.mainTable,"menu-collapsed-mode")}else{this.isCollapsedMode=false;BX.removeClass(this.mainTable,"menu-collapsed-mode")}BX.removeClass(this.mainTable,"menu-animation-mode menu-animation-opening-mode menu-animation-closing-mode");var e=[i,C,this.menuHeaderBurger,this.headerBurger,b,y,E,k,u,l,r,c,d,h,m,M,p,g,this.menuContainer,I];e.forEach((function(e){if(e){e.style.cssText=""}}));o.forEach((function(e){var t=e.querySelector(".menu-item-icon-box");var n=e.querySelector(".menu-item-link-text");var i=e.querySelector(".menu-item-index");var a=e.querySelector(".menu-item-link-arrow");e.style.cssText="";n.style.cssText="";t.style.cssText="";if(a){a.style.cssText=""}if(i){i.style.cssText=""}}));this.releaseSliding();Ct(this,Tt,Pt).call(this);if(BX.type.isFunction(n)){n()}F.toggleMenu(a);var t=document.createEvent("Event");t.initEvent("resize",true,true);window.dispatchEvent(t)}.bind(this)}).animate()}},{key:"handleViewMode",value:function e(){this.getItemsController().switchToViewMode()}},{key:"applyScrollMode",value:function e(){this.switchToLogoMaskMode(true);var t=this.scrollModeThreshold+H.adminPanel.height;this.switchToScrollMode(window.pageYOffset>t)}},{key:"handleGroupPanelOpen",value:function e(){this.isMenuMouseLeaveBlocked.push("group")}},{key:"handleGroupPanelClose",value:function e(){this.isMenuMouseLeaveBlocked.pop()}},{key:"showUpButton",value:function e(){this.menuContainer.classList.add("menu-up-button-active")}},{key:"hideUpButton",value:function e(){this.menuContainer.classList.remove("menu-up-button-active")}},{key:"reverseUpButton",value:function e(){this.menuContainer.classList.add("menu-up-button-reverse")}},{key:"unreverseUpButton",value:function e(){this.menuContainer.classList.remove("menu-up-button-reverse")}},{key:"isUpButtonReversed",value:function e(){return this.menuContainer.classList.contains("menu-up-button-reverse")}},{key:"isDefaultTheme",value:function e(){return document.body.classList.contains("bitrix24-default-theme")}},{key:"getTopPadding",value:function e(){return this.isDefaultTheme()?0:9}},{key:"initPagetitleStar",value:function e(){return ee.isCurrentPageStandard(ee.getActiveTopMenuItem())}},{key:"getStructureForHelper",value:function e(){var t=this;var n={menu:{}};["show","hide"].forEach((function(e){Array.from(t.menuContainer.querySelectorAll('[data-status="'.concat(e,'"][data-type="').concat(se.code,'"]'))).forEach((function(t){n[e]=n[e]||[];n[e].push(t.getAttribute("data-id"))}))}));return n}},{key:"showItemWarning",value:function e(t){var n=t.itemId,i=t.title,a=t.events;if(this.getItemsController().items.has(n)){this.getItemsController().items.get(n).showWarning(i,a)}}},{key:"removeItemWarning",value:function e(t){if(this.getItemsController().items.has(t)){this.getItemsController().items.get(t).removeWarning()}}},{key:"decrementCounter",value:function e(t,n){if(!t||t.id!=="menu-counter-live-feed"){return}babelHelpers.classPrivateFieldSet(this,St,babelHelpers.classPrivateFieldGet(this,St)+parseInt(n));this.getItemsController().decrementCounter({"live-feed":parseInt(n)})}},{key:"updateCounters",value:function e(t,n){if(!t){return}if(t["**"]!==undefined){t["live-feed"]=t["**"];delete t["**"]}var i=false;if(!a.Type.isUndefined(t["**SG0"])){this.workgroupsCounterData["livefeed"]=t["**SG0"];delete t["**SG0"];i=true}if(!a.Type.isUndefined(t[a.Loc.getMessage("COUNTER_PROJECTS_MAJOR")])){this.workgroupsCounterData[a.Loc.getMessage("COUNTER_PROJECTS_MAJOR")]=t[a.Loc.getMessage("COUNTER_PROJECTS_MAJOR")];delete t[a.Loc.getMessage("COUNTER_PROJECTS_MAJOR")];i=true}if(!a.Type.isUndefined(t[a.Loc.getMessage("COUNTER_SCRUM_TOTAL_COMMENTS")])){this.workgroupsCounterData[a.Loc.getMessage("COUNTER_SCRUM_TOTAL_COMMENTS")]=t[a.Loc.getMessage("COUNTER_SCRUM_TOTAL_COMMENTS")];delete t[a.Loc.getMessage("COUNTER_SCRUM_TOTAL_COMMENTS")];i=true}if(i){t["workgroups"]=Object.entries(this.workgroupsCounterData).reduce((function(e,t){var n=babelHelpers.slicedToArray(t,2),i=n[1];return e+Number(i)}),0)}if(t["live-feed"]){if(t["live-feed"]<=0){babelHelpers.classPrivateFieldSet(this,St,0)}else{t["live-feed"]-=babelHelpers.classPrivateFieldGet(this,St)}}this.getItemsController().updateCounters(t,n)}}]);return e}();function At(e){var t;var n=e.DATA_ID,i=e.NODE;var a=this.getItemsController().items.get(n);if(!a){var r=i.getAttribute("data-top-menu-id");if(i===i.parentNode.querySelector("[data-top-menu-id]")){var s=this.menuItemsBlock.querySelector('[data-top-menu-id="'.concat(r,'"]'));if(s){a=this.getItemsController().items.get(s.getAttribute("data-id"))}}}return(t=a)!==null&&t!==void 0?t:null}function Lt(){var e=this;return this.cache.remember("isLogoMaskNeeded",(function(){var t=e.menuHeader.querySelector(".logo");var n=false;if(t&&!t.querySelector(".logo-image-container")){var i=t.offsetWidth===0?e.header.querySelector(".logo")?e.header.querySelector(".logo").offsetWidth:0:t.offsetWidth;n=i>200}return n}))}function Pt(){var e=this;if(!this["menuAdjustAdminPanel"]){this["menuAdjustAdminPanel"]=function(t){var n=t.data;e.menuContainer.style.top=[n,"px"].join("")};s.EventEmitter.subscribe(H.adminPanel,c.eventName("onPanelHasChanged"),this["menuAdjustAdminPanel"])}this.menuContainer.style.top=[H.adminPanel.top,"px"].join("")}e.Menu=wt})(this.BX.Intranet=this.BX.Intranet||{},BX.UI,BX,BX.Messenger.v2.Lib,BX,BX.Main,BX.Event,BX.UI.Dialogs,BX.UI,BX.UI.Analytics);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:90:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/map.min.js?174556412411182";s:6:"source";s:70:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/map.js";s:3:"min";s:74:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/map.min.js";s:3:"map";s:74:"/bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/map.map.js";}"*/
BX.namespace("BX.Bitrix24");BX.Bitrix24.SlidingPanel=function(t){this.containerClassName=this.containerClassName||"sliding-panel-window";this.container=BX.create("div",{props:{className:this.containerClassName}});this.overlayClassName=this.overlayClassName||"sliding-panel-overlay";this.overlay=BX.create("div",{props:{className:this.overlayClassName}});this.isOpen=false;this.header=BX("header");this.menuItems=BX("menu-items-block");this.imBar=BX("bx-im-bar");this.panel=BX("panel");this.creatorConfirmedPanel=BX("creatorconfirmed");this.animation=null;this.startParams=this.startParams||{};this.endParams=this.endParams||{};this.currentParams=null;BX.bind(this.container,"click",this.onContainerClick.bind(this));BX.addCustomEvent("onTopPanelCollapse",this.onTopPanelCollapse.bind(this))};BX.Bitrix24.SlidingPanel.prototype={animateStep:function(t){},setContent:function(){},open:function(){if(this.isOpen){return}this.isOpen=true;BX.bind(document,"keyup",BX.proxy(this.onDocumentKeyUp,this));BX.bind(document,"click",BX.proxy(this.onDocumentClick,this));this.header.addEventListener("click",BX.proxy(this.onHeaderClick,this),true);if(!this.overlay.parentNode){document.body.appendChild(this.overlay);BX.ZIndexManager.register(this.overlay)}BX.ZIndexManager.bringToFront(this.overlay);const t=BX.SidePanel.Instance.getToolbar();if(t!==null){t.mute()}if(!this.container.parentNode){this.setContent();this.overlay.appendChild(this.container)}var i=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=i+"px";BX.Dom.style(document.body,"--scroll-shift-width",`${i}px`);if(this.imBar){this.imBar.style.right=i+"px"}if(this.panel){this.panel.style.zIndex=3001}if(this.creatorConfirmedPanel){this.creatorConfirmedPanel.style.zIndex=3e3}document.body.style.overflow="hidden";this.adjustPosition();if(this.animation){this.animation.stop()}this.animation=new BX.easing({duration:300,start:this.currentParams?this.currentParams:this.startParams,finish:this.endParams,transition:BX.easing.transitions.linear,step:BX.proxy((function(t){this.currentParams=t;this.animateStep(t)}),this),complete:BX.proxy((function(){this.onTrasitionEnd()}),this)});this.animation.animate()},close:function(t){if(!this.isOpen){if(this.animation){this.animation.stop(true)}return}this.isOpen=false;BX.unbind(document,"keyup",BX.proxy(this.onDocumentKeyUp,this));BX.unbind(document,"click",BX.proxy(this.onDocumentClick,this));this.header.removeEventListener("click",BX.proxy(this.onHeaderClick,this),true);this.container.classList.remove(this.containerClassName+"-open");const i=BX.SidePanel.Instance.getToolbar();if(i!==null){i.unmute()}if(this.animation){this.animation.stop()}if(t===true){this.currentParams=this.startParams;this.onTrasitionEnd()}else{this.animation=new BX.easing({duration:300,start:this.currentParams,finish:this.startParams,transition:BX.easing.transitions.linear,step:BX.proxy((function(t){this.currentParams=t;this.animateStep(t)}),this),complete:BX.proxy((function(){this.onTrasitionEnd()}),this)});this.animation.animate()}},adjustPosition:function(){var t=BX.pos(this.menuItems);var i=window.pageYOffset||document.documentElement.scrollTop;if(i>0){this.overlay.style.bottom=-i+"px"}var e=i>t.top?i:t.top;this.overlay.style.top=e+"px"},onTrasitionEnd:function(){this.animation=null;if(this.isOpen){this.currentParams=this.endParams;this.container.classList.add(this.containerClassName+"-open")}else{this.currentParams=this.startParams;if(this.overlay.parentNode){BX.ZIndexManager.unregister(this.overlay);this.overlay.parentNode.removeChild(this.overlay)}if(this.imBar){this.imBar.style.right=""}if(this.panel){this.panel.style.cssText=""}if(this.creatorConfirmedPanel){this.creatorConfirmedPanel.style.cssText=""}document.body.style.cssText="";this.container.style.cssText="";this.header.style.cssText="";this.overlay.style.cssText="";BX.Dom.style(document.body,"--scroll-shift-width",null)}},onContainerClick:function(t){t.stopPropagation()},onDocumentKeyUp:function(t){if(t.keyCode===27){this.close()}},onDocumentClick:function(t){if(BX.isParentForNode(this.container,t.target)){return}this.close()},onHeaderClick:function(t){if(this.isOpen&&t.target.className.match(/help-/)){this.close(true)}},onTopPanelCollapse:function(){if(this.isOpen){this.adjustPosition()}}};BX.Bitrix24.GroupPanel=function(t){this.containerClassName="group-panel-window";this.overlayClassName="group-panel-overlay";this.startParams={translateX:-100,opacity:0};this.endParams={translateX:0,opacity:65};BX.Bitrix24.SlidingPanel.apply(this,arguments);t=t||{};this.ajaxPath=BX.type.isNotEmptyString(t.ajaxPath)?t.ajaxPath:null;this.siteId=BX.type.isNotEmptyString(t.siteId)?t.siteId:BX.message("SITE_ID");this.menu=BX("menu-all-groups-link");this.leftMenu=BX("menu-items-block");this.content=BX("group-panel-content");this.items=BX("group-panel-items");this.counter=BX("group-panel-header-filter-counter");var i=this.items.getElementsByClassName("group-panel-item-intranet");var e=this.items.getElementsByClassName("group-panel-item-extranet");if(i.length<=20&&e.length<=20){BX.addClass(this.container,"group-panel-window-one-column")}this.closeLink=BX("group-panel-close-link");this.filters=[].slice.call(this.content.getElementsByClassName("group-panel-header-filter"));for(var n=0;n<this.filters.length;n++){var s=this.filters[n];BX.bind(s,"click",BX.proxy(this.onFilterClick,this))}BX.bind(this.items,"click",this.onItemsClick.bind(this));BX.bind(this.closeLink,"click",this.close.bind(this));BX.bind(this.menu,"click",this.onMenuClick.bind(this));var a=function(){this.close(true)}.bind(this);BX.addCustomEvent("BX.Bitrix24.Map:onBeforeOpen",a);BX.addCustomEvent("BX.Bitrix24.LeftMenuClass:onDragStart",a);BX.addCustomEvent("BX.Bitrix24.LeftMenuClass:onMenuToggle",a)};BX.Bitrix24.GroupPanel.prototype=Object.create(BX.Bitrix24.SlidingPanel.prototype);BX.Bitrix24.GroupPanel.prototype.constructor=BX.Bitrix24.GroupPanel;BX.Bitrix24.GroupPanel.prototype.super=BX.Bitrix24.SlidingPanel.prototype;BX.Bitrix24.GroupPanel.prototype.setContent=function(){this.container.appendChild(this.content)};BX.Bitrix24.GroupPanel.prototype.animateStep=function(t){this.container.style.transform="translateX("+t.translateX+"%)";this.overlay.style.backgroundColor="rgba(0, 0, 0, "+t.opacity/100+")"};BX.Bitrix24.GroupPanel.prototype.open=function(){BX.onCustomEvent("BX.Bitrix24.GroupPanel:onBeforeOpen",[this]);if(window.pulse_loading&&window.pulse_loading.open){window.pulse_loading.close(true)}this.container.style.display="block";BX.addClass(this.menu.parentNode,"menu-item-block-hover");this.menu.innerHTML=BX.message("menu_hide");var t=BX.pos(this.leftMenu);this.overlay.style.left=t.right+"px";this.super.open.apply(this,arguments);BX.onCustomEvent("BX.Bitrix24.GroupPanel:onOpen",[this])};BX.Bitrix24.GroupPanel.prototype.close=function(){BX.onCustomEvent("BX.Bitrix24.GroupPanel:onBeforeClose",[this]);this.menu.innerHTML=BX.message("menu_show");this.super.close.apply(this,arguments);BX.onCustomEvent("BX.Bitrix24.GroupPanel:onClose",[this])};BX.Bitrix24.GroupPanel.prototype.onTrasitionEnd=function(){this.super.onTrasitionEnd.apply(this,arguments);if(!this.isOpen){this.leftMenu.style.removeProperty("z-index");BX.removeClass(this.menu.parentNode,"menu-item-block-hover")}};BX.Bitrix24.GroupPanel.prototype.onMenuClick=function(t){if(this.isOpen){this.close()}else{this.open()}t.stopPropagation()};BX.Bitrix24.GroupPanel.prototype.onFilterClick=function(t){var i=BX.type.isDomNode(BX.proxy_context)?BX.proxy_context:null;var e=this.content.dataset.filter?this.content.dataset.filter:"all";var n=i.dataset.filter?i.dataset.filter:"all";if(e!==n){this.content.dataset.filter=n;this.saveFilter(n);new BX.easing({duration:50,start:{opacity:1},finish:{opacity:0},transition:BX.easing.transitions.linear,step:BX.delegate((function(t){this.items.style.opacity=t.opacity/100}),this),complete:BX.delegate((function(){BX.removeClass(this.content,"group-panel-content-"+e);BX.addClass(this.content,"group-panel-content-"+n);new BX.easing({duration:50,start:{opacity:0},finish:{opacity:1},transition:BX.easing.transitions.linear,step:BX.delegate((function(t){this.items.style.opacity=t.opacity/100}),this),complete:BX.delegate((function(){this.items.style.cssText=""}),this)}).animate()}),this)}).animate()}t.stopPropagation()};BX.Bitrix24.GroupPanel.prototype.onItemsClick=function(t){if(!BX.hasClass(t.target,"group-panel-item-star")){return}var i=t.target;var e=i.parentNode;var n=e.dataset.id;var s=BX.hasClass(e,"group-panel-item-favorite")?"removeFromFavorites":"addToFavorites";BX.toggleClass(e,"group-panel-item-favorite");this.animateStart(i);this.animateCounter(s==="addToFavorites");BX.ajax.runAction("intranet.leftmenu."+s,{data:{groupId:n}});t.preventDefault()};BX.Bitrix24.GroupPanel.prototype.animateStart=function(t){var i=t.cloneNode();i.style.marginLeft="-"+t.offsetWidth+"px";t.parentNode.appendChild(i);new BX.easing({duration:200,start:{opacity:100,scale:100},finish:{opacity:0,scale:300},transition:BX.easing.transitions.linear,step:function(t){i.style.transform="scale("+t.scale/100+")";i.style.opacity=t.opacity/100},complete:function(){i.parentNode.removeChild(i)}}).animate()};BX.Bitrix24.GroupPanel.prototype.animateCounter=function(t){this.counter.innerHTML=t===false?"-1":"+1";new BX.easing({duration:400,start:{opacity:100,top:0},finish:{opacity:0,top:-20},transition:BX.easing.transitions.linear,step:function(t){this.counter.style.top=t.top+"px";this.counter.style.opacity=t.opacity/100}.bind(this),complete:function(){this.counter.style.cssText=""}.bind(this)}).animate()};BX.Bitrix24.GroupPanel.prototype.saveFilter=function(t){if(!this.ajaxPath||!BX.type.isNotEmptyString(t)){return}BX.ajax.runAction("intranet.leftmenu.setGroupFilter",{data:{filter:t}})};BX.Bitrix24.Map=function(t){this.containerClassName="sitemap-window";this.overlayClassName="sitemap-window-overlay";this.startParams={translateY:-100,opacity:0};this.endParams={translateY:0,opacity:65};BX.Bitrix24.SlidingPanel.apply(this,arguments);this.menu=BX("sitemap-menu");this.content=BX("sitemap-content");this.closeLink=BX("sitemap-close-link");BX.bind(this.menu,"click",this.onMenuClick.bind(this));BX.bind(this.closeLink,"click",this.close.bind(this))};BX.Bitrix24.Map.prototype=Object.create(BX.Bitrix24.SlidingPanel.prototype);BX.Bitrix24.Map.prototype.constructor=BX.Bitrix24.Map;BX.Bitrix24.Map.prototype.super=BX.Bitrix24.SlidingPanel.prototype;BX.Bitrix24.Map.prototype.setContent=function(){this.container.appendChild(this.content)};BX.Bitrix24.Map.prototype.animateStep=function(t){this.container.style.transform="translateY("+t.translateY+"%)";this.overlay.style.backgroundColor="rgba(0, 0, 0, "+t.opacity/100+")"};BX.Bitrix24.Map.prototype.open=function(){BX.onCustomEvent("BX.Bitrix24.Map:onBeforeOpen",[this]);this.menu.classList.add("sitemap-menu-open");this.super.open.apply(this,arguments)};BX.Bitrix24.Map.prototype.close=function(){this.menu.classList.remove("sitemap-menu-open");this.super.close.apply(this,arguments)};BX.Bitrix24.Map.prototype.onMenuClick=function(t){if(this.isOpen){this.close()}else{this.open()}t.stopPropagation()};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:95:"/bitrix/templates/bitrix24/components/bitrix/im.messenger/.default/script.min.js?17455641244496";s:6:"source";s:76:"/bitrix/templates/bitrix24/components/bitrix/im.messenger/.default/script.js";s:3:"min";s:80:"/bitrix/templates/bitrix24/components/bitrix/im.messenger/.default/script.min.js";s:3:"map";s:80:"/bitrix/templates/bitrix24/components/bitrix/im.messenger/.default/script.map.js";}"*/
BX.namespace("BX.Intranet.Bitrix24.ImBar");(function(){var e=0;var n=null;var t=false;var i=false;var o=20;function r({copilotAvailable:t}){var i=s();if(i){var o=BX.getClass("BX.admin.panel.state");if(o&&o.fixed){e=c()}BX.addCustomEvent("onTopPanelCollapse",function(){n=null;if(BX.admin.panel.isFixed()){e=c()}u()}.bind(this));BX.addCustomEvent("onTopPanelFix",function(n){if(n){e=c()}else{e=0}u()}.bind(this));u()}BX.bind(window,"scroll",a);BX.bind(window,"resize",a);a();BX.bind(BX("bx-im-bar-notify"),"click",(function(){BX.Messenger.Public.openNotifications()}));BX.bind(BX("bx-im-bar-copilot"),"click",(function(){if(!t){const e=BX.Messenger.v2.Const.SliderCode?.copilotDisabled??"limit_copilot_off";const n=new BX.UI.FeaturePromoter({code:e});n.show();const t=BX.Messenger.v2.Lib.Analytics.getInstance();t.copilot.onOpenTab({isAvailable:false});return}BX.Messenger.Public.openCopilot()}));BX.bind(BX("bx-im-bar-search"),"click",(function(){BX.Messenger.Public.openRecentSearch()}));BX.bind(BX("bx-im-bar-ol"),"click",(function(){BX.Messenger.Public.openLines()}));BX.bind(BX("bx-im-btn-call"),"click",(function(e){if(typeof BXIM=="undefined")return false;BXIM.webrtc.openKeyPad({bindElement:BX("bx-im-btn-call")})}));BX.bind(window,"scroll",(function(){if(typeof BXIM=="undefined"||!BXIM.messenger.popupPopupMenu)return true;if(BX.util.in_array(BXIM.messenger.popupPopupMenu.uniquePopupId.replace("bx-messenger-popup-",""),["createChat","contactList"])){BXIM.messenger.popupPopupMenu.close()}}));BX.bindDelegate(BX("bx-im-external-recent-list"),"contextmenu",{className:"bx-messenger-cl-item"},(function(e){if(typeof BXIM=="undefined")return false;BXIM.messenger.openPopupMenu(this,"contactList",false);return BX.PreventDefault(e)}));BX.bindDelegate(BX("bx-im-external-recent-list"),"click",{className:"bx-messenger-cl-item"},(function(e){if(typeof BXIM=="undefined")return false;BXIM.openMessenger(this.getAttribute("data-userId"));return BX.PreventDefault(e)}));BX.addCustomEvent("onMessengerWindowBodyOverflow",(function(e,n){var t=BX.findChildrenByClassName(BX("im-workarea-popup"),"bx-im-fullscreen-popup-td",true);for(var i=0;i<t.length;i++){var o=getComputedStyle(t[i],null);o=o?parseInt(o.getPropertyValue("padding-left").toString().replace("px","")):85;t[i].style.paddingRight=o+n+"px"}document.body.style.paddingRight=n+"px";BX("bx-im-bar").style.right=n+"px"}));BX.addCustomEvent("onImUpdateCounterNotify",(function(e){var n=BX.findChildByClassName(BX("bx-im-bar-notify"),"bx-im-informer-num");if(!n)return false;if(e>0){n.innerHTML='<div class="bx-im-informer-num-digit">'+(e>99?"99+":e)+"</div>"}else{n.innerHTML=""}}));BX.addCustomEvent("onImUpdateCounterLines",(function(e,n){var t=null;if(n==="LINES"){t=BX("bx-im-bar-ol")}else{return false}var i=t&&BX.findChildByClassName(t,"bx-im-informer-num");if(!i)return false;if(e>0){i.innerHTML='<div class="bx-im-informer-num-digit">'+(e>99?"99+":e)+"</div>"}else{i.innerHTML=""}}));BX.bind(BX("im-workarea-backgound-selector"),"change",(function(){BX("im-workarea-backgound-selector-title").innerHTML=this.options[this.selectedIndex].text}));BX.addCustomEvent("onMessengerWindowInit",(function(){BX("im-workarea-backgound-selector-title").innerHTML=BX("im-workarea-backgound-selector").options[BX("im-workarea-backgound-selector").selectedIndex].text}));BX.addCustomEvent("onImInit",(function(e){e.notify.panelButtonCall=BX("bx-im-btn-call");e.notify.panelButtonCallAnlgePosition="bottom";e.notify.panelButtonCallAnlgeOffset=131;BX.MessengerCommon.recentListRedraw()}))}function a(){var n=l();if(!n||n.dataset.lockRedraw==="true"){return}u();var r=document.documentElement.scrollWidth-document.documentElement.clientWidth;if(r>0){if(!t){BX.addClass(n,"bx-im-bar-transparent");t=true}}else{if(t){BX.removeClass(n,"bx-im-bar-transparent");t=false}}var a=o;if(e===0&&s()){a+=c()}if(window.pageYOffset>a){if(!i){BX.addClass(n,"bx-im-bar-scroll-mode");i=true}}else{if(i){BX.removeClass(n,"bx-im-bar-scroll-mode");i=false}}}function l(){return BX("bx-im-bar")}function s(){return BX("bx-panel")}function u(){var n=s();var t=l();if(!n||!t){return}var i=n.getBoundingClientRect();if(i.bottom>0){t.style.top=Math.max(i.bottom,e)+"px"}else{t.style.top=Math.max(0,e)+"px"}}function c(){if(n!==null){return n}var e=s();if(e){n=e.offsetHeight}else{n=0}return n}function d(){BX.MessengerWindow.closePopup()}BX.Intranet.Bitrix24.ImBar.init=r;BX.Intranet.Bitrix24.ImBar.redraw=a;window.bxFullscreenClose=d})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:84:"/bitrix/components/bitrix/ui.toolbar/templates/.default/script.min.js?17455640897053";s:6:"source";s:65:"/bitrix/components/bitrix/ui.toolbar/templates/.default/script.js";s:3:"min";s:69:"/bitrix/components/bitrix/ui.toolbar/templates/.default/script.min.js";s:3:"map";s:69:"/bitrix/components/bitrix/ui.toolbar/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.UI");BX.UI.ToolbarManager={toolbars:{},create:function(t){var e=new BX.UI.Toolbar(t);if(this.get(e.getId())){throw new Error("The toolbar instance with the same 'id' already exists.")}this.toolbars[e.getId()]=e;return e},getDefaultToolbar:function(){return this.get("default-toolbar")},get:function(t){return t in this.toolbars?this.toolbars[t]:null}};BX.UI.Toolbar=function(t){t=BX.type.isPlainObject(t)?t:{};this.titleMinWidth=BX.type.isNumber(t.titleMinWidth)?t.titleMinWidth:158;this.titleMaxWidth=BX.type.isNumber(t.titleMaxWidth)?t.titleMaxWidth:"";this.filterMinWidth=BX.type.isNumber(t.filterMinWidth)?t.filterMinWidth:300;this.filterMaxWidth=BX.type.isNumber(t.filterMaxWidth)?t.filterMaxWidth:748;this.id=BX.Type.isStringFilled(t.id)?t.id:BX.Text.getRandom();this.toolbarContainer=t.target;if(!BX.Type.isDomNode(this.toolbarContainer)){throw new Error('BX.UI.Toolbar: "target" parameter is required.')}this.titleContainer=this.toolbarContainer.querySelector(".ui-toolbar-title-box");this.filterContainer=this.toolbarContainer.querySelector(".ui-toolbar-filter-box");this.filterButtons=this.toolbarContainer.querySelector(".ui-toolbar-filter-buttons");this.rightButtons=this.toolbarContainer.querySelector(".ui-toolbar-right-buttons");this.afterTitleButtons=this.toolbarContainer.querySelector(".ui-toolbar-after-title-buttons");if(!this.filterContainer){this.filterMinWidth=0;this.filterMaxWidth=0}this.buttons=Object.create(null);this.buttonIds=BX.Type.isArray(t.buttonIds)?t.buttonIds:[];if(!this.buttonIds.length){return}this.buttonIds.forEach((function(t){var e=BX.UI.ButtonManager.createByUniqId(t);if(e){e.getContainer().originalWidth=e.getContainer().offsetWidth;if(!e.getIcon()&&!BX.Type.isStringFilled(e.getDataSet()["toolbarCollapsedIcon"])){if(e.getColor()===BX.UI.ButtonColor.PRIMARY){e.setDataSet({toolbarCollapsedIcon:BX.UI.ButtonIcon.ADD})}else{console.warn('BX.UI.Toolbar: the button "'+e.getText()+'" '+"doesn't have an icon for collapsed mode. "+'Use the "data-toolbar-collapsed-icon" attribute.')}}this.buttons[t]=e}else{console.warn('BX.UI.Toolbar: the button "'+t+"\" wasn't initialized.")}}),this);this.windowWidth=document.body.offsetWidth;this.reduceItemsWidth();window.addEventListener("resize",function(){if(this.isWindowIncreased()){this.increaseItemsWidth()}else{this.reduceItemsWidth()}}.bind(this))};BX.UI.Toolbar.prototype={getButtons:function(){return this.buttons},getButton:function(t){return t in this.buttons?this.buttons[t]:null},getId:function(){return this.id},isWindowIncreased:function(){var t=this.windowWidth;var e=document.body.offsetWidth;this.windowWidth=e;return e>t},getContainerSize:function(){return this.toolbarContainer.offsetWidth},getInnerTotalWidth:function(){return this.toolbarContainer.scrollWidth},reduceItemsWidth:function(){if(this.getInnerTotalWidth()<=this.getContainerSize()){return}var t=Object.values(this.getButtons());for(var e=t.length-1;e>=0;e--){var i=t[e];if(!i.getIcon()&&!BX.Type.isStringFilled(i.getDataSet()["toolbarCollapsedIcon"])){continue}if(i.isCollapsed()){continue}i.setCollapsed(true);if(!i.getIcon()){i.setIcon(i.getDataSet()["toolbarCollapsedIcon"])}if(this.getInnerTotalWidth()<=this.getContainerSize()){return}}},increaseItemsWidth:function(){var t=Object.values(this.getButtons());for(var e=0;e<t.length;e++){var i=t[e];var o=i.getContainer();if(!i.isCollapsed()){continue}var n=this.titleMinWidth+this.filterMinWidth+(this.afterTitleButtons?this.afterTitleButtons.offsetWidth:0)+(this.filterButtons?this.filterButtons.offsetWidth:0)+(this.rightButtons?this.rightButtons.offsetWidth:0)+(o.originalWidth-o.offsetWidth);if(n>this.getContainerSize()){break}i.setCollapsed(false);if(i.getIcon()===i.getDataSet()["toolbarCollapsedIcon"]){const t=BX.Type.isStringFilled(i.options.icon)?i.options.icon:null;i.setIcon(t)}}}};BX.UI.Toolbar.Star=function(){this.initialized=false;this.currentPageInMenu=false;this.starContNode=null;BX.ready(function(){this.init()}.bind(this));BX.addCustomEvent("onFrameDataProcessed",function(){this.init()}.bind(this))};BX.UI.Toolbar.Star.prototype={init:function(){this.starContNode=document.getElementById("uiToolbarStar");if(!this.starContNode){return false}if(this.initialized){return false}this.initialized=true;var t=this.starContNode.getAttribute("data-bx-url");if(!BX.type.isNotEmptyString(t)){t=document.location.pathname+document.location.search}t=BX.Uri.removeParam(t,["IFRAME","IFRAME_TYPE"]);top.BX.addCustomEvent("BX.Bitrix24.LeftMenuClass:onSendMenuItemData",function(t){this.processMenuItemData(t)}.bind(this));top.BX.addCustomEvent("BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess",function(t){this.onStandardItemChangedSuccess(t)}.bind(this));top.BX.onCustomEvent("UI.Toolbar:onRequestMenuItemData",[{currentFullPath:t,context:window}]);return true},processMenuItemData:function(t){if(t.context&&t.context!==window){return}this.currentPageInMenu=t.currentPageInMenu;if(BX.type.isNotEmptyObject(t.currentPageInMenu)){BX.addClass(this.starContNode,"ui-toolbar-star-active")}this.starContNode.title=BX.message(this.starContNode.classList.contains("ui-toolbar-star-active")?"UI_TOOLBAR_DELETE_PAGE_FROM_LEFT_MENU":"UI_TOOLBAR_ADD_PAGE_TO_LEFT_MENU");if(BX.type.isDomNode(this.currentPageInMenu)&&this.currentPageInMenu.getAttribute("data-type")!=="standard"){this.starContNode.title=BX.message("UI_TOOLBAR_STAR_TITLE_DEFAULT_PAGE");BX.bind(this.starContNode,"click",function(){this.showMessage(BX.message("UI_TOOLBAR_STAR_TITLE_DEFAULT_PAGE_DELETE_ERROR"))}.bind(this));return true}BX.bind(this.starContNode,"click",function(){var t=document.getElementById("pagetitle").innerText;var e=this.starContNode.getAttribute("data-bx-title-template");if(BX.type.isNotEmptyString(e)){t=e.replace(/#page_title#/i,t)}var i=this.starContNode.getAttribute("data-bx-url");if(!BX.type.isNotEmptyString(i)){i=document.location.pathname+document.location.search}i=BX.Uri.removeParam(i,["IFRAME","IFRAME_TYPE"]);top.BX.onCustomEvent("UI.Toolbar:onStarClick",[{isActive:BX.hasClass(this.starContNode,"ui-toolbar-star-active"),context:window,pageTitle:t,pageLink:i}])}.bind(this))},onStandardItemChangedSuccess:function(t){if(!BX.type.isBoolean(t.isActive)||!this.starContNode){return}if(t.context&&t.context!==window){return}if(t.isActive){this.showMessage(BX.message("UI_TOOLBAR_ITEM_WAS_ADDED_TO_LEFT"));this.starContNode.title=BX.message("UI_TOOLBAR_DELETE_PAGE_FROM_LEFT_MENU");BX.addClass(this.starContNode,"ui-toolbar-star-active")}else{this.showMessage(BX.message("UI_TOOLBAR_ITEM_WAS_DELETED_FROM_LEFT"));this.starContNode.title=BX.message("UI_TOOLBAR_ADD_PAGE_TO_LEFT_MENU");BX.removeClass(this.starContNode,"ui-toolbar-star-active")}},showMessage:function(t){var e=BX.PopupWindowManager.create("left-menu-message",this.starContNode,{content:t,darkMode:true,offsetTop:2,offsetLeft:0,angle:true,events:{onPopupClose:function(){if(e){e.destroy();e=null}}},autoHide:true});e.show();setTimeout((function(){if(e){e.destroy();e=null}}),3e3)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:58:"/bitrix/templates/bitrix24/bitrix24.min.js?174556412425366";s:6:"source";s:38:"/bitrix/templates/bitrix24/bitrix24.js";s:3:"min";s:42:"/bitrix/templates/bitrix24/bitrix24.min.js";s:3:"map";s:42:"/bitrix/templates/bitrix24/bitrix24.map.js";}"*/
(function(){var t=window!==window.top;var e=window.location.search;var n=e.indexOf("IFRAME=")!==-1||e.indexOf("IFRAME%3D")!==-1;if(t&&n){return}else if(t){window.top.location=window.location.href;return}BX.addCustomEvent("onFrameDataRequestFail",(function(t){top.location="/auth/?backurl="+encodeURIComponent(B24.getBackUrl())}));BX.addCustomEvent("onAjaxFailure",(function(t){var e="/auth/?backurl="+B24.getBackUrl();if(t=="auth"&&typeof window.frameRequestStart!=="undefined"){top.location=e}}));BX.addCustomEvent("onPopupWindowInit",(function(t,e,n){if(t=="bx_log_filter_popup"){n.lightShadow=true;n.className=""}else if(t=="task-legend-popup"){n.lightShadow=true;n.offsetTop=-15;n.offsetLeft=-670;n.angle={offset:740}}else if(t=="task-gantt-filter"||t=="task-list-filter"){n.lightShadow=true;n.className=""}else if(t.indexOf("sonet_iframe_popup_")>-1){n.lightShadow=true}}));BX.addCustomEvent("onJCClockInit",(function(t){JCClock.setOptions({centerXInline:83,centerX:83,centerYInline:67,centerY:79,minuteLength:31,hourLength:26,popupHeight:229,inaccuracy:15,cancelCheckClick:true})}));BX.addCustomEvent("onPullEvent-main",(function(t,e){if(t=="user_counter"&&e[BX.message("SITE_ID")]){var n=BX.clone(e[BX.message("SITE_ID")]);B24.updateCounters(n,false)}}));BX.addCustomEvent("onPullEvent-tasks",(function(t,e){if(t=="user_counter"&&Number(e.userId)===Number(BX.Loc.getMessage("USER_ID"))){var n={};if(!BX.Type.isUndefined(e.projects_major)){n.projects_major=e.projects_major}if(!BX.Type.isUndefined(e.scrum_total_comments)){n.scrum_total_comments=e.scrum_total_comments}B24.updateCounters(n,false)}}));BX.addCustomEvent("onPullEvent-bitrix24",BX.delegate((function(t,e){if(t=="userLimitNotify"){BX.UI.Notification.Center.notify({content:e.message})}}),this));if(typeof window.frameRequestStart!=="undefined"&&BX.PULL){BX.PULL.subscribe({moduleId:"main",command:"composite-cache-up",callback:function(){setTimeout((function(){const t=BX.localStorage.get("ajax-composite-cache-up-lock");if(!t){BX.localStorage.set("ajax-composite-cache-up-lock","EXECUTE",2);BX.ajax({url:"/blank.php",method:"GET",processData:false,skipBxHeader:true,emulateOnload:false})}}),Math.floor(Math.random()*500))}})}BX.addCustomEvent(window,"onImUpdateCounter",(function(t){if(!t)return;B24.updateCounters(BX.clone(t),false)}));BX.addCustomEvent("onCounterDecrement",(function(t){B24.decrementCounter(BX("menu-counter-live-feed"),t)}));BX.addCustomEvent("onImUpdateCounterNotify",(function(t){B24.updateInformer(BX("im-informer-events",true),t)}));BX.addCustomEvent("onImUpdateCounterMessage",(function(t){B24.updateInformer(BX("im-informer-messages",true),t);B24.updateCounters({"im-message":t},false)}));BX.addCustomEvent("onImUpdateCounterNetwork",(function(t){B24.updateInformer(BX("b24network-informer-events",true),t)}));BX.addCustomEvent("openLicenseAllSlider",(()=>{BX.SidePanel.Instance.open("/bitrix/components/bitrix/bitrix24.license.all/index.php",{cacheable:false,allowChangeHistory:false,width:1250})}));BX.addCustomEvent("Kanban.Grid:onFixedModeStart",(function(){BX.ready((function(){BX("footer").style.visibility="hidden"}))}));BX.addCustomEvent("Intranet.Search.Title:onFocusAction",(function(t){if(!BX.type.isDomNode(BX("header-buttons"))||!BX("header-buttons").querySelector(".ui-btn")){return}var e=BX("timeman-container");var n=BX("header");if(!BX.type.isDomNode(e)||!BX.type.isDomNode(n)){return}if(t==="gain"){e.style.webkitTransition="min-width .2s, width .2s, opacity .1s, padding .2s";n.style.width=n.offsetWidth+"px";if(document.body.offsetWidth<1660){e.style.opacity="0";setTimeout(function(){BX.addClass(e,"timeman-container--hide")}.bind(this),100)}}else if(t==="lost"){e.style.webkitTransition="min-width .2s, width .2s, opacity .3s, padding .2s";BX.removeClass(e,"timeman-container--hide");setTimeout(function(){e.style.opacity="1";n.removeAttribute("style")}.bind(this),300)}}));BX.addCustomEvent("onPullError",BX.delegate((function(t,e){if(t=="AUTHORIZE_ERROR"){B24.connectionStatus("offline")}else if(t=="RECONNECT"&&(e==1008||e==1006)){B24.connectionStatus("connecting")}}),this));BX.addCustomEvent("onImError",BX.delegate((function(t,e){if(t=="AUTHORIZE_ERROR"||t=="SEND_ERROR"&&e=="AUTHORIZE_ERROR"){B24.connectionStatus("offline")}else if(t=="CONNECT_ERROR"){B24.connectionStatus("offline")}}),this));BX.addCustomEvent("onPullStatus",BX.delegate((function(t){if(t=="offline")B24.connectionStatus("offline");else B24.connectionStatus("online")}),this));if(BX.browser.SupportLocalStorage()){BX.addCustomEvent(window,"onLocalStorageSet",(function(t){if(t.key.substring(0,4)=="lmc-"){var e={};e[t.key.substring(4)]=t.value;B24.updateCounters(e,false)}}))}if(BX.getClass("BX.rest.AppLayout")){var i=BX.rest.AppLayout.initializePlacement("DEFAULT");i.prototype.showHelper=function(t,e){var n="";if(BX.type.isNumber(t)){n="redirect=detail&code="+t}else if(BX.type.isNotEmptyString(t)){n=t}else if(BX.type.isPlainObject(t)){for(var i in t){if(n.length){n+="&"}n+=i+"="+t[i]}}if(n.length){BX.Helper.show(n)}}}BX.ready((function(){BX.bind(window,"scroll",BX.throttle(B24.onScroll,150,B24))}))})();var B24={b24ConnectionStatusState:"online",b24ConnectionStatus:null,b24ConnectionStatusText:null,b24ConnectionStatusTimeout:null,formateDate:function(t){return BX.util.str_pad(t.getHours(),2,"0","left")+":"+BX.util.str_pad(t.getMinutes(),2,"0","left")},openLanguagePopup:function(t){if(!BX.type.isDomNode(BX("b24LangPopupContent")))return;BX.PopupWindowManager.create("b24LangPopup",t,{content:BX("b24LangPopupContent"),closeIcon:false,autoHide:true,closeByEsc:true,angle:{offset:50}}).show()},changeLanguage:function(t){window.location.href="/auth/?user_lang="+t+"&backurl="+B24.getBackUrl()},getBackUrl:function(){var t=window.location.pathname;var e=B24.getQueryString(["logout","login","back_url_pub","user_lang"]);return t+(e.length>0?"?"+e:"")},getQueryString:function(t){var e=window.location.search.substring(1);if(!BX.type.isNotEmptyString(e)){return""}var n=e.split("&");t=BX.type.isArray(t)?t:[];var i="";for(var o=0;o<n.length;o++){var a=n[o].split("=");var s=n[o].indexOf("=");var r=a[0];var l=BX.type.isNotEmptyString(a[1])?a[1]:false;if(!BX.util.in_array(r,t)){if(i!==""){i+="&"}i+=r+(s!==-1?"=":"")+(l!==false?l:"")}}return i},updateInformer:function(t,e){if(!t)return false;if(e>0){t.innerHTML=e;BX.addClass(t,"header-informer-act")}else{t.innerHTML="";BX.removeClass(t,"header-informer-act")}},updateCounters:function(t,e){BX.ready((function(){if(BX.getClass("BX.Intranet.LeftMenu")){BX.Intranet.LeftMenu.updateCounters(t,e)}}))},decrementCounter:function(t,e){BX.ready((function(){if(BX.getClass("BX.Intranet.LeftMenu")){BX.Intranet.LeftMenu.decrementCounter(t,e)}}))},showNotifyPopup:function(t){if(BX.hasClass(t,"header-informer-press")){BX.removeClass(t,"header-informer-press");BXIM.closeNotify()}else{BXIM.openNotify()}},showMessagePopup:function(t){if(typeof BXIM=="undefined")return false;BXIM.toggleMessenger()},closeBanner:function(t){BX.userOptions.save("bitrix24","banners",t,"Y");var e=BX("sidebar-banner-"+t);if(e){e.style.minHeight="auto";e.style.overflow="hidden";e.style.border="none";new BX.easing({duration:500,start:{height:e.offsetHeight,opacity:100},finish:{height:0,opacity:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(t){if(t.height>=0){e.style.height=t.height+"px";e.style.opacity=t.opacity/100}if(t.height<=17){e.style.marginBottom=t.height+"px"}},complete:function(){e.style.display="none"}}).animate()}},showLoading:function(t){t=t||500;function e(){var t=BX("b24-loader");if(t){BX.addClass(t,"b24-loader-show intranet-loader-show");return true}return false}setTimeout((function(){if(!e()&&!BX.isReady){BX.ready(e)}}),t)}};B24.onScroll=function(){var t=BX.GetWindowScrollPos();if(B24.b24ConnectionStatus){if(B24.b24ConnectionStatus.getAttribute("data-float")=="true"){if(t.scrollTop<60){BX.removeClass(B24.b24ConnectionStatus,"bx24-connection-status-float");B24.b24ConnectionStatus.setAttribute("data-float","false")}}else{if(t.scrollTop>60){BX.addClass(B24.b24ConnectionStatus,"bx24-connection-status-float");B24.b24ConnectionStatus.setAttribute("data-float","true")}}}};B24.goUp=function(t){var e=BX.GetWindowScrollPos();new BX.easing({duration:500,start:{scroll:e.scrollTop},finish:{scroll:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(t){window.scrollTo(0,t.scroll)},complete:function(){BX.onCustomEvent(window,"onGoUp");if(BX.type.isFunction(t)){t()}}}).animate()};B24.toggleMenu=function(t,e,n){var i=BX.findChild(t.parentNode,{tagName:"ul"},false,false);var o=BX.findChildren(i,{tagName:"li"},false);if(!o)return;var a=BX.findChild(t,{className:"menu-toggle-text"},true,false);if(!a)return;if(BX.hasClass(i,"menu-items-close")){i.style.height="0px";BX.removeClass(i,"menu-items-close");BX.removeClass(BX.nextSibling(BX.nextSibling(t)),"menu-items-close");i.style.opacity=0;s(true,i,i.scrollHeight);a.innerHTML=n;BX.userOptions.save("bitrix24",t.id,"hide","N")}else{s(false,i,i.offsetHeight);a.innerHTML=e;BX.userOptions.save("bitrix24",t.id,"hide","Y")}function s(e,n,i){n.style.overflow="hidden";new BX.easing({duration:200,start:{opacity:e?0:100,height:e?0:i},finish:{opacity:e?100:0,height:e?i:0},transition:BX.easing.transitions.linear,step:function(t){n.style.opacity=t.opacity/100;n.style.height=t.height+"px"},complete:function(){if(!e){BX.addClass(n,"menu-items-close");BX.addClass(BX.nextSibling(BX.nextSibling(t)),"menu-items-close")}n.style.cssText=""}}).animate()}};B24.licenseInfoPopup={show:function(t,e,n,i){if(BX.getClass("BX.Bitrix24.LicenseInfoPopup")){BX.Bitrix24.LicenseInfoPopup.show(t,e,n,i)}}};function showPartnerForm(t){BX=window.BX;BX.Bitrix24PartnerForm={bInit:false,popup:null,arParams:{}};BX.Bitrix24PartnerForm.arParams=t;BX.message(t["MESS"]);BX.Bitrix24PartnerForm.popup=BX.PopupWindowManager.create("BXPartner",null,{className:"bitrix24-partner__popup",autoHide:false,zIndex:0,offsetLeft:0,offsetTop:0,width:540,height:350,overlay:true,draggable:{restrict:true},closeByEsc:true,titleBar:BX.message("BX24_PARTNER_TITLE"),closeIcon:{right:"12px",top:"10px"},buttons:[new BX.PopupWindowButton({text:BX.message("BX24_BUTTON_SEND"),className:"ui-btn ui-btn-success",events:{click:function(){this.popupWindow.close();BX.UI.Feedback.Form.open({id:"intranet-license-partner-form-"+parseInt(Math.random()*1e3),portalUri:"https://bitrix24.team",forms:[{zones:["de"],id:883,lang:"de",sec:"a12ty8"},{zones:["com","in","eu","uk"],id:735,lang:"en",sec:"vlhmlv"},{zones:["es","co","mx"],id:900,lang:"es",sec:"w3qmwq"},{zones:["com.br"],id:901,lang:"pt",sec:"prnm4x"},{zones:["cn/tc"],id:902,lang:"cn-tc",sec:"z8isyg"},{zones:["cn"],id:903,lang:"cn-sc",sec:"hsxnam"},{zones:["pl"],id:904,lang:"pl",sec:"2ph9ph"},{zones:["it"],id:905,lang:"it",sec:"2r3owa"},{zones:["fr"],id:906,lang:"fr",sec:"jt2fii"},{zones:["com.tr"],id:907,lang:"tr",sec:"ovevp8"},{zones:["id"],id:908,lang:"id",sec:"7kq7v2"},{zones:["com/my"],id:909,lang:"ms",sec:"kmncmj"},{zones:["com/th"],id:910,lang:"th",sec:"sknbp9"},{zones:["vn"],id:911,lang:"vn",sec:"a573fy"},{zones:["jp"],id:912,lang:"jp",sec:"3purdq"},{zones:["ru"],id:2122,lang:"ru",sec:"8vralr"},{zones:["kz"],id:2128,lang:"ru",sec:"054phh"},{zones:["by"],id:2129,lang:"ru",sec:"srs85j"}],defaultForm:{id:735,lang:"en",sec:"vlhmlv"}})}}})],events:{onPopupFirstShow:function(){var t=new BX.Loader({size:80});t.show(this.getPopupContainer());BX.ajax.post("/bitrix/tools/b24_site_partner.php",{lang:BX.message("LANGUAGE_ID"),site_id:BX.message("SITE_ID")||"",arParams:BX.Bitrix24PartnerForm.arParams},BX.delegate((function(e){t.hide();this.setContent(e)}),this))}}});BX.Bitrix24PartnerForm.popup.show()}B24.Timemanager={inited:false,layout:{block:null,timer:null,info:null,event:null,tasks:null,status:null},data:null,timer:null,clock:null,formatTime:function(t,e){return BX.util.str_pad(parseInt(t/3600),2,"0","left")+":"+BX.util.str_pad(parseInt(t%3600/60),2,"0","left")+(!!e?":"+BX.util.str_pad(t%60,2,"0","left"):"")},formatWorkTime:function(t,e,n){return'<span class="tm-popup-notice-time-hours"><span class="tm-popup-notice-time-number">'+t+'</span></span><span class="tm-popup-notice-time-minutes"><span class="tm-popup-notice-time-number">'+BX.util.str_pad(e,2,"0","left")+'</span></span><span class="tm-popup-notice-time-seconds"><span class="tm-popup-notice-time-number">'+BX.util.str_pad(n,2,"0","left")+"</span></span>"},formatCurrentTime:function(t,e,n){var i="";if(BX.isAmPmMode()){i="AM";if(t>12){t=t-12;i="PM"}else if(t==0){t=12;i="AM"}else if(t==12){i="PM"}i='<span class="time-am-pm">'+i+"</span>"}else t=BX.util.str_pad(t,2,"0","left");return'<span class="time-hours">'+t+"</span>"+'<span class="time-semicolon">:</span>'+'<span class="time-minutes">'+BX.util.str_pad(e,2,"0","left")+"</span>"+i},init:function(t){BX.addCustomEvent("onTimeManDataRecieved",BX.proxy(this.onDataRecieved,this));BX.addCustomEvent("onTimeManNeedRebuild",BX.proxy(this.onDataRecieved,this));BX.addCustomEvent("onPlannerDataRecieved",BX.proxy(this.onPlannerDataRecieved,this));BX.addCustomEvent("onPlannerQueryResult",BX.proxy(this.onPlannerQueryResult,this));BX.addCustomEvent("onTaskTimerChange",BX.proxy(this.onTaskTimerChange,this));BX.timer.registerFormat("worktime_notice_timeman",BX.proxy(this.formatWorkTime,this));BX.timer.registerFormat("bitrix24_time",BX.proxy(this.formatCurrentTime,this));BX.addCustomEvent(window,"onTimemanInit",BX.proxy((function(){this.inited=true;this.layout.block=BX("timeman-block");this.layout.timer=BX("timeman-timer");this.layout.info=BX("timeman-info");this.layout.event=BX("timeman-event");this.layout.tasks=BX("timeman-tasks");this.layout.status=BX("timeman-status");this.layout.statusBlock=BX("timeman-status-block");this.layout.taskTime=BX("timeman-task-time");this.layout.taskTimer=BX("timeman-task-timer");this.layout.checkInCounter=BX("timeman-stafftrack-counter");window.BXTIMEMAN.ShowFormWeekly(t);BX.bind(this.layout.block,"click",BX.proxy(this.onTimemanClick,this));BXTIMEMAN.setBindOptions({node:this.layout.block,mode:"popup",popupOptions:{angle:{position:"top",offset:130},offsetTop:10,autoHide:true,offsetLeft:-60,events:{onClose:function(){BX.removeClass(this.layout.block,"timeman-block-active")}.bind(this),onFirstShow:function(t){var e=t.getTarget();BX.Event.EventEmitter.subscribe("BX.Main.InterfaceButtons:onMenuShow",(function(){e.close()}))}}}});this.redraw()}),this))},onTimemanClick:function(){BX.addClass(this.layout.block,"timeman-block-active");BXTIMEMAN.Open()},onTaskTimerChange:function(t){if(t.action==="refresh_daemon_event"){if(!!this.taskTimerSwitch){this.layout.taskTime.style.display="";if(this.layout.info.style.display!="none"){this.layout.statusBlock.style.display="none"}this.taskTimerSwitch=false}var e="";e+=this.formatTime(parseInt(t.data.TIMER.RUN_TIME||0)+parseInt(t.data.TASK.TIME_SPENT_IN_LOGS||0),true);if(!!t.data.TASK.TIME_ESTIMATE&&t.data.TASK.TIME_ESTIMATE>0){e+=" / "+this.formatTime(parseInt(t.data.TASK.TIME_ESTIMATE))}this.layout.taskTimer.innerHTML=e}else if(t.action==="start_timer"){this.taskTimerSwitch=true}else if(t.action==="stop_timer"){this.layout.taskTime.style.display="none";this.layout.statusBlock.style.display=""}},setTimer:function(){if(this.timer){this.timer.setFrom(new Date(this.data.INFO.DATE_START*1e3));this.timer.dt=-this.data.INFO.TIME_LEAKS*1e3}else{this.timer=BX.timer(this.layout.timer,{from:new Date(this.data.INFO.DATE_START*1e3),dt:-this.data.INFO.TIME_LEAKS*1e3,display:"simple"})}},stopTimer:function(){if(this.timer!=null){BX.timer.stop(this.timer);this.timer=null}},redraw_planner:function(t){if(!!t.TASKS_ENABLED){t.TASKS_COUNT=!t.TASKS_COUNT?0:t.TASKS_COUNT;this.layout.tasks.innerHTML=t.TASKS_COUNT;this.layout.tasks.style.display=t.TASKS_COUNT==0?"none":"inline-block"}if(!!t.CALENDAR_ENABLED){this.layout.event.innerHTML=t.EVENT_TIME;this.layout.event.style.display=t.EVENT_TIME==""?"none":"inline-block"}this.layout.info.style.display=BX.style(this.layout.tasks,"display")=="none"&&BX.style(this.layout.event,"display")=="none"?"none":"block"},redraw:function(){const t=this.data.CHECKIN_COUNTER?.VALUE;const e=this.data.CHECKIN_COUNTER?.CLASS;if(t){BX.Runtime.loadExtension("ui.counter").then((()=>{BX.Dom.style(this.layout.checkInCounter,"display","");this.layout.checkInCounter.firstElementChild.textContent=t;const n=this.layout.checkInCounter.dataset.class;BX.Dom.removeClass(this.layout.checkInCounter,n);BX.Dom.addClass(this.layout.checkInCounter,e);this.layout.checkInCounter.dataset.class=e}))}else{this.layout.checkInCounter.style.display="none"}this.redraw_planner(this.data.PLANNER);if(this.data.STATE=="CLOSED"&&(this.data.CAN_OPEN=="REOPEN"||!this.data.CAN_OPEN))this.layout.status.innerHTML=this.getStatusName("COMPLETED");else this.layout.status.innerHTML=this.getStatusName(this.data.STATE);if(!this.timer)this.timer=BX.timer({container:this.layout.timer,display:"bitrix24_time"});var n="";if(this.data.STATE=="CLOSED"){if(this.data.CAN_OPEN=="REOPEN"||!this.data.CAN_OPEN)n="timeman-completed";else n="timeman-start"}else if(this.data.STATE=="PAUSED")n="timeman-paused";else if(this.data.STATE=="EXPIRED")n="timeman-expired";BX.removeClass(this.layout.block,"timeman-completed timeman-start timeman-paused timeman-expired");BX.addClass(this.layout.block,n);if(n=="timeman-start"||n=="timeman-paused"){this.startAnimation()}else{this.endAnimation()}},getStatusName:function(t){return BX.message("TM_STATUS_"+t)},onDataRecieved:function(t){t.OPEN_NOW=false;this.data=t;if(this.inited)this.redraw()},onPlannerQueryResult:function(t,e){if(this.inited)this.redraw_planner(t)},onPlannerDataRecieved:function(t,e){if(this.inited)this.redraw_planner(e)},animation:null,animationTimeout:3e4,blinkAnimation:null,blinkLimit:10,blinkTimeout:750,startAnimation:function(){if(this.animation!==null){this.endAnimation()}this.startBlink();this.animation=setInterval(BX.proxy(this.startBlink,this),this.animationTimeout)},endAnimation:function(){this.endBlink();if(this.animation){clearInterval(this.animation)}this.animation=null},startBlink:function(){if(this.blinkAnimation!==null){this.endBlink()}var t=0;this.blinkAnimation=setInterval(BX.proxy((function(){if(++t>=this.blinkLimit){clearInterval(this.blinkAnimation);BX.show(BX("timeman-background",true))}else{BX.toggle(BX("timeman-background",true))}}),this),this.blinkTimeout)},endBlink:function(){if(this.blinkAnimation){clearInterval(this.blinkAnimation)}BX("timeman-background",true).style.cssText="";this.blinkAnimation=null}};B24.Bitrix24InviteDialog={bInit:false,popup:null,arParams:{}};B24.Bitrix24InviteDialog.Init=function(t){if(t)B24.Bitrix24InviteDialog.arParams=t;if(B24.Bitrix24InviteDialog.bInit)return;BX.message(t["MESS"]);B24.Bitrix24InviteDialog.bInit=true;BX.ready(BX.delegate((function(){B24.Bitrix24InviteDialog.popup=BX.PopupWindowManager.create("B24InviteDialog",null,{autoHide:false,zIndex:0,offsetLeft:0,offsetTop:0,overlay:true,draggable:{restrict:true},closeByEsc:true,titleBar:BX.message("BX24_INVITE_TITLE_INVITE"),contentColor:"white",contentNoPaddings:true,closeIcon:{right:"12px",top:"10px"},buttons:[],className:"bx-b24-invite-dialog-popup",content:'<div style="width:500px;height:300px; background: url(/bitrix/templates/bitrix24/images/loader.gif) no-repeat center;"></div>',events:{onAfterPopupShow:function(){B24.Bitrix24InviteDialog.loadForm()},onPopupClose:function(){BX.InviteDialog.onInviteDialogClose()}}})}),this))};B24.Bitrix24InviteDialog.ShowForm=function(t){B24.Bitrix24InviteDialog.Init(t);B24.Bitrix24InviteDialog.popup.show()};B24.Bitrix24InviteDialog.loadForm=function(){B24.Bitrix24InviteDialog.popup.setContent('<div style="width:500px;height:300px; background: url(/bitrix/templates/bitrix24/images/loader.gif) no-repeat center;"></div>');BX.ajax.post("/bitrix/tools/intranet_invite_dialog.php",{lang:BX.message("LANGUAGE_ID"),site_id:BX.message("SITE_ID")||"",arParams:B24.Bitrix24InviteDialog.arParams},BX.delegate((function(t){B24.Bitrix24InviteDialog.popup.setContent(t);B24.Bitrix24InviteDialog.popup.adjustPosition()}),this))};B24.Bitrix24InviteDialog.ReInvite=function(t){BX.ajax.post("/bitrix/tools/intranet_invite_dialog.php",{lang:BX.message("LANGUAGE_ID"),site_id:BX.message("SITE_ID")||"",reinvite:t,sessid:BX.bitrix_sessid()},BX.delegate((function(t){}),this))};B24.connectionStatus=function(t){if(!(t=="online"||t=="connecting"||t=="offline"))return false;if(this.b24ConnectionStatusState==t)return false;this.b24ConnectionStatusState=t;var e="";if(t=="offline"){b24ConnectionStatusStateText=BX.message("BITRIX24_CS_OFFLINE");e="bx24-connection-status-offline"}else if(t=="connecting"){b24ConnectionStatusStateText=BX.message("BITRIX24_CS_CONNECTING");e="bx24-connection-status-connecting"}else if(t=="online"){b24ConnectionStatusStateText=BX.message("BITRIX24_CS_ONLINE");e="bx24-connection-status-online"}clearTimeout(this.b24ConnectionStatusTimeout);var n=document.querySelector('[data-role="b24-connection-status"]');if(!n){var i=BX.GetWindowScrollPos();var o=i.scrollTop>60;this.b24ConnectionStatus=BX.create("div",{attrs:{className:"bx24-connection-status "+(this.b24ConnectionStatusState=="online"?"bx24-connection-status-hide":"bx24-connection-status-show bx24-connection-status-"+this.b24ConnectionStatusState)+(o?" bx24-connection-status-float":""),"data-role":"b24-connection-status","data-float":o?"true":"false"},children:[BX.create("div",{props:{className:"bx24-connection-status-wrap"},children:[this.b24ConnectionStatusText=BX.create("span",{props:{className:"bx24-connection-status-text"},html:b24ConnectionStatusStateText}),BX.create("span",{props:{className:"bx24-connection-status-text-reload"},children:[BX.create("span",{props:{className:"bx24-connection-status-text-reload-title"},html:BX.message("BITRIX24_CS_RELOAD")}),BX.create("span",{props:{className:"bx24-connection-status-text-reload-hotkey"},html:BX.browser.IsMac()?"&#8984;+R":"Ctrl+R"})],events:{click:function(){location.reload()}}})]})]})}else{this.b24ConnectionStatus=n}if(!this.b24ConnectionStatus)return false;if(t=="online"){clearTimeout(this.b24ConnectionStatusTimeout);this.b24ConnectionStatusTimeout=setTimeout(BX.delegate((function(){BX.removeClass(this.b24ConnectionStatus,"bx24-connection-status-show");this.b24ConnectionStatusTimeout=setTimeout(BX.delegate((function(){BX.removeClass(this.b24ConnectionStatus,"bx24-connection-status-hide")}),this),1e3)}),this),4e3)}this.b24ConnectionStatus.className="bx24-connection-status bx24-connection-status-show "+e+" "+(this.b24ConnectionStatus.getAttribute("data-float")=="true"?"bx24-connection-status-float":"");this.b24ConnectionStatusText.innerHTML=b24ConnectionStatusStateText;if(!n){var a=BX.findChild(document.body,{className:"bx-layout-inner-table"},true,false);a.parentNode.insertBefore(this.b24ConnectionStatus,a)}return true};B24.showPartnerOrderForm=function(t){if(typeof t!=="object")return;BX.PopupWindowManager.create("B24PartnerOrderForm",null,{autoHide:true,zIndex:0,offsetLeft:0,offsetTop:0,overlay:true,height:Math.min(document.documentElement.clientHeight-100,740),width:560,draggable:{restrict:true},closeByEsc:true,contentColor:"white",contentNoPaddings:true,content:'<script data-b24-form="inline/'+t.id+"/"+t.sec+'" data-skip-moving="true">'+"(function(w,d,u){"+'var s=d.createElement("script");s.async=true;s.src=u+"?"+(Date.now()/180000|0);'+'var h=d.getElementsByTagName("script")[0];h.parentNode.insertBefore(s,h);'+'})(window,document,"https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.sec}.js");'+"<\/script>",events:{onPopupFirstShow:function(){(function(t,e,n){var i=e.createElement("script");i.async=true;i.src=n+"?"+(Date.now()/18e4|0);var o=e.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)})(window,document,"https://bitrix24.team/upload/crm/form/loader_"+t.id+"_"+t.sec+".js")}}}).show()};B24.upgradeButtonRedirect=function(t){if(typeof t!=="object")return;var e=t.COUNTER_URL||"",n=t.LICENSE_PATH||"",i=t.HOST||"";BX.ajax.post(e,{action:"upgradeButton",host:i},BX.proxy((function(){BX.SidePanel.Instance.open(n)}),this))};B24.PopupBlur=function(){BX.PopupWindow.apply(this,arguments);this.setBlurBg();BX.Event.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",this.setBlurBg.bind(this))};B24.PopupBlur.prototype={__proto__:BX.PopupWindow.prototype,constructor:B24.PopupBlur,setBlurBg:function(){var t=this.getPopupContainer();var e=window.getComputedStyle(document.body).backgroundImage;var n=window.getComputedStyle(document.body).backgroundColor;if(BX.Type.isDomNode(t)){t.classList.add("popup-window-blur")}var i=BX.create("style",{attrs:{type:"text/css"}});var o=".popup-window-content:after { "+"background-image: "+e+";"+"background-color: "+n+"} ";o=document.createTextNode(o);i.appendChild(o);document.head.appendChild(i);if(this.angle){this.setBlurBgAngle()}},setBlurBgAngle:function(){var t=window.getComputedStyle(document.body).backgroundColor;var e=BX.create("style",{attrs:{type:"text/css"}});var n=".popup-window-angly:after { "+"background-color: "+t+"} ";n=document.createTextNode(n);e.appendChild(n);document.head.appendChild(e)},setPadding:function(t){if(BX.Type.isNumber(t)&&t>=0){this.padding=t;this.getContentContainer().style.padding=t+"px"}else if(t===null){this.padding=null;this.getContentContainer().style.removeProperty("padding")}}};
/* End */
;; /* /bitrix/components/bitrix/intranet.settings.widget/templates/.default/script.min.js?17455640305250*/
; /* /bitrix/components/bitrix/search.title/script.min.js?17455640626543*/
; /* /bitrix/components/bitrix/intranet.user.profile.button/templates/.default/script.min.js?174556403076682*/
; /* /bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/script.min.js?1745564124101045*/
; /* /bitrix/templates/bitrix24/components/bitrix/menu/left_vertical/map.min.js?174556412411182*/
; /* /bitrix/templates/bitrix24/components/bitrix/im.messenger/.default/script.min.js?17455641244496*/
; /* /bitrix/components/bitrix/ui.toolbar/templates/.default/script.min.js?17455640897053*/
; /* /bitrix/templates/bitrix24/bitrix24.min.js?174556412425366*/

//# sourceMappingURL=template_178be3417e68aed7840b36f89f550b29.map.js